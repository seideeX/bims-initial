import{K as le,m as de,r as ae,j as r,L as me}from"./app-CDPwVV6Y.js";import he from"./BreadcrumbsHeader-BOSIhs5m.js";import{D as ue}from"./DropdownInputField-BmM-TOT_.js";import{I as pe}from"./InputError-CsvCol3W.js";import{I as m}from"./InputField-D_ZI8EKx.js";import{I as _e}from"./InputLabel-C3y8TkvV.js";import{B as ce}from"./button-B_aprJyo.js";import"./index-CH7DWExs.js";import{S as ye}from"./Section5-Nqid335z.js";import{R as be,q as ge}from"./constants-DHCt9dPc.js";import{S as xe}from"./AdminLayout-BW3ywimG.js";import{u as fe}from"./handleResidentChange-yybasKmi.js";import"./breadcrumb-DsnADmME.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./chevron-right-DYtVQaAj.js";import"./createLucideIcon-B4SoG9zf.js";import"./sidebar-BqlEtGlg.js";import"./input-DTbtaxsV.js";import"./index-8Tef56KC.js";import"./index-Dsz93ONd.js";import"./floating-ui.react-dom-VvtSZ_DO.js";import"./x-rg4AgZHH.js";import"./tooltip-10O7WS77.js";import"./RadioGroup-K1vYBuUY.js";import"./SelectField-DIeNwIQe.js";import"./YearDropdown-Cu5CjLYl.js";import"./index-D4O4cOmu.js";import"./iconBase-DNpEM3Pe.js";import"./useAppUrl-BIsbUUVL.js";import"./switch-Zowgx48p.js";import"./index-BntGPR1O.js";import"./nav-user-BTW7oy-u.js";import"./avatar-p9YAZDXV.js";import"./dropdown-menu-DFrz86N0.js";import"./check-BsJSkZwI.js";import"./DeleteConfirmationModal-DcMwm5QA.js";import"./file-text-DhLfxzDZ.js";import"./users-round-BK2vts8v.js";import"./heart-pulse-BRIexC2Z.js";import"./chevron-up-BBBA9wsx.js";function mr({auth:ve,puroks:Z,streets:H,barangays:je,residents:h,latestHead:e}){const ee=[{label:"Residents Information",showOnMobile:!1},{label:"Households",href:route("household.index"),showOnMobile:!1},{label:"Edit Household",showOnMobile:!0}],{error:u}=le().props.errors,{data:o,setData:d,post:re,errors:p}=de({resident_id:null,resident_name:"",birthdate:"",gender:"",resident_image:null,purok_id:null,street_id:null,street_name:null,residency_date:null,residency_type:null,subdivision:"",housenumber:null,ownership_type:"",housing_condition:"",house_structure:null,year_established:null,number_of_rooms:null,number_of_floors:null,bath_and_wash_area:null,waste_management_types:[{waste_management_type:""}],toilets:[{toilet_type:""}],electricity_types:[{electricity_types:""}],water_source_types:[{water_source_type:""}],type_of_internet:null,relationship_to_head:"",household_position:"",name_of_head:"",has_livestock:null,livestocks:[],has_pets:null,pets:[],household_id:null,_method:"PUT"});ae.useEffect(()=>{var s,i,a,l,n,_,c,y,b,g,x,f,v,j,w,N,E,S,R,I,D,T,$,k,O,C,P,B,F,L,M,U,G,V,X,Y,q,A,K,z,J,Q,W;e&&d({resident_id:((s=e.resident)==null?void 0:s.id)||null,resident_name:`${((i=e.resident)==null?void 0:i.firstname)||""} ${((a=e.resident)==null?void 0:a.middlename)||""} ${((l=e.resident)==null?void 0:l.lastname)||""}`.trim(),birthdate:((n=e.resident)==null?void 0:n.birthdate)||"",gender:((_=e.resident)==null?void 0:_.gender)||"",resident_image:((c=e.resident)==null?void 0:c.resident_picture_path)||null,purok_id:((y=e.household)==null?void 0:y.purok_id)||null,street_id:((b=e.household)==null?void 0:b.street_id)||null,street_name:((x=(g=e.household)==null?void 0:g.street)==null?void 0:x.street_name)||null,residency_date:((f=e.resident)==null?void 0:f.residency_date)||null,residency_type:((v=e.resident)==null?void 0:v.residency_type)||null,subdivision:((j=e.household)==null?void 0:j.subdivision)||null,housenumber:(w=e.household)!=null&&w.house_number?(N=e.household)==null?void 0:N.house_number.toString():null,ownership_type:((E=e.household)==null?void 0:E.ownership_type)||"",housing_condition:((S=e.household)==null?void 0:S.housing_condition)||"",house_structure:((R=e.household)==null?void 0:R.house_structure)||null,year_established:((I=e.household)==null?void 0:I.year_established)||null,number_of_rooms:((D=e.household)==null?void 0:D.number_of_rooms)||null,number_of_floors:((T=e.household)==null?void 0:T.number_of_floors)||null,bath_and_wash_area:(($=e.household)==null?void 0:$.bath_and_wash_area)||null,waste_management_types:((O=(k=e.household)==null?void 0:k.waste_management_types)==null?void 0:O.map(t=>({waste_management_type:t.waste_management_type})))||[{waste_management_type:""}],toilets:((P=(C=e.household)==null?void 0:C.toilets)==null?void 0:P.map(t=>({toilet_type:t.toilet_type})))||[{toilet_type:""}],electricity_types:((F=(B=e.household)==null?void 0:B.electricity_types)==null?void 0:F.map(t=>({electricity_type:t.electricity_type})))||[{electricity_type:""}],water_source_types:((M=(L=e.household)==null?void 0:L.water_source_types)==null?void 0:M.map(t=>({water_source_type:t.water_source_type})))||[{water_source_type:""}],type_of_internet:((V=(G=(U=e.household)==null?void 0:U.internet_accessibility)==null?void 0:G.sort((t,ne)=>new Date(ne.created_at)-new Date(t.created_at))[0])==null?void 0:V.type_of_internet)||null,relationship_to_head:e.relationship_to_head||"",household_position:e.household_position||"",name_of_head:`${((X=e.resident)==null?void 0:X.firstname)||""} ${((Y=e.resident)==null?void 0:Y.lastname)||""}`.trim(),has_livestock:((A=(q=e.household)==null?void 0:q.livestocks)==null?void 0:A.length)>0?"1":"0",livestocks:((K=e.household)==null?void 0:K.livestocks)||[],has_pets:((J=(z=e.household)==null?void 0:z.pets)==null?void 0:J.length)>0?"1":"0",pets:((Q=e.household)==null?void 0:Q.pets)||[],household_id:(W=e.household)==null?void 0:W.id,_method:"PUT"})},[e]);const se=fe(h,d),oe=s=>{s.preventDefault(),re(route("household.update",o.household_id),{onError:i=>{console.error("Validation Errors:",i)}})},te=(s,i,a,l)=>{const n=[...o[l]||[]];n[i]={...n[i],[a]:s.target.value},d(l,n)},ie=h.map(s=>({label:`${s.firstname} ${s.middlename} ${s.lastname} ${s.suffix??""}`,value:s.id.toString()}));return r.jsxs(xe,{children:[r.jsx(me,{title:"Resident Dashboard"}),r.jsx(he,{breadcrumbs:ee}),r.jsx("div",{children:r.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6",children:r.jsx("div",{className:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 my-8",children:r.jsxs("div",{className:" my-2 p-5",children:[u&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),r.jsx("div",{children:r.jsxs("form",{onSubmit:oe,children:[r.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1",children:"Resident Information"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Search/Select the resident that owns the household."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-y-2 md:gap-x-4 mb-5",children:[r.jsxs("div",{className:"md:row-span-2 flex flex-col items-center space-y-2",children:[r.jsx(_e,{htmlFor:"resident_image",value:"Profile Photo"}),r.jsx("img",{src:o.resident_image?`/storage/${o.resident_image}`:"/images/default-avatar.jpg",alt:"Resident Image",className:"w-32 h-32 object-cover rounded-full border border-gray-200"})]}),r.jsxs("div",{className:"md:col-span-5 space-y-2",children:[r.jsxs("div",{className:"w-full",children:[r.jsx(ue,{label:"Full Name",name:"fullname",value:o.resident_name||"",placeholder:"Select a resident",onChange:s=>se(s),items:ie}),r.jsx(pe,{message:p.resident_id,className:"mt-2"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2",children:[r.jsx("div",{children:r.jsx(m,{label:"Birthdate",name:"birthdate",value:o.birthdate||"",placeholder:"Select a resident",readOnly:!0})}),r.jsx("div",{children:r.jsx(m,{label:"Gender",name:"gender",value:be[o.gender||""],placeholder:"Select a resident",readOnly:!0})}),r.jsx("div",{children:r.jsx(m,{label:"Residentcy Date",name:"residency_date",value:o.residency_date||"",placeholder:"Select a resident",readOnly:!0})}),r.jsx("div",{children:r.jsx(m,{label:"Residentcy Type",name:"residency_type",value:ge[o.residency_type||""],placeholder:"Select a resident",readOnly:!0})})]})]})]}),r.jsx(ye,{data:o,setData:d,handleArrayValues:te,errors:p,puroks:Z,streets:H,head:!0}),r.jsx("div",{className:"flex w-full justify-end items-center mt-7 gap-4",children:r.jsx(ce,{className:"w-40 bg-blue-700 hover:bg-blue-400",type:"submit",children:"Update"})})]})})]})})})})]})}export{mr as default};
