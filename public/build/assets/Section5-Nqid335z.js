import{r as S,j as e,a as B}from"./app-CDPwVV6Y.js";import{I as m}from"./InputField-D_ZI8EKx.js";import{I as n}from"./InputError-CsvCol3W.js";import{D as c}from"./DropdownInputField-BmM-TOT_.js";import{R as f}from"./RadioGroup-K1vYBuUY.js";import{S as d}from"./SelectField-DIeNwIQe.js";import{Y as G}from"./YearDropdown-Cu5CjLYl.js";import{I as h,a as p}from"./index-D4O4cOmu.js";import{u as O}from"./useAppUrl-BIsbUUVL.js";import{S as Y}from"./switch-Zowgx48p.js";const D=({data:t,setData:i,errors:o,handleArrayValues:x,puroks:C,households:b=[],streets:w,head:j=!1})=>{const H=O(),[y,P]=S.useState(!1),k=C.map(s=>({label:"Purok "+s,value:s.toString()})),A=w.map(s=>({label:s.street_name,value:s.id.toString()})),F=b==null?void 0:b.map(s=>({label:s.household.house_number.toString().padStart(4,"0")+" || "+s.lastname+"'s Residence",value:s.household.id.toString()})),L=()=>{i("livestocks",[...t.livestocks||[],{}])},R=s=>{const l=[...t.livestocks||[]];l.splice(s,1),i("livestocks",l)},E=()=>{i("pets",[...t.pets||[],{}])},I=s=>{const l=[...t.pets||[]];l.splice(s,1),i("pets",l)},$=s=>{const l=Number(s.target.value);if(!l)return;const a=b.find(u=>Number(u.household_id)===l&&u.is_household_head),r=a?[a.firstname,a.middlename,a.lastname,a.suffix].filter(Boolean).join(" "):"";i(u=>({...u,housenumber:String(l),name_of_head:r}))},T=s=>{const l=Number(s.target.value),a=w.find(r=>r.id==l);a&&(i("street_id",a.id),i("street_name",(a==null?void 0:a.street_name)||""),i("purok_id",a.purok.id),i("purok_number",a.purok.purok_number))},v=(s,l={})=>{const r=[...t[s]||[],l];i(u=>({...u,[s]:r}))},_=(s,l)=>{const a=[...t[s]||[]];a.splice(l,1),i(r=>({...r,[s]:a}))},g=(s,l,a)=>{const{name:r,value:u}=a.target,N=[...t[s]||[]];N[l]={...N[l],[r]:u},i(W=>({...W,[s]:N}))};return S.useEffect(()=>{if(!j)return;(async()=>{try{const l=await B.get(`${H}/household/latest-house-number`);if(l.data.success){const a=l.data.house_number;i(r=>({...r,housenumber:t.housenumber||a}))}else console.error("Failed to fetch latest house number")}catch(l){console.error("Error fetching house number:",l)}})()},[]),e.jsxs(e.Fragment,{children:[j===!1&&e.jsxs("section",{className:"my-8",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-2 mt-5",children:"House Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide the necessary house details. If you are the head of the household, some fields will be editable."}),e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(c,{type:"text",label:"House/Unit No./Lot/Blk No.",name:"housenumber",value:t.housenumber||"",onChange:s=>$(s),placeholder:"Select or enter house number",items:F}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose your assigned house or lot number."}),e.jsx(n,{message:o.housenumber,className:"mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(m,{type:"text",label:"Head of Household",name:"name_of_head",value:t.name_of_head||"",placeholder:"Head of Household",disabled:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This field displays the head of the household."}),e.jsx(n,{message:o.name_of_head,className:"mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(d,{label:"Relationship to Household Head",name:"relationship_to_head",value:t.relationship_to_head||"",onChange:s=>i("relationship_to_head",s.target.value),placeholder:"Select relationship",items:[{label:"Spouse",value:"spouse",subtitle:"Legally married partner of the head"},{label:"Child",value:"child",subtitle:"Son or daughter of the head"},{label:"Sibling",value:"sibling",subtitle:"Brother or sister of the head"},{label:"Parent",value:"parent",subtitle:"Father or mother of the head"},{label:"Parent-in-law",value:"parent_in_law",subtitle:"Parent of the head's spouse"},{label:"Sibling of Spouse",value:"sibling-of-spouse",subtitle:"Brother or sister of the spouse"},{label:"Spouse of (Sibling of Spouse)",value:"spouse-of-sibling-of-spouse",subtitle:"Spouse of your sibling-in-law"},{label:"Spouse of Sibling",value:"spouse-sibling",subtitle:"Spouse of your sibling"},{label:"Niece/Nephew",value:"niblings",subtitle:"Child of your sibling or sibling-in-law"},{label:"Grandparent",value:"grandparent",subtitle:"Grandfather or grandmother of the head"}]}),e.jsx(n,{message:o.relationship_to_head,className:"mt-1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select how this resident is related to the head of the household. This helps establish family connections and proper household records."})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(m,{type:"text",label:"Street Name",name:"street_name",value:t.street_name||"",placeholder:"e.g., Rizal St., Mabini Avenue",disabled:t.is_household_head!=1}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Provide the street where your house is located."}),e.jsx(n,{message:o.street_name,className:"mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(m,{type:"text",label:"Subdivision/Village/Compound",name:"subdivision",value:t.subdivision||"",onChange:s=>i("subdivision",s.target.value),placeholder:"e.g., Villa Gloria Subdivision",disabled:t.is_household_head!=1}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the subdivision or village name if applicable."}),e.jsx(n,{message:o.subdivision,className:"mt-1"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(d,{label:"Purok Number",name:"purok_number",value:t.purok_number||"",onChange:s=>i("purok_number",s.target.value),items:k,disabled:t.is_household_head!=1}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the assigned Purok number."}),e.jsx(n,{message:o.purok_number,className:"mt-1"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx(Y,{checked:y,onCheckedChange:P}),e.jsx("span",{className:"text-sm text-gray-700",children:y?"Hide New House Number":"Add New House Number (Not Found)"})]}),e.jsx("div",{className:`transition-all duration-300 overflow-hidden ${y?"max-h-96 opacity-100 mt-4":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg space-y-6",children:e.jsxs("div",{className:"flex flex-col mt-2",children:[e.jsx(m,{type:"text",label:"New House Number (Not Found in Records)",name:"new_housenumber",value:t.new_housenumber||"",onChange:s=>i("new_housenumber",s.target.value),placeholder:"Enter new house or lot number"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This household number is not yet in the database. You may add it."}),e.jsx(n,{message:o.new_housenumber,className:"mt-1"})]})})})]}),j!==!1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{type:"text",label:"House/Unit No./Lot/Blk No.",name:"housenumber",value:t.housenumber||"",onChange:s=>i("housenumber",s.target.value),placeholder:"Select or enter house number"}),e.jsx(n,{message:o.housenumber,className:"mt-2"})]}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx(c,{label:"Street Name",name:"street_id",type:"text",value:t.street_name,onChange:s=>T(s),placeholder:"e.g., Rizal St., Mabini Avenue",items:A}),e.jsx(n,{message:o.street_id,className:"mt-2"})]})}),e.jsxs("div",{children:[e.jsx(m,{type:"text",label:"Subdivision/Village/Compound",name:"subdivision",value:t.subdivision||"",onChange:s=>i("subdivision",s.target.value),placeholder:"e.g., Villa Gloria Subdivision"}),e.jsx(n,{message:o.subdivision,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{label:"Purok Number",name:"purok_number",value:t.purok_number||"",onChange:s=>i("purok_number",s.target.value),items:k}),e.jsx(n,{message:o.purok_number,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{label:"Ownership Type",name:"ownership_type",value:t.ownership_type||"",onChange:s=>{i("ownership_type",s.target.value)},placeholder:"Select or enter ownership type",items:["owned","rented","shared","goverment-provided","inherited"]}),e.jsx(n,{message:o.ownership_type,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{label:"Housing Condition",name:"housing_condition",value:t.housing_condition||"",onChange:s=>i("housing_condition",s.target.value),placeholder:"Select house condition",items:[{label:"Good",value:"good"},{label:"Needs Repair",value:"needs_repair"},{label:"Dilapidated",value:"dilapidated"}]}),e.jsx(n,{message:o.housing_condition,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{label:"House Structure",name:"house_structure",value:t.house_structure||"",onChange:s=>i("house_structure",s.target.value),placeholder:"Select or Enter house structure",items:[{label:"Concrete",value:"concrete"},{label:"Semi-Concrete",value:"semi_concrete"},{label:"Wood",value:"wood"},{label:"Makeshift",value:"makeshift"}]}),e.jsx(n,{message:o.house_structure,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(G,{label:"Year Establish",name:"year_established",value:t.year_established||"",onChange:s=>i("year_established",s.target.value),placeholder:"Select year"}),e.jsx(n,{message:o.year_established,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{type:"number",label:"Number of Rooms",name:"number_of_rooms",value:t.number_of_rooms||"",onChange:s=>i("number_of_rooms",s.target.value),placeholder:"Enter number of rooms"}),e.jsx(n,{message:o.number_of_rooms,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{type:"number",label:"Number of Floors",name:"number_of_floors",value:t.number_of_floors||"",onChange:s=>i("number_of_floors",s.target.value),placeholder:"Enter number of floors"}),e.jsx(n,{message:o.number_of_floors,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{label:"Bath and Wash Area",name:"bath_and_wash_area",value:t.bath_and_wash_area||"",onChange:s=>i("bath_and_wash_area",s.target.value),placeholder:"Select or Enter",items:[{label:"with own sink and bath",value:"with_own_sink_and_bath"},{label:"with own sink only",value:"with_own_sink_only"},{label:"with own bath only",value:"with_own_bath_only"},{label:"shared or communal",value:"shared_or_communal"},{label:"none",value:"none"}]}),e.jsx(n,{message:o.bath_and_wash_area,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{label:"Internet Connection Type",name:"type_of_internet",value:t.type_of_internet||"",onChange:s=>i("type_of_internet",s.target.value),placeholder:"Select internet connection type",items:[{label:"Mobile Data",value:"mobile_data"},{label:"Wireless Fidelity (Wi-Fi)",value:"wireless_fidelity"},{label:"None",value:"none"}]}),e.jsx(n,{message:o.type_of_internet,className:"mt-2"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-0 mt-4",children:"Type of Toilet(s)"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[(t.toilets||[]).map((s,l)=>e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{children:[e.jsx(c,{name:"toilet_type",value:s.toilet_type||"",onChange:a=>g("toilets",l,a),placeholder:"Select toilet type",items:[{label:"Water sealed",value:"water_sealed"},{label:"Compost pit toilet",value:"compost_pit_toilet"},{label:"Shared communal public toilet",value:"shared_communal_public_toilet"},{label:"Shared or communal",value:"shared_or_communal"},{label:"No latrine",value:"no_latrine"}]}),e.jsx(n,{message:o==null?void 0:o[`toilets.${l}.toilet_type`],className:"mt-1"})]}),t.toilets.length>1&&e.jsx("button",{type:"button",onClick:()=>_("toilets",l),className:"text-red-500 hover:text-red-700 text-xl",children:e.jsx(h,{})})]},l)),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>v("toilets",{toilet_type:""}),className:"text-blue-600 hover:text-blue-800 text-3xl",children:e.jsx(p,{})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Add type of toilet"})]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-0 mt-4",children:"Electricity Source(s)"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[(t.electricity_types||[]).map((s,l)=>e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{children:[e.jsx(c,{name:"electricity_type",value:s.electricity_type||"",onChange:a=>g("electricity_types",l,a),placeholder:"Select electricity source",items:[{label:"ISELCO II",value:"distribution_company_iselco_ii"},{label:"Generator",value:"generator"},{label:"Solar / Renewable",value:"solar_renewable_energy_source"},{label:"Battery",value:"battery"},{label:"None",value:"none"}]}),e.jsx(n,{message:o==null?void 0:o[`electricity_types.${l}.electricity_type`],className:"mt-1"})]}),t.electricity_types.length>1&&e.jsx("button",{type:"button",onClick:()=>_("electricity_types",l),className:"text-red-500 hover:text-red-700 text-xl",children:e.jsx(h,{})})]},l)),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>v("electricity_types",{electricity_type:""}),className:"text-blue-600 hover:text-blue-800 text-3xl",children:e.jsx(p,{})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Add electricity source"})]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-0 mt-4",children:"Water Source(s)"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[(t.water_source_types||[]).map((s,l)=>e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{children:[e.jsx(c,{name:"water_source_type",value:s.water_source_type||"",onChange:a=>g("water_source_types",l,a),placeholder:"Select water source",items:[{label:"Level II",value:"level_ii_water_system"},{label:"Level III",value:"level_iii_water_system"},{label:"Deep Well",value:"deep_well_level_i"},{label:"Artesian Well",value:"artesian_well_level_i"},{label:"Shallow Well",value:"shallow_well_level_i"},{label:"Refill Source",value:"commercial_water_refill_source"},{label:"None",value:"none"}]}),e.jsx(n,{message:o==null?void 0:o[`water_source_types.${l}.water_source_type`],className:"mt-1"})]}),t.water_source_types.length>1&&e.jsx("button",{type:"button",onClick:()=>_("water_source_types",l),className:"text-red-500 hover:text-red-700 text-xl",children:e.jsx(h,{})})]},l)),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>v("water_source_types",{water_source_type:""}),className:"text-blue-600 hover:text-blue-800 text-3xl",children:e.jsx(p,{})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Add water source"})]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-0 mt-4",children:"Waste Disposal Method(s)"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[(t.waste_management_types||[]).map((s,l)=>e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{children:[e.jsx(c,{name:"waste_management_type",value:s.waste_management_type||"",onChange:a=>g("waste_management_types",l,a),placeholder:"Select waste disposal method",items:[{label:"Open Dump",value:"open_dump_site"},{label:"Sanitary Landfill",value:"sanitary_landfill"},{label:"Compost Pits",value:"compost_pits"},{label:"Material Recovery",value:"material_recovery_facility"},{label:"Garbage Collected",value:"garbage_is_collected"},{label:"None",value:"none"}]}),e.jsx(n,{message:o==null?void 0:o[`waste_management_types.${l}.waste_management_type`],className:"mt-1"})]}),t.waste_management_types.length>1&&e.jsx("button",{type:"button",onClick:()=>_("waste_management_types",l),className:"text-red-500 hover:text-red-700 text-xl",children:e.jsx(h,{})})]},l)),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>v("waste_management_types",{waste_management_type:""}),className:"text-blue-600 hover:text-blue-800 text-3xl",children:e.jsx(p,{})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Add waste disposal method"})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Livestock Ownership Details"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(f,{label:"Do you have a livestock?",name:"has_livestock",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:t.has_livestock||"",onChange:s=>i("has_livestock",s.target.value)})}),e.jsx("div",{children:t.has_livestock==1?e.jsxs(e.Fragment,{children:[t.livestocks.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No livestock added yet."}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:t.livestocks.map((s,l)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(c,{label:"Livestock animal",name:"livestock_type",value:s.livestock_type||"",onChange:a=>x(a,l,"livestock_type","livestocks"),placeholder:"Select or enter type of animal",items:["cattle","carabao","goat","pig","chicken","duck","sheep","horse"]}),e.jsx(n,{message:o[`livestocks.${l}.livestock_type`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{label:"Quantity",name:"quantity",value:s.quantity||"",onChange:a=>x(a,l,"quantity","livestocks"),placeholder:"Enter quantity",type:"number"}),e.jsx(n,{message:o[`livestocks.${l}.quantity`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{label:"Purpose",name:"purpose",value:s.purpose||"",onChange:a=>x(a,l,"purpose","livestocks"),placeholder:"Select purpose",items:[{label:"Personal Consumption",value:"personal_consumption"},{label:"Commercial",value:"commercial"},{label:"Both",value:"both"}]}),e.jsx(n,{message:o[`livestocks.${l}.purpose`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>R(l),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove livestock",children:e.jsx(h,{className:"text-2xl"})})]},l))}),e.jsxs("button",{type:"button",onClick:L,className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add livestock",children:[e.jsx(p,{className:"text-2xl"}),"Add Livestock"]})]}):t.has_livestock==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No livestock declared."}):null})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-md mt-3 text-gray-800",children:"Pet Ownership Details"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(f,{label:"Do you have a Pets?",name:"has_pets",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:t.has_pets||"",onChange:s=>i("has_pets",s.target.value)})}),e.jsx("div",{children:t.has_pets==1?e.jsxs(e.Fragment,{children:[t.pets.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No pet added yet."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.pets.map((s,l)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(c,{label:"Type of Pet",name:"pet_type",value:s.pet_type||"",onChange:a=>x(a,l,"pet_type","pets"),placeholder:"Select or enter type of pet",items:["dog","cat","rabbit"]}),e.jsx(n,{message:o[`pets.${l}.pet_type`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(f,{label:"Is the pet vaccinated for rabies?",name:"is_vaccinated",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:s.is_vaccinated||"",onChange:a=>x(a,l,"is_vaccinated","pets")}),e.jsx(n,{message:o[`pets.${l}.is_vaccinated`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>I(l),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove pet",children:e.jsx(h,{className:"text-2xl"})})]},l)),e.jsxs("button",{type:"button",onClick:E,className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add pet",children:[e.jsx(p,{className:"text-2xl"}),"Add Pet"]})]})]}):t.has_pets==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No pet declared."}):null})]})]})]})]})]})};export{D as S};
