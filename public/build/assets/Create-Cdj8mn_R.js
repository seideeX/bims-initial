import{K as D,m as E,r as N,j as e,L as $}from"./app-CDPwVV6Y.js";import{S as V}from"./AdminLayout-BW3ywimG.js";import{B as y}from"./button-B_aprJyo.js";import"./input-DTbtaxsV.js";import F from"./BreadcrumbsHeader-BOSIhs5m.js";import{t as C,T as O}from"./index-CH7DWExs.js";import{R as T}from"./constants-DHCt9dPc.js";import{u as B}from"./useAppUrl-BIsbUUVL.js";import{u as L}from"./handleResidentChange-yybasKmi.js";import{I as Y}from"./InputLabel-C3y8TkvV.js";import{D as u}from"./DropdownInputField-BmM-TOT_.js";import{I as d}from"./InputError-CsvCol3W.js";import{I as m}from"./InputField-D_ZI8EKx.js";import{S as I}from"./Section4-BtQ1VJZU.js";import{I as b,a as j}from"./index-D4O4cOmu.js";import{R as v}from"./RadioGroup-K1vYBuUY.js";import{S as P}from"./SelectField-DIeNwIQe.js";import{T as q}from"./textarea-CVDV7Abf.js";import{R as G}from"./rotate-ccw-D-jj88si.js";import"./sidebar-BqlEtGlg.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./index-8Tef56KC.js";import"./index-Dsz93ONd.js";import"./floating-ui.react-dom-VvtSZ_DO.js";import"./x-rg4AgZHH.js";import"./createLucideIcon-B4SoG9zf.js";import"./tooltip-10O7WS77.js";import"./nav-user-BTW7oy-u.js";import"./avatar-p9YAZDXV.js";import"./dropdown-menu-DFrz86N0.js";import"./check-BsJSkZwI.js";import"./chevron-right-DYtVQaAj.js";import"./DeleteConfirmationModal-DcMwm5QA.js";import"./file-text-DhLfxzDZ.js";import"./users-round-BK2vts8v.js";import"./heart-pulse-BRIexC2Z.js";import"./chevron-up-BBBA9wsx.js";import"./breadcrumb-DsnADmME.js";import"./iconBase-DNpEM3Pe.js";function Ee({puroks:H,residents:f}){const w=[{label:"Residents Information",showOnMobile:!1},{label:"Medical Information",href:route("medical.index"),showOnMobile:!1},{label:"Add Medical Information",showOnMobile:!0}];B();const c=D().props,_=(c==null?void 0:c.success)??null,x=(c==null?void 0:c.error)??null,{data:s,setData:l,post:k,errors:n,reset:R}=E({resident_id:null,resident_name:"",resident_image:null,birthdate:null,civil_status:"",purok_number:null,weight_kg:"",height_cm:"",bmi:"",nutrition_status:"",blood_type:"",emergency_contact_number:"",emergency_contact_name:"",emergency_contact_relationship:"",is_smoker:!1,is_alcohol_user:!1,has_philhealth:!1,philhealth_id_number:"",pwd_id_number:"",is_pwd:"",disabilities:[],has_allergies:"",allergies:[],has_medication:"",medications:[],has_medical_condition:"",medical_conditions:[],has_vaccination:"",vaccinations:[]}),S=L(f,l),M=t=>{t.preventDefault(),k(route("medical.store"),{onError:a=>{console.error("Validation Errors:",a)}})},o=(t,a,i,r)=>{const h=[...s[r]||[]];h[a]={...h[a],[i]:t.target.value},l(r,h)},A=f.map(t=>({label:`${t.firstname} ${t.middlename} ${t.lastname} ${t.suffix??""}`,value:t.id.toString()}));N.useEffect(()=>{if(s.weight_kg>0&&s.height_cm>0){const t=s.height_cm/100,a=s.weight_kg/(t*t),i=a.toFixed(2);let r="";a<16?r="severly_underweight":a>=16&&a<18.5?r="underweight":a>=18.5&&a<25?r="normal":a>=25&&a<30?r="overweight":r="obese",l("bmi",i),l("nutrition_status",r)}else l("bmi",0),l("nutrition_status","")},[s.weight_kg,s.height_cm]);const g=(t,a={})=>{l(i=>({...i,[t]:[...i[t]||[],a]}))},p=(t,a)=>{l(i=>({...i,[t]:i[t].filter((r,h)=>h!==a)}))};return N.useEffect(()=>{_&&(handleModalClose(),C.success(_,{description:"Operation successful!",duration:3e3,closeButton:!0})),c.success=null},[_]),N.useEffect(()=>{x&&C.error(x,{description:"Operation failed!",duration:1e4,closeButton:!0}),c.error=null},[x]),e.jsxs(V,{children:[e.jsx($,{title:"Medical Information"}),e.jsxs("div",{children:[e.jsx(O,{richColors:!0}),e.jsx(F,{breadcrumbs:w}),e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 my-8",children:e.jsxs("div",{className:" my-2 p-5",children:[x&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:x}),e.jsx("div",{children:e.jsxs("form",{onSubmit:M,children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1",children:"Resident Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Search/Select the resident to add the medical information."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-y-2 md:gap-x-4 mb-5",children:[e.jsxs("div",{className:"md:row-span-2 flex flex-col items-center space-y-2",children:[e.jsx(Y,{htmlFor:"resident_image",value:"Profile Photo"}),e.jsx("img",{src:s.resident_image?`/storage/${s.resident_image}`:"/images/default-avatar.jpg",alt:"Resident Image",className:"w-32 h-32 object-cover rounded-full border border-gray-200"})]}),e.jsxs("div",{className:"md:col-span-5 space-y-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(u,{label:"Full Name",name:"fullname",value:s.resident_name||"",placeholder:"Select a resident",onChange:t=>S(t),items:A}),e.jsx(d,{message:n.resident_id,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsx("div",{children:e.jsx(m,{label:"Birthdate",name:"birthdate",value:s.birthdate||"",placeholder:"Select a resident",readOnly:!0})}),e.jsx("div",{children:e.jsx(m,{label:"Sex",name:"sex",value:T[s.sex||""],placeholder:"Select a resident",readOnly:!0})}),e.jsx("div",{children:e.jsx(m,{label:"Purok",name:"purok_number",value:s.purok_number||"",readOnly:!0})})]})]})]}),e.jsx(I,{data:s,setData:l,errors:n}),e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1 mt-8",children:"Related Medical Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Form below are options depending on the residents medical information."}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Allergies"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mx-4",children:[e.jsx("div",{children:e.jsx(v,{label:"Do you any allergies?",name:"has_medication",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:s.has_allergies||null,onChange:t=>l("has_allergies",t.target.value)})}),e.jsx("div",{children:s.has_allergies==1?e.jsxs(e.Fragment,{children:[s.allergies.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No allergy added yet."}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:s.allergies.map((t,a)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(u,{label:"Name of Allergy",name:"allergy",value:t.allergy||"",onChange:i=>o(i,a,"allergy","allergies"),placeholder:"Select or enter allergy"}),e.jsx(d,{message:n[`allergies.${a}.allergy`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-3 mt-4 ",children:"Allergy Reaction Description"}),e.jsx(q,{name:"reaction_description",className:"bg-white border border-gray-400",value:t.reaction_description||"",onChange:i=>o(i,a,"reaction_description","allergies"),placeholder:"Enter description"}),e.jsx(d,{message:n[`allergies.${a}.reaction_description`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>p("allergies",a),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove Allergy",children:e.jsx(b,{className:"text-2xl"})})]},a))}),e.jsxs("button",{type:"button",onClick:()=>g("allergies"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add Medication",children:[e.jsx(j,{className:"text-2xl"}),"Add Allergy"]})]}):s.has_medication==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No allergies declared."}):null})]})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Resident Medication"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mx-4",children:[e.jsx("div",{children:e.jsx(v,{label:"Do you any medications?",name:"has_medication",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:s.has_medication||null,onChange:t=>l("has_medication",t.target.value)})}),e.jsx("div",{children:s.has_medication==1?e.jsxs(e.Fragment,{children:[s.medications.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No medication added yet."}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:s.medications.map((t,a)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(u,{label:"Medication Type",name:"medication",value:t.medication||"",onChange:i=>o(i,a,"medication","medications"),placeholder:"Select or enter medication"}),e.jsx(d,{message:n[`medications.${a}.medication`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{label:"Date Started",name:"start_date",type:"date",value:t.start_date||"",onChange:i=>o(i,a,"start_date","medications"),placeholder:"Enter quantity"}),e.jsx(d,{message:n[`medications.${a}.start_date`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{label:"Date Ended",name:"end_date",type:"date",value:t.end_date||"",onChange:i=>o(i,a,"end_date","medications"),placeholder:"Enter quantity"}),e.jsx(d,{message:n[`medications.${a}.end_date`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>p("medications",a),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove Medicaton",children:e.jsx(b,{className:"text-2xl"})})]},a))}),e.jsxs("button",{type:"button",onClick:()=>g("medications"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add Medication",children:[e.jsx(j,{className:"text-2xl"}),"Add Medicaiton"]})]}):s.has_medication==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No medication declared."}):null})]})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Resident Medical Condition"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mx-4",children:[e.jsx("div",{children:e.jsx(v,{label:"Do you any Medical Conditions?",name:"has_medical_condition",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:s.has_medical_condition||null,onChange:t=>l("has_medical_condition",t.target.value)})}),e.jsx("div",{children:s.has_medical_condition==1?e.jsxs(e.Fragment,{children:[s.medical_conditions.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No medical condition added yet."}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:s.medical_conditions.map((t,a)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(u,{label:"Medical Condition",name:"condition",value:t.condition||"",onChange:i=>o(i,a,"condition","medical_conditions"),placeholder:"Select or enter condition"}),e.jsx(d,{message:n[`medical_conditions.${a}.condition`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(P,{label:"Condition Status",name:"status",value:t.status||"",onChange:i=>o(i,a,"status","medical_conditions"),items:[{label:"Active",value:"active"},{label:"Resolved",value:"resolved"},{label:"Chronic",value:"chronic"}]}),e.jsx(d,{message:n[`medical_conditions.${a}.status`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{label:"Diagnosed Date",name:"diagnosed_date",type:"date",value:t.diagnosed_date||"",onChange:i=>o(i,a,"diagnosed_date","medical_conditions")}),e.jsx(d,{message:n[`medical_conditions.${a}.diagnosed_date`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{label:"Resolved Date",name:"resolved_date",type:"date",value:t.resolved_date||"",onChange:i=>o(i,a,"resolved_date","medical_conditions")}),e.jsx(d,{message:n[`medical_conditions.${a}.resolved_date`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>p("medical_conditions",a),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove Medicaton",children:e.jsx(b,{className:"text-2xl"})})]},a))}),e.jsxs("button",{type:"button",onClick:()=>g("medical_conditions"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add Medical Condition",children:[e.jsx(j,{className:"text-2xl"}),"Add Medical Condition"]})]}):s.has_medical_condition==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No medical condition declared."}):null})]})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Vaccinations"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mx-4",children:[e.jsx("div",{children:e.jsx(v,{label:"Do you any Vaccinations?",name:"has_vaccination",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:s.has_vaccination||null,onChange:t=>l("has_vaccination",t.target.value)})}),e.jsx("div",{children:s.has_vaccination==1?e.jsxs(e.Fragment,{children:[s.vaccinations.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No vaccinations added yet."}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:s.vaccinations.map((t,a)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(u,{label:"Vaccine",name:"vaccine",value:t.vaccine||"",onChange:i=>o(i,a,"vaccine","vaccinations"),placeholder:"Select or enter vaccine"}),e.jsx(d,{message:n[`vaccinations.${a}.vaccine`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{label:"Vaccination Date",name:"vaccination_date",type:"date",value:t.vaccination_date||"",onChange:i=>o(i,a,"vaccination_date","vaccinations")}),e.jsx(d,{message:n[`vaccinations.${a}.vaccination_date`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>p("vaccinations",a),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove Vaccination",children:e.jsx(b,{className:"text-2xl"})})]},a))}),e.jsxs("button",{type:"button",onClick:()=>g("vaccinations"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add Vaccination",children:[e.jsx(j,{className:"text-2xl"}),"Add Vaccination"]})]}):s.has_medical_condition==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No vaccination declared."}):null})]})]})]}),e.jsxs("div",{className:"flex w-full justify-end items-center mt-7 gap-4",children:[e.jsxs(y,{type:"button",onClick:()=>R(),children:[e.jsx(G,{})," Reset"]}),e.jsx(y,{className:"w-40 bg-blue-700 hover:bg-blue-400",type:"submit",children:"Submit"})]})]})})]})})})]})]})}export{Ee as default};
