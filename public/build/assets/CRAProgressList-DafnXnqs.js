import{r as a,j as e,a as y}from"./app-CDPwVV6Y.js";import{u as p}from"./useAppUrl-BIsbUUVL.js";import{c as x}from"./createLucideIcon-B4SoG9zf.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],j=x("circle-alert",b);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],w=x("circle-check",N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],C=x("loader-circle",v);function R({selectedBarangayId:o}){const[l,n]=a.useState([]),[c,g]=a.useState(null),[m,h]=a.useState(!0),i=a.useRef(null),u=a.useRef({}),f=p();return a.useEffect(()=>{(async()=>{try{const r=await y.get(`${f}/craProgress`,{params:{year:c||void 0}});if(r.data.success){const{data:t}=r.data;g(t.year||null),n(t.barangays||[])}else n([])}catch(r){console.error("Failed to fetch CRA progress:",r),n([])}finally{h(!1)}})()},[f,c]),a.useEffect(()=>{if(!o||!i.current)return;const s=u.current[o];if(!s)return;const r=i.current,t=s.offsetTop-r.offsetTop-r.clientHeight/2+s.clientHeight/2;r.scrollTo({top:t,behavior:"smooth"}),s.classList.add("bg-blue-100","font-semibold");const d=setTimeout(()=>{s.classList.remove("bg-blue-100","font-semibold")},1500);return()=>clearTimeout(d)},[o]),m?e.jsxs("div",{className:"w-full p-4 bg-white rounded-xl border border-gray-200 shadow-sm flex flex-col items-center justify-center h-[200px]",children:[e.jsx(C,{className:"w-6 h-6 text-blue-500 animate-spin mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading CRA progress..."})]}):!l||l.length===0?e.jsx("div",{className:"w-full p-4 bg-white rounded-xl border border-gray-200 shadow-sm text-center text-gray-500 text-sm",children:"No CRA progress data found for the selected year."}):m?e.jsx("div",{className:"p-4 bg-white rounded-xl border border-gray-200 shadow-sm flex flex-col items-center justify-center h-[200px]",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading CRA progress..."})}):e.jsxs("div",{className:"w-full p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-700",children:"CRA Progress by Barangay"}),c&&e.jsxs("span",{className:"text-xs text-gray-500 font-medium bg-gray-100 px-2 py-1 rounded-md",children:["Year: ",c]})]}),e.jsx("div",{ref:i,className:"max-h-[370px] overflow-y-auto pr-1",children:e.jsx("ul",{className:"text-sm text-gray-700 divide-y divide-gray-100",children:l.map((s,r)=>{const t=s.cra_progress??0;return e.jsxs("li",{ref:d=>u.current[s.id]=d,className:`py-2 px-2 rounded-md transition-colors duration-200 ${o===s.id?"bg-blue-50 font-semibold":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:"truncate text-gray-800 font-medium",children:[r+1,". ",s.barangay_name]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[t>=100?e.jsx(w,{className:"w-4 h-4 text-green-500"}):e.jsx(j,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{children:[t,"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 h-3 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${t>=100?"bg-green-500":t>=70?"bg-blue-500":t>=40?"bg-yellow-400":"bg-red-400"}`,style:{width:`${t}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-right italic",children:t>=100?"Completed":t>0?"In Progress":"Not Started"})]},s.id)})})}),e.jsxs("p",{className:"text-sm font-semibold pt-2",children:[e.jsx("span",{className:"text-green-600",children:l.filter(s=>s.cra_progress>0).length}),"/",e.jsx("span",{className:"text-gray-600",children:l.length})," barangays have submitted their CRA"]})]})}const k=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"}));export{R as C,j as a,k as b};
