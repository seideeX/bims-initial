import{c as le,j as a,$ as ae,r as oe,K as ce,R as de}from"./app-CDPwVV6Y.js";import{c as ue}from"./createLucideIcon-B4SoG9zf.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m15 11-6 6",key:"1toa9n"}],["path",{d:"m9 11 6 6",key:"wlibny"}]],he=ue("clipboard-x",pe);var te={exports:{}},me=te.exports,se;function fe(){return se||(se=1,function(p,M){(function(N,E){p.exports=E(le())})(typeof self<"u"?self:me,function(N){return function(){var E={155:function(e){e.exports=N}},P={};function x(e){var t=P[e];if(t!==void 0)return t.exports;var o=P[e]={exports:{}};return E[e](o,o.exports,x),o.exports}x.d=function(e,t){for(var o in t)x.o(t,o)&&!x.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},x.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},x.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var C={};x.r(C),x.d(C,{useReactToPrint:function(){return U}});var Q=x(155);function f({level:e="error",messages:t,suppressErrors:o=!1}){o||(e==="error"?console.error(t):e==="warning"?console.warn(t):console.debug(t))}function V(e,t){if(t||!e){const o=document.getElementById("printWindow");o&&document.body.removeChild(o)}}function G(e){return e instanceof Error?e:new Error("Unknown Error")}function B(e,t){const{documentTitle:o,onAfterPrint:i,onPrintError:g,preserveAfterPrint:l,print:d,suppressErrors:h}=t;setTimeout(()=>{var y,b;if(e.contentWindow){let T=function(){i==null||i(),V(l)};if(e.contentWindow.focus(),d)d(e).then(T).catch(v=>{g?g("print",G(v)):f({messages:["An error was thrown by the specified `print` function"],suppressErrors:h})});else{if(e.contentWindow.print){const v=(b=(y=e.contentDocument)===null||y===void 0?void 0:y.title)!==null&&b!==void 0?b:"",S=e.ownerDocument.title;o&&(e.ownerDocument.title=o,e.contentDocument&&(e.contentDocument.title=o)),e.contentWindow.print(),o&&(e.ownerDocument.title=S,e.contentDocument&&(e.contentDocument.title=v))}else f({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:h});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(v=>{var S,R;return((R=(S=navigator.userAgent)!==null&&S!==void 0?S:navigator.vendor)!==null&&R!==void 0?R:"opera"in window&&window.opera).match(v)})?setTimeout(T,500):T()}}else f({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:h})},500)}function z(e){const t=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let i=o.nextNode();for(;i;)t.push(i),i=o.nextNode();return t}function ne(e,t,o){const i=z(e),g=z(t);if(i.length===g.length)for(let l=0;l<i.length;l++){const d=i[l],h=g[l],y=d.shadowRoot;if(y!==null){const b=h.attachShadow({mode:y.mode});b.innerHTML=y.innerHTML,ne(y,b,o)}}else f({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:o})}const X=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function re(e,t,o,i){var g,l,d,h,y;const{contentNode:b,clonedContentNode:T,clonedImgNodes:v,clonedVideoNodes:S,numResourcesToLoad:R,originalCanvasNodes:D}=o,{bodyClass:K,fonts:L,ignoreGlobalStyles:J,pageStyle:Y,nonce:W,suppressErrors:c,copyShadowRoots:I}=i;e.onload=null;const u=(g=e.contentDocument)!==null&&g!==void 0?g:(l=e.contentWindow)===null||l===void 0?void 0:l.document;if(u){const $=u.body.appendChild(T);I&&ne(b,$,!!c),L&&(!((d=e.contentDocument)===null||d===void 0)&&d.fonts&&(!((h=e.contentWindow)===null||h===void 0)&&h.FontFace)?L.forEach(r=>{const n=new FontFace(r.family,r.source,{weight:r.weight,style:r.style});e.contentDocument.fonts.add(n),n.loaded.then(()=>{t(n)}).catch(w=>{t(n,["Failed loading the font:",n,"Load error:",G(w)])})}):(L.forEach(r=>{t(r)}),f({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:c})));const _=Y??X,H=u.createElement("style");W&&(H.setAttribute("nonce",W),u.head.setAttribute("nonce",W)),H.appendChild(u.createTextNode(_)),u.head.appendChild(H),K&&u.body.classList.add(...K.split(" "));const j=u.querySelectorAll("canvas");for(let r=0;r<D.length;++r){const n=D[r],w=j[r];if(w===void 0){f({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",n],suppressErrors:c});continue}const s=w.getContext("2d");s&&s.drawImage(n,0,0)}for(let r=0;r<v.length;r++){const n=v[r],w=n.getAttribute("src");if(w){const s=new Image;s.onload=()=>{t(n)},s.onerror=(m,k,q,A,O)=>{t(n,["Error loading <img>",n,"Error",O])},s.src=w}else t(n,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',n])}for(let r=0;r<S.length;r++){const n=S[r];n.preload="auto";const w=n.getAttribute("poster");if(w){const s=new Image;s.onload=()=>{t(n)},s.onerror=(m,k,q,A,O)=>{t(n,["Error loading video poster",w,"for video",n,"Error:",O])},s.src=w}else n.readyState>=2?t(n):n.src?(n.onloadeddata=()=>{t(n)},n.onerror=(s,m,k,q,A)=>{t(n,["Error loading video",n,"Error",A])},n.onstalled=()=>{t(n,["Loading video stalled, skipping",n])}):t(n,["Error loading video, `src` is empty",n])}const F="select",Z=b.querySelectorAll(F),ee=u.querySelectorAll(F);for(let r=0;r<Z.length;r++)ee[r].value=Z[r].value;if(!J){const r=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let n=0,w=r.length;n<w;++n){const s=r[n];if(s.tagName.toLowerCase()==="style"){const m=u.createElement(s.tagName),k=s.sheet;if(k){let q="";try{const A=k.cssRules.length;for(let O=0;O<A;++O)typeof k.cssRules[O].cssText=="string"&&(q+=`${k.cssRules[O].cssText}\r
`)}catch(A){f({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",s,`Original error: ${G(A).message}`],level:"warning"})}m.setAttribute("id",`react-to-print-${n}`),W&&m.setAttribute("nonce",W),m.appendChild(u.createTextNode(q)),u.head.appendChild(m)}}else if(s.getAttribute("href"))if(s.hasAttribute("disabled"))f({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",s],level:"warning"}),t(s);else{const m=u.createElement(s.tagName);for(let k=0,q=s.attributes.length;k<q;++k){const A=s.attributes[k];A&&m.setAttribute(A.nodeName,(y=A.nodeValue)!==null&&y!==void 0?y:"")}m.onload=()=>{t(m)},m.onerror=(k,q,A,O,ie)=>{t(m,["Failed to load",m,"Error:",ie])},W&&m.setAttribute("nonce",W),u.head.appendChild(m)}else f({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",s],level:"warning"}),t(s)}}}R===0&&B(e,i)}function U({bodyClass:e,contentRef:t,copyShadowRoots:o,documentTitle:i,fonts:g,ignoreGlobalStyles:l,nonce:d,onAfterPrint:h,onBeforePrint:y,onPrintError:b,pageStyle:T,preserveAfterPrint:v,print:S,suppressErrors:R}){return(0,Q.useCallback)(D=>{function K(){const L={bodyClass:e,contentRef:t,copyShadowRoots:o,documentTitle:i,fonts:g,ignoreGlobalStyles:l,nonce:d,onAfterPrint:h,onPrintError:b,pageStyle:T,preserveAfterPrint:v,print:S,suppressErrors:R},J=function(){const c=document.createElement("iframe");return c.width=`${document.documentElement.clientWidth}px`,c.height=`${document.documentElement.clientHeight}px`,c.style.position="absolute",c.style.top=`-${document.documentElement.clientHeight+100}px`,c.style.left=`-${document.documentElement.clientWidth+100}px`,c.id="printWindow",c.srcdoc="<!DOCTYPE html>",c}(),Y=function(c,I){const{contentRef:u,fonts:$,ignoreGlobalStyles:_,suppressErrors:H}=I,j=function({contentRef:w,optionalContent:s,suppressErrors:m}){return!s||s instanceof Event||(w&&f({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),typeof s!="function")?w?w.current:void f({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:m}):s()}({contentRef:u,optionalContent:c,suppressErrors:H});if(!j)return;const F=j.cloneNode(!0),Z=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ee=F.querySelectorAll("img"),r=F.querySelectorAll("video"),n=$?$.length:0;return{contentNode:j,clonedContentNode:F,clonedImgNodes:ee,clonedVideoNodes:r,numResourcesToLoad:(_?0:Z.length)+ee.length+r.length+n,originalCanvasNodes:j.querySelectorAll("canvas")}}(D,L);if(!Y)return void f({messages:["There is nothing to print"],suppressErrors:R});const W=function(c,I,u){const{suppressErrors:$}=c,_=[],H=[];return function(j,F){_.includes(j)?f({level:"debug",messages:["Tried to mark a resource that has already been handled",j],suppressErrors:$}):(F?(f({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...F],suppressErrors:$}),H.push(j)):_.push(j),_.length+H.length===I&&B(u,c))}}(L,Y.numResourcesToLoad,J);(function(c,I,u,$){c.onload=()=>{re(c,I,u,$)},document.body.appendChild(c)})(J,W,Y,L)}V(v,!0),y?y().then(()=>{K()}).catch(L=>{b==null||b("onBeforePrint",G(L))}):K()},[e,t,o,i,g,l,d,h,y,b,T,v,S,R])}return C}()})}(te)),te.exports}var ge=fe();function ye({links:p,queryParams:M}){if(M=M||{},!Array.isArray(p))return null;const N=E=>{if(!E.url)return null;const P=new URL(E.url,window.location.origin);for(const[x,C]of Object.entries(M))x!=="page"&&P.searchParams.set(x,C);return P.pathname+P.search};return a.jsx("nav",{className:"text-center mt-4 space-x-1",children:p.map((E,P)=>{const x=N(E);return a.jsx(ae,{href:x||"#",className:"inline-block py-2 px-3 rounded-lg text-gray-700 text-xs "+(E.active?"bg-blue-400 text-white ":"")+(E.url?"hover:bg-blue-300 ":" !text-gray-400 cursor-not-allowed "),dangerouslySetInnerHTML:{__html:E.label}},P)})})}const xe=({passedData:p,allColumns:M,columnRenderers:N,children:E,queryParams:P=null,showTotal:x=!1,visibleColumns:C=[],tableHeight:Q=null})=>{var t,o;const f=oe.useRef();ge.useReactToPrint({content:()=>f.current});const{props:V}=ce(),G=(o=(t=V==null?void 0:V.auth)==null?void 0:t.user)==null?void 0:o.role,B=Array.isArray(p==null?void 0:p.data)?p.data:p||[],[z,ne]=oe.useState(null),[X,re]=oe.useState("asc"),U=C??M.map(i=>i.key),e=[...B].sort((i,g)=>{if(!z)return 0;const l=i[z]??"",d=g[z]??"";return typeof l=="number"&&typeof d=="number"?X==="asc"?l-d:d-l:X==="asc"?String(l).localeCompare(String(d)):String(d).localeCompare(String(l))});return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-2",children:E}),a.jsxs("div",{className:"w-full overflow-x-auto border rounded-lg",children:[a.jsx("div",{className:`overflow-y-auto ${Q?`max-h-[${Q}]`:"max-h-[800px]"}`,children:a.jsxs("table",{ref:f,className:"table-auto w-full min-w-max",children:[a.jsx("thead",{className:"sticky top-0 z-5 bg-white shadow-md",children:a.jsx("tr",{children:M.map(i=>U.includes(i.key)&&a.jsx("th",{className:"bg-gray-100 text-gray-800 p-3 whitespace-nowrap text-wrap text-start text-sm font-semibold min-w-[60px] max-w-[100px]",children:i.label},i.key))})}),a.jsx("tbody",{children:B.length>0?e.map((i,g)=>a.jsx("tr",{className:"border-b hover:bg-gray-50",children:M.map(l=>{var d;return U.includes(l.key)?a.jsx("td",{className:"py-2 px-3 whitespace-wrap text-wrap break-words text-sm text-gray-700 min-w-[60px] max-w-[100px]",children:l.key==="actions"?(()=>{var b,T;const h=(b=N[l.key])==null?void 0:b.call(N,i);if(!h)return null;if(!["admin","super_admin","cdrrmo_admin","resident"].includes(G)&&((T=h.props)!=null&&T.actions)){const v=h.props.actions.filter(S=>S.label!=="Delete");return de.cloneElement(h,{actions:v})}return h})():((d=N[l.key])==null?void 0:d.call(N,i))??""},`${g}-${l.key}`):null})},g)):a.jsx("tr",{children:a.jsx("td",{colSpan:U.length,className:"text-center py-6 text-gray-500",children:a.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[a.jsx(he,{className:"w-20 h-20 text-gray-400"}),a.jsx("span",{className:"text-md font-medium",children:"No records found"})]})})})})]})}),U.length===0?a.jsx("div",{className:"p-2 text-sm text-red-600 font-medium w-full text-center rounded-lg border border-gray-200 mt-4",children:"All columns are hidden."}):a.jsxs("div",{className:"my-2 px-4 flex items-center justify-between",children:[x&&a.jsxs("span",{className:"text-sm text-gray-700 bg-gray-100 px-2 mt-4 py-1 rounded-md",children:["Showing ",B.length," /"," ",(p==null?void 0:p.total)??B.length," records"]}),Array.isArray(p==null?void 0:p.links)&&p.links.length>0&&a.jsx(ye,{links:p.links,queryParams:P})]})]})]})};export{xe as default};
