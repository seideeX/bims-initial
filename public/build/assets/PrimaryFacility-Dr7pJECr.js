import{j as t,L as w,S as N}from"./app-CDPwVV6Y.js";import{S as v,c as C}from"./AdminLayout-BW3ywimG.js";import T from"./BreadcrumbsHeader-BOSIhs5m.js";import{T as u}from"./TableSection-DJejfqZ4.js";import h from"./DynamicTable-C_SQJSlc.js";import{B as E}from"./BarangayFilterCard-BXzB8O3P.js";import{N as S}from"./NoDataPlaceholder-dm08Djn6.js";import{c as g}from"./createLucideIcon-B4SoG9zf.js";import"./sidebar-BqlEtGlg.js";import"./button-B_aprJyo.js";import"./clsx-B-dksMZM.js";import"./utils-CkmPJWYF.js";import"./input-DTbtaxsV.js";import"./index-8Tef56KC.js";import"./index-Dsz93ONd.js";import"./floating-ui.react-dom-VvtSZ_DO.js";import"./x-rg4AgZHH.js";import"./tooltip-10O7WS77.js";import"./nav-user-BTW7oy-u.js";import"./avatar-p9YAZDXV.js";import"./dropdown-menu-DFrz86N0.js";import"./check-BsJSkZwI.js";import"./chevron-right-DYtVQaAj.js";import"./useAppUrl-BIsbUUVL.js";import"./index-CH7DWExs.js";import"./DeleteConfirmationModal-DcMwm5QA.js";import"./file-text-DhLfxzDZ.js";import"./users-round-BK2vts8v.js";import"./heart-pulse-BRIexC2Z.js";import"./chevron-up-BBBA9wsx.js";import"./breadcrumb-DsnADmME.js";import"./card-B7XZtP7B.js";import"./SelectField-DIeNwIQe.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]],L=g("bus",M);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M9.3 6.2a4.55 4.55 0 0 0 5.4 0",key:"flyxqv"}],["path",{d:"M7.9 10.7c.9.8 2.4 1.3 4.1 1.3s3.2-.5 4.1-1.3",key:"1nlxxg"}],["path",{d:"M13.9 3.5a1.93 1.93 0 0 0-3.8-.1l-3 10c-.1.2-.1.4-.1.6 0 1.7 2.2 3 5 3s5-1.3 5-3c0-.2 0-.4-.1-.5Z",key:"vz7x1l"}],["path",{d:"m7.5 12.2-4.7 2.7c-.5.3-.8.7-.8 1.1s.3.8.8 1.1l7.6 4.5c.9.5 2.1.5 3 0l7.6-4.5c.7-.3 1-.7 1-1.1s-.3-.8-.8-1.1l-4.7-2.8",key:"1xfzlw"}]],R=g("traffic-cone",B);function da({primaryFacilitiesData:i,publicTransportData:y,roadNetworksData:d,barangays:f=[],selectedBarangay:b,queryParams:x}){const k=[{label:"Dashboard",showOnMobile:!0}];x=x||{};const _=!i||i.length===0,j=l=>{const n=l.target.value;N.get(route("cdrrmo_admin.primaryFacilities"),n?{barangay_id:n}:{})};return t.jsxs(v,{children:[t.jsx(w,{title:"Admin Dashboard"}),t.jsx(T,{breadcrumbs:k}),t.jsx("div",{className:"pt-8 pb-2 min-h-screen bg-gray-50",children:t.jsx("div",{className:"mx-auto w-full",children:_?t.jsx("div",{className:"w-full px-2 sm:px-4 lg:px-6",children:t.jsx(S,{tip:"Use the year selector above to navigate to a year with available data."})}):t.jsxs(t.Fragment,{children:[t.jsx(E,{selectedBarangay:b,handleBarangayChange:j,barangays:f}),i.length>0&&(()=>{const l=new Set;i.forEach(a=>{a.facilities.forEach(e=>l.add(e.facility_name))});const n=Array.from(l).map(a=>({key:a,label:a})),m=[{key:"number",label:"#"},{key:"barangay_name",label:"Barangay"},...n,{key:"total",label:"Total"}];let s=i.map(a=>{const e={number:a.number,barangay_name:a.barangay_name,total:a.total};return n.forEach(r=>{const o=a.facilities.find(p=>p.facility_name===r.key);e[r.key]=(o==null?void 0:o.quantity)||0}),e});if(!b){const a={number:null,barangay_name:"TOTAL",total:s.reduce((e,r)=>e+r.total,0)};n.forEach(e=>{a[e.key]=s.reduce((r,o)=>r+o[e.key],0)}),s.push(a)}const c={number:a=>t.jsx("span",{className:"text-gray-700",children:a.number}),barangay_name:a=>t.jsx("span",{className:"font-semibold text-gray-700",children:a.barangay_name}),total:a=>t.jsx("span",{className:"font-bold text-blue-600",children:a.total}),...n.reduce((a,e)=>(a[e.key]=r=>t.jsx("span",{className:"text-gray-700",children:r[e.key]}),a),{})};return t.jsx(u,{icon:t.jsx(C,{}),color:"blue",title:"Primary Facilities",description:"List of primary facilities per barangay",tableProps:{component:h,passedData:s,allColumns:m,columnRenderers:c,visibleColumns:m.map(a=>a.key),showTotal:!0,tableHeight:"500px"}},"primary-facilities")})(),y.length>0&&(()=>{const l=new Set;y.forEach(a=>a.transportations.forEach(e=>l.add(e.transpo_type)));const n=Array.from(l).map(a=>({key:a,label:a})),m=[{key:"number",label:"#"},{key:"barangay_name",label:"Barangay"},...n,{key:"total",label:"Total"}];let s=y.map(a=>{const e={number:a.number,barangay_name:a.barangay_name,total:a.total};return n.forEach(r=>{const o=a.transportations.find(p=>p.transpo_type===r.key);e[r.key]=(o==null?void 0:o.quantity)||0}),e});if(!b){const a={number:null,barangay_name:"TOTAL",total:s.reduce((e,r)=>e+r.total,0)};n.forEach(e=>{a[e.key]=s.reduce((r,o)=>r+o[e.key],0)}),s.push(a)}const c={number:a=>t.jsx("span",{className:"text-gray-700",children:a.number}),barangay_name:a=>t.jsx("span",{className:"font-semibold text-gray-700",children:a.barangay_name}),total:a=>t.jsx("span",{className:"font-bold text-blue-600",children:a.total}),...n.reduce((a,e)=>(a[e.key]=r=>t.jsx("span",{className:"text-gray-700",children:r[e.key]}),a),{})};return t.jsx(u,{icon:t.jsx(L,{}),color:"yellow",title:"Public Transportations",description:"Quantity of available public transport per barangay",tableProps:{component:h,passedData:s,allColumns:m,columnRenderers:c,visibleColumns:m.map(a=>a.key),showTotal:!0,tableHeight:"500px"}},"public-transport")})(),d.length>0&&(()=>{const l=new Set;d.forEach(a=>a.roads.forEach(e=>l.add(e.road_type)));const n=Array.from(l).map(a=>({key:a,label:a})),m=[{key:"number",label:"#"},{key:"barangay_name",label:"Barangay"},...n,{key:"total_length",label:"Total Length (km)"}],s=d.map(a=>{const e={number:a.number,barangay_name:a.barangay_name,total_length:a.total_length};return n.forEach(r=>{const o=a.roads.find(p=>p.road_type===r.key);e[r.key]=(o==null?void 0:o.length_km)||0}),e}),c={number:a=>t.jsx("span",{className:"text-gray-700",children:a.number}),barangay_name:a=>t.jsx("span",{className:"font-semibold text-gray-700",children:a.barangay_name}),total_length:a=>t.jsxs("span",{className:"font-bold text-blue-600",children:[Number(a.total_length).toFixed(2)," ","km"]}),...n.reduce((a,e)=>(a[e.key]=r=>t.jsxs("span",{className:"text-gray-700",children:[Number(r[e.key]).toFixed(2)," ","km"]}),a),{})};return t.jsx(u,{icon:t.jsx(R,{}),color:"purple",title:"Road Networks",description:"Length of different road types per barangay",tableProps:{component:h,passedData:s,allColumns:m,columnRenderers:c,visibleColumns:m.map(a=>a.key),showTotal:!0,tableHeight:"500px"}},"road-networks")})()]})})})]})}export{da as default};
