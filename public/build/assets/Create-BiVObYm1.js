import{r as g,j as e,a as ne,R as te,y as ee,K as re,L as ce,S as de}from"./app-CDPwVV6Y.js";import me from"./BreadcrumbsHeader-BOSIhs5m.js";import{S as ue}from"./AdminLayout-BW3ywimG.js";import{S as q,a as he,b as pe}from"./StepperContext-BlppoemL.js";import{I as E}from"./InputField-D_ZI8EKx.js";import{D as k}from"./DropdownInputField-BmM-TOT_.js";import{S as W}from"./SelectField-DIeNwIQe.js";import{u as ae}from"./useAppUrl-BIsbUUVL.js";import{R as L}from"./RadioGroup-K1vYBuUY.js";import{d as z,e as Q,I as Y,a as G}from"./index-D4O4cOmu.js";import{Y as K}from"./YearDropdown-Cu5CjLYl.js";import{I as be}from"./InputLabel-C3y8TkvV.js";import{t as B}from"./stringFormat-Dx_XIxG1.js";import{F as _e,l as ge,V as ye,u as ve,s as xe,r as je,v as Ne,X as fe,w as Ce,z as Se,y as $e,x as we,Y as Te,Z as Ee,R as ke,_ as Me,q as Oe,$ as De,a0 as Pe,a1 as Ae,a2 as Re,a3 as Fe,a4 as Le,a5 as He,a6 as Ue,a7 as Ve,E as Xe,k as Be,j as Ye,a8 as Ge,a9 as We,aa as qe,M as Ke,m as ze,h as Qe,U as Je,W as Ze,ab as Ie,ac as es}from"./constants-DHCt9dPc.js";import{C as ss}from"./Checkbox-Cox4_RpR.js";import{t as J,T as ts}from"./index-CH7DWExs.js";import"./breadcrumb-DsnADmME.js";import"./button-B_aprJyo.js";import"./clsx-B-dksMZM.js";import"./utils-CkmPJWYF.js";import"./chevron-right-DYtVQaAj.js";import"./createLucideIcon-B4SoG9zf.js";import"./sidebar-BqlEtGlg.js";import"./input-DTbtaxsV.js";import"./index-8Tef56KC.js";import"./index-Dsz93ONd.js";import"./floating-ui.react-dom-VvtSZ_DO.js";import"./x-rg4AgZHH.js";import"./tooltip-10O7WS77.js";import"./nav-user-BTW7oy-u.js";import"./avatar-p9YAZDXV.js";import"./dropdown-menu-DFrz86N0.js";import"./check-BsJSkZwI.js";import"./DeleteConfirmationModal-DcMwm5QA.js";import"./file-text-DhLfxzDZ.js";import"./users-round-BK2vts8v.js";import"./heart-pulse-BRIexC2Z.js";import"./chevron-up-BBBA9wsx.js";import"./index-BDJITxkD.js";import"./iconBase-DNpEM3Pe.js";const as=({puroks:l,streets:y})=>{const{userData:o,setUserData:s,errors:x}=g.useContext(q),$=ae(),R=f=>{const{name:w,value:U}=f.target;if(w==="street"){const P=Number(U),T=y.find(N=>N.id===P);T&&s(N=>{var _,a;return{...N,street:T.id,street_name:T.street_name,purok_id:((_=T.purok)==null?void 0:_.id)||null,purok:((a=T.purok)==null?void 0:a.purok_number)||""}});return}s(P=>({...P,[w]:U}))},F=l.map(f=>({label:"Purok "+f,value:f.toString()})),H=y.map(f=>({label:f.street_name,value:f.id.toString()}));return g.useEffect(()=>{(async()=>{try{const w=await ne.get(`${$}/household/latest-house-number`);if(w.data.success){const U=w.data.house_number;s(P=>({...P,housenumber:P.housenumber||U}))}else toast.error("Failed to fetch latest house number")}catch(w){console.error("Error fetching house number:",w),toast.error("Error fetching latest house number",{description:w.message})}})()},[]),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1 mt-1",children:"Household Address Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Please provide your complete address information to continue."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{type:"text",label:"House/Unit No./Lot/Blk No.",name:"housenumber",value:o.housenumber||"",onChange:R,placeholder:"e.g., Lot 12 Blk 7 or Unit 3A",required:!0}),x.housenumber&&e.jsx("p",{className:"text-red-500 text-sm",children:x.housenumber})]}),e.jsxs("div",{children:[e.jsx(k,{type:"text",label:"Street Name",name:"street",value:o.street_name||"",onChange:R,placeholder:"e.g., Rizal St., Mabini Avenue",items:H}),x.street&&e.jsx("p",{className:"text-red-500 text-sm",children:x.street})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{type:"text",label:"Subdivision/Village/Compound",name:"subdivision",value:o.subdivision||"",onChange:R,placeholder:"e.g., Villa Gloria Subdivision"}),x.subdivision&&e.jsx("p",{className:"text-red-500 text-sm",children:x.subdivision})]}),e.jsxs("div",{children:[e.jsx(W,{type:"text",label:"Purok/Zone/Sitio/Cabisera",name:"purok",value:o.purok||"",onChange:R,placeholder:"e.g., Purok 5, Sitio Lupa",items:F,required:!0}),x.purok&&e.jsx("p",{className:"text-red-500 text-sm",children:x.purok})]})]})]})},V=[];for(let l=0;l<256;++l)V.push((l+256).toString(16).slice(1));function ls(l,y=0){return(V[l[y+0]]+V[l[y+1]]+V[l[y+2]]+V[l[y+3]]+"-"+V[l[y+4]]+V[l[y+5]]+"-"+V[l[y+6]]+V[l[y+7]]+"-"+V[l[y+8]]+V[l[y+9]]+"-"+V[l[y+10]]+V[l[y+11]]+V[l[y+12]]+V[l[y+13]]+V[l[y+14]]+V[l[y+15]]).toLowerCase()}let I;const is=new Uint8Array(16);function os(){if(!I){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");I=crypto.getRandomValues.bind(crypto)}return I(is)}const ns=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),se={randomUUID:ns};function rs(l,y,o){var x;l=l||{};const s=l.random??((x=l.rng)==null?void 0:x.call(l))??os();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,ls(s)}function Z(l,y,o){return se.randomUUID?se.randomUUID():rs(l)}const cs={lastname:"",firstname:"",middlename:"",suffix:"",birthdate:"",birthplace:"City of Ilagan",civil_status:"",gender:"",sex:"",maiden_middle_name:"",citizenship:"Filipino",religion:"",ethnicity:"",contactNumber:"",email:"",age:"",is_pensioner:"",osca_id_number:"",pension_type:"",living_alone:"",residency_type:"",residency_date:"",registered_voter:"",voter_id_number:"",voting_status:"",resident_image:"",is_household_head:0,is_4ps_benificiary:"",is_solo_parent:"",solo_parent_id_number:"",has_vehicle:"0"},ds=({barangays:l})=>{var p,v,m;const{userData:y,setUserData:o,errors:s}=g.useContext(q),x=y.household||{household_type:"",household_count:0,families:[]},[$,R]=g.useState(null),[F,H]=g.useState({}),f=c=>{if(!c)return"";const t=new Date(c),n=new Date;let r=n.getFullYear()-t.getFullYear();const i=n.getMonth()-t.getMonth();return(i<0||i===0&&n.getDate()<t.getDate())&&r--,r},w=Object.entries(l).map(([c,t])=>({label:t,value:c})),U=c=>{const t=parseInt(c.target.value||0);let n=[...x.families||[]];if(t>n.length)for(let r=n.length;r<t;r++)n.push({memberCount:0,members:[]});else t<n.length&&(n=n.slice(0,t));o({...y,household:{...x,families:n}})},P=(c,t)=>{const n=parseInt(t||0),r=[...x.families],i=r[c].members||[];r[c].memberCount=n,r[c].members=Array.from({length:n},(C,h)=>i[h]||{...cs}),o({...y,household:{...x,families:r}})},T=(c,t,n)=>{const r=[...x.families];r[c][t]=n,o({...y,household:{...x,families:r}})},N=(c,t,n,r)=>{const i=[...x.families],C={...i[c].members[t]};if(C[n]=r,n==="birthdate"&&(C.age=f(r)),n==="relation_to_household_head")switch(r){case"sibling":case"sibling-of-spouse":C.siblingGroupKey||(C.siblingGroupKey=Z());break;case"spouse-of-sibling-of-spouse":case"spouse-sibling":const h=i[c].members.find(S=>["sibling","sibling-of-spouse"].includes(S.relation_to_household_head));h?(C.siblingGroupKey=h.siblingGroupKey||Z(),h.siblingGroupKey=C.siblingGroupKey):C.siblingGroupKey||(C.siblingGroupKey=Z());break;case"niblings":const u=i[c].members.find(S=>["sibling","sibling-of-spouse","spouse-sibling"].includes(S.relation_to_household_head)&&S.siblingGroupKey);C.siblingGroupKey=(u==null?void 0:u.siblingGroupKey)||Z();break}i[c].members[t]=C,o({...y,household:{...x,families:i}})};(p=x.families)==null||p.reduce((c,t)=>c+(t.memberCount||0),0),g.useEffect(()=>{var t;const c=((t=x.families)==null?void 0:t.reduce((n,r)=>n+(r.memberCount||0),0))||0;(x.household_count||0)!==c&&o(n=>({...n,household:{...n.household,household_count:c}}))},[x.families,x.household_count,o]);const _=(c,t,n,r,i)=>{const C={...y.household},h=C.families[c].members[t],u=[...h.vehicles||[]];u[n]={...u[n],[r]:i},h.vehicles=u,o({...y,household:C})},a=(c,t)=>{const n={...y.household},r=n.families[c].members[t];r.vehicles=[...r.vehicles||[],{}],o({...y,household:n})},b=(c,t,n)=>{const r={...y.household},i=r.families[c].members[t],C=[...i.vehicles||[]];C.splice(n,1),i.vehicles=C,o({...y,household:r})};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1 mt-1",children:"Household Members Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Kindly provide the personal information of all household members."}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6 sm:grid-cols-1",children:[e.jsx(E,{type:"number",label:"Number of Families in Household",value:((v=x.families)==null?void 0:v.length)||"",onChange:U,placeholder:"Enter number of families",required:!0}),e.jsx(k,{label:"Household Type",value:x.household_type,items:[{label:"Nuclear",value:"nuclear"},{label:"Extended",value:"extended"},{label:"Single Parent",value:"single_parent"},{label:"Grandparent",value:"grandparent"},{label:"Childless",value:"childless"},{label:"Cohabiting Partners",value:"cohabiting_partners"},{label:"One-person Household",value:"one_person_household"},{label:"Roommates",value:"roommates"}],onChange:c=>o({...y,household:{...x,household_type:c.target.value}}),placeholder:"Select household type",required:!0}),e.jsx(E,{type:"number",label:"Total Household Members",value:x.household_count||0,readOnly:!0})]}),(m=x.families)==null?void 0:m.map((c,t)=>{var n;return e.jsxs("div",{className:"mb-4 border rounded shadow-sm bg-white",children:[e.jsxs("button",{type:"button",className:`w-full text-left p-4 font-semibold flex justify-between items-center
                        ${$===t?"border-t-2 border-blue-600 text-gray-900":"text-gray-700 hover:bg-sky-100"}
                        transition duration-300 ease-in-out`,onClick:()=>R($===t?null:t),children:[e.jsxs("span",{children:["Family ",t+1]}),$===t?e.jsx(z,{className:"text-xl text-blue-600"}):e.jsx(Q,{className:"text-xl text-blue-600"})]}),$===t&&e.jsxs("div",{className:"mt-0 p-4 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 sm:grid-cols-1 gap-4",children:[e.jsx(E,{type:"number",label:"Number of Family Members",value:c.memberCount||"",onChange:r=>P(t,r.target.value)}),e.jsx(k,{label:"Family Type",value:c.family_type||"",items:[{label:"Nuclear",value:"nuclear"},{label:"Extended",value:"extended"},{label:"Single Parent",value:"single_parent"},{label:"Grandparent",value:"grandparent"},{label:"Childless",value:"childless"},{label:"Cohabiting Partners",value:"cohabiting_partners"},{label:"One-person Household",value:"one_person_household"},{label:"Roommates",value:"roommates"}],onChange:r=>T(t,"family_type",r.target.value),placeholder:"Select family type",required:!0})]}),(n=c.members)==null?void 0:n.map((r,i)=>{const C=F[t]===i,h=["female"].includes(r.sex)&&["married","widowed","separated"].includes(r.civil_status);return e.jsxs("div",{className:"mt-3 border rounded bg-white",children:[e.jsxs("button",{type:"button",className:`w-full text-left p-4 font-semibold flex justify-between items-center
                                            ${C?"border-t-2 border-blue-600 text-gray-900":"text-gray-700 hover:bg-sky-100"}
                                            transition duration-300 ease-in-out`,onClick:()=>H(u=>({...u,[t]:u[t]===i?null:i})),children:[e.jsxs("span",{children:["Member ",i+1]}),C?e.jsx(z,{className:"text-xl text-blue-600"}):e.jsx(Q,{className:"text-xl text-blue-600"})]}),C&&e.jsxs("div",{id:`member-panel-${i}`,role:"region","aria-labelledby":`member-header-${i}`,className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-y-2 md:gap-x-4",children:[e.jsxs("div",{className:"md:row-span-2 flex flex-col items-center space-y-2",children:[e.jsx(be,{htmlFor:`resident-image-${i}`,value:"Profile Photo"}),e.jsx("img",{src:r.resident_image instanceof File?URL.createObjectURL(r.resident_image):r.resident_image||"/images/default-avatar.jpg",alt:`Resident ${i+1}`,className:"w-32 h-32 object-cover rounded-full border border-gray-200"}),e.jsx("input",{id:`resident-image-${i}`,type:"file",name:"resident_image",accept:"image/*",onChange:u=>{const S=u.target.files[0];if(S){const A=[...x.families];A[t].members[i].resident_image=S,o(d=>({...d,household:{...d.household,families:A}}))}},className:"block w-full text-sm text-gray-500 file:mr-2 file:py-1 file:px-3 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(s==null?void 0:s[`members.${i}.resident_image`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`members.${i}.resident_image`]})]}),e.jsxs("div",{className:"md:col-span-5 space-y-2",children:[e.jsxs("div",{className:`grid gap-2 grid-cols-1 sm:grid-cols-2 md:${h?"grid-cols-4":"grid-cols-3"}`,children:[e.jsxs("div",{children:[e.jsx(E,{label:"Last Name",name:"lastname",value:r.lastname,onChange:u=>N(t,i,"lastname",B(u.target.value)),placeholder:"Last name",required:!0}),(s==null?void 0:s[`members.${i}.lastname`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`members.${i}.lastname`]})]}),e.jsxs("div",{children:[e.jsx(E,{label:"First Name",name:"firstname",value:r.firstname,onChange:u=>N(t,i,"firstname",B(u.target.value)),placeholder:"Given name",required:!0}),(s==null?void 0:s[`members.${i}.firstname`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`members.${i}.firstname`]})]}),e.jsxs("div",{children:[e.jsx(E,{label:"Middle Name",name:"middlename",value:r.middlename,onChange:u=>N(t,i,"middlename",B(u.target.value)),placeholder:"Middle name"}),(s==null?void 0:s[`members.${i}.middlename`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`members.${i}.middlename`]})]}),e.jsxs("div",{children:[h&&e.jsx(E,{label:"Maiden Name",name:"maiden_middle_name",value:r.maiden_middle_name,onChange:u=>N(t,i,"maiden_middle_name",B(u.target.value)),placeholder:"Mother's name"}),(s==null?void 0:s[`members.${i}.maiden_middle_name`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`members.${i}.maiden_middle_name`]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(k,{label:"Suffix",name:"suffix",value:r.suffix,items:["Jr.","Sr.","I","II","III","IV"],onChange:u=>N(t,i,"suffix",B(u.target.value)),placeholder:"Select suffix"}),(s==null?void 0:s[`members.${i}.suffix`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`members.${i}.suffix`]})]}),e.jsxs("div",{children:[e.jsx(W,{label:"Civil Status",name:"civil_status",value:r.civil_status,items:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Widowed",value:"widowed"},{label:"Divorced",value:"divorced"},{label:"Separated",value:"separated"},{label:"Annulled",value:"annulled"}],onChange:u=>N(t,i,"civil_status",u.target.value),placeholder:"Select status",required:!0}),(s==null?void 0:s[`members.${i}.civil_status`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`members.${i}.civil_status`]})]}),e.jsxs("div",{children:[e.jsx(L,{label:"Sex",name:"sex",selectedValue:r.sex||"",options:[{label:"Male",value:"male"},{label:"Female",value:"female"}],onChange:u=>N(t,i,"sex",u.target.value),required:!0}),(s==null?void 0:s[`members.${i}.sex`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`members.${i}.sex`]})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Gender",name:"gender",value:r.gender,items:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"LGBTQ+",value:"LGBTQ"}],onChange:u=>N(t,i,"gender",u.target.value),placeholder:"Select gender",required:!0}),(s==null?void 0:s[`members.${i}.gender`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`members.${i}.gender`]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[e.jsx("h3",{className:"text-md font-medium text-gray-700",children:"Birth & Citizenship"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[e.jsx(E,{type:"date",label:"Birth Date",name:"birthdate",value:r.birthdate,onChange:u=>N(t,i,"birthdate",u.target.value),required:!0}),e.jsx(E,{label:"Birth Place",name:"birthplace",value:r.birthplace,onChange:u=>N(t,i,"birthplace",B(u.target.value)),placeholder:"City/Municipality"}),e.jsx(k,{label:"Religion",name:"religion",value:r.religion,items:["Roman Catholic","Iglesia ni Cristo","Born Again","Baptists"],onChange:u=>N(t,i,"religion",B(u.target.value)),placeholder:"Select religion"}),e.jsx(k,{label:"Ethnicity",name:"ethnicity",value:r.ethnicity,items:["Ilocano","Ibanag","Tagalog","Indigenous People"],onChange:u=>N(t,i,"ethnicity",B(u.target.value)),placeholder:"Select ethnicity"}),e.jsx(k,{label:"Citizenship",name:"citizenship",value:r.citizenship,items:["Filipino","Chinese","American"],onChange:u=>N(t,i,"citizenship",B(u.target.value)),placeholder:"Select citizenship",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[e.jsx("h3",{className:"text-md font-medium text-gray-700",children:"Contact Info"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{label:"Contact Number",name:"contactNumber",value:r.contactNumber,onChange:u=>{const S=u.target.value;/^\d{0,11}$/.test(S)&&N(t,i,"contactNumber",S)},placeholder:"09XX XXXX XXX"}),(s==null?void 0:s[`families.${t}.members.${i}.contactNumber`])&&e.jsx("p",{className:"text-red-500 text-sm",children:s[`families.${t}.members.${i}.contactNumber`]}),e.jsx(E,{label:"Email",name:"email",value:r.email,onChange:u=>N(t,i,"email",u.target.value),placeholder:"your@email.com"}),(s==null?void 0:s[`families.${t}.members.${i}.email`])&&e.jsx("p",{className:"text-red-500 text-sm",children:s[`families.${t}.members.${i}.email`]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[e.jsx("h3",{className:"text-md font-medium text-gray-700",children:"Residency Info"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(k,{label:"Residency Type",name:"residency_type",value:r.residency_type,items:[{label:"Permanent",value:"permanent"},{label:"Temporary",value:"temporary"},{label:"Immigrant",value:"immigrant"}],onChange:u=>N(t,i,"residency_type",u.target.value),placeholder:"Select type"}),e.jsx(K,{label:"Residency Date",name:"residency_date",value:r.residency_date,onChange:u=>N(t,i,"residency_date",u.target.value),placeholder:"Select year"}),e.jsx(k,{label:"Household Position",name:"household_position",value:r.household_position,items:[{label:"Primary/Nuclear",value:"primary"},{label:"Extended",value:"extended"},{label:"Boarder",value:"boarder"}],onChange:u=>N(t,i,"household_position",u.target.value),placeholder:"Select type"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(L,{label:"Household Head?",name:`is_household_head_${r.id}`,selectedValue:parseInt(r.is_household_head)??0,options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:u=>{const S=parseInt(u.target.value);N(t,i,"is_household_head",S),S===1?N(t,i,"relation_to_household_head","self"):N(t,i,"relation_to_household_head","")},required:!0,disabled:x.families.some(u=>u.members.some(S=>S.is_household_head===1&&S!==r))&&r.is_household_head!==1}),e.jsx(L,{label:"Family Head?",name:`is_family_head_${r.id}`,selectedValue:x.families[t].members.some(u=>u.is_family_head===1)?r.is_family_head===1?1:0:r.is_family_head??0,options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:u=>{const S=parseInt(u.target.value);N(t,i,"is_family_head",S)},required:!0,disabled:x.families[t].members.some(u=>u.is_family_head===1&&u!==r)&&r.is_family_head!==1}),e.jsx("div",{className:"grid col-span-2 w-full",children:e.jsx(W,{label:"Relationship to Household Head",name:"relation_to_household_head",value:r.relation_to_household_head,items:[{label:"Self/Head",value:"self",subtitle:"The main resident of the household"},{label:"Spouse",value:"spouse",subtitle:"Legally married partner of the head"},{label:"Child",value:"child",subtitle:"Son or daughter of the head"},{label:"Sibling",value:"sibling",subtitle:"Brother or sister of the head"},{label:"Parent",value:"parent",subtitle:"Father or mother of the head"},{label:"Parent-in-law",value:"parent_in_law",subtitle:"Parent of the head’s spouse"},{label:"Sibling of Spouse",value:"sibling-of-spouse",subtitle:"Brother or sister of the spouse"},{label:"Spouse of (Sibling of Spouse)",value:"spouse-of-sibling-of-spouse",subtitle:"Spouse of your sibling-in-law"},{label:"Spouse of Sibling",value:"spouse-sibling",subtitle:"Spouse of your sibling"},{label:"Niece/Nephew",value:"niblings",subtitle:"Child of your sibling or sibling in law"},{label:"Grandparent",value:"grandparent",subtitle:"Grandfather or grandmother of the head"}],onChange:u=>N(t,i,"relation_to_household_head",u.target.value),placeholder:"Select type",disabled:r.is_household_head===1})})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[e.jsx("h3",{className:"text-md font-medium text-gray-700",children:"Government Programs"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(L,{label:"4Ps Beneficiary?",name:`is_4ps_benificiary_${t}_${i}`,selectedValue:r.is_4ps_benificiary??"",options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:u=>N(t,i,"is_4ps_benificiary",parseInt(u.target.value,10))}),(s==null?void 0:s[`families.${t}.members.${i}.is_4ps_benificiary`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.is_4ps_benificiary`]})]}),e.jsxs("div",{children:[e.jsx(L,{label:"Solo Parent?",name:`is_solo_parent_${t}_${i}`,selectedValue:r.is_solo_parent??"",options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:u=>N(t,i,"is_solo_parent",parseInt(u.target.value,10))}),(s==null?void 0:s[`families.${t}.members.${i}.is_solo_parent`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.is_solo_parent`]})]}),Number(r.is_solo_parent)===1&&e.jsxs("div",{children:[e.jsx(E,{label:"Solo Parent ID",name:"solo_parent_id_number",value:r.solo_parent_id_number??"",onChange:u=>N(t,i,"solo_parent_id_number",u.target.value),placeholder:"ID number"}),(s==null?void 0:s[`families.${t}.members.${i}.solo_parent_id_number`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.solo_parent_id_number`]})]}),e.jsxs("div",{children:[e.jsx(L,{label:"Registered Voter?",name:`registered_voter_${t}_${i}`,selectedValue:r.registered_voter??"",options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:u=>N(t,i,"registered_voter",parseInt(u.target.value,10))}),(s==null?void 0:s[`families.${t}.members.${i}.registered_voter`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.registered_voter`]})]}),e.jsxs("div",{children:[e.jsx(E,{label:"PhilSys Card Number (PCN)",name:`philsys_card_number_${t}_${i}`,value:r.philsys_card_number||"",maxLength:16,onChange:u=>N(t,i,"philsys_card_number",u.target.value),placeholder:"Enter 16-digit PCN"}),(s==null?void 0:s[`families.${t}.members.${i}.philsys_card_number`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.philsys_card_number`]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the 16-digit PhilSys Card Number (PCN) found on the National ID."})]}),Number(r.registered_voter)===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(E,{label:"Voter ID",name:"voter_id_number",value:r.voter_id_number??"",onChange:u=>N(t,i,"voter_id_number",u.target.value),placeholder:"Voter ID number"}),(s==null?void 0:s[`families.${t}.members.${i}.voter_id_number`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.voter_id_number`]})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Voting Status",name:"voting_status",value:r.voting_status??"",items:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Disqualified",value:"disqualified"},{label:"Medical",value:"medical"},{label:"Overseas",value:"overseas"},{label:"Detained",value:"detained"},{label:"Deceased",value:"deceased"}],onChange:u=>N(t,i,"voting_status",u.target.value),placeholder:"Select status"}),(s==null?void 0:s[`families.${t}.members.${i}.voting_status`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.voting_status`]})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Votes In?",name:"registered_barangay",value:r.registered_barangay??"",items:w,onChange:u=>N(t,i,"registered_barangay",u.target.value),placeholder:"Select registered barangay"}),(s==null?void 0:s[`families.${t}.members.${i}.registered_barangay`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.registered_barangay`]})]})]})]})]}),r.age>=60&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[e.jsx("h3",{className:"text-md font-medium text-gray-700",children:"Senior Citizen Info"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(L,{label:"Pensioner?",name:"is_pensioner",selectedValue:r.is_pensioner||"",options:[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Pending",value:"pending"}],onChange:u=>N(t,i,"is_pensioner",u.target.value)}),(s==null?void 0:s[`families.${t}.members.${i}.is_pensioner`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.is_pensioner`]})]}),r.is_pensioner==="yes"&&e.jsxs("div",{className:"flex flex-col sm:flex-row col-span-2 gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(E,{label:"OSCA ID",name:"osca_id_number",type:"number",value:r.osca_id_number||"",onChange:u=>N(t,i,"osca_id_number",u.target.value),placeholder:"OSCA ID number"}),(s==null?void 0:s[`families.${t}.members.${i}.osca_id_number`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.osca_id_number`]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(k,{label:"Pension Type",name:"pension_type",value:r.pension_type||"",items:["SSS","DSWD","GSIS","Private","None"],onChange:u=>N(t,i,"pension_type",u.target.value),placeholder:"Select type"}),(s==null?void 0:s[`families.${t}.members.${i}.pension_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.pension_type`]})]})]}),e.jsxs("div",{children:[e.jsx(L,{label:"Living Alone?",name:"living_alone",selectedValue:r.living_alone,options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:u=>N(t,i,"living_alone",parseInt(u.target.value))}),(s==null?void 0:s[`families.${t}.members.${i}.living_alone`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.living_alone`]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[e.jsx("h3",{className:"text-md font-medium text-gray-700",children:"Vehicle Info"}),e.jsxs("div",{children:[e.jsx(L,{label:"Owns Vehicle(s)?",name:"has_vehicle",selectedValue:r.has_vehicle,options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:u=>N(t,i,"has_vehicle",parseInt(u.target.value))}),(s==null?void 0:s[`families.${t}.members.${i}.has_vehicle`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${t}.members.${i}.has_vehicle`]})]}),r.has_vehicle===1&&e.jsxs("div",{className:"space-y-4 mt-4",children:[(r.vehicles||[]).map((u,S)=>e.jsxs("div",{className:"border p-4 rounded-md relative bg-gray-50",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(k,{label:"Vehicle Type",name:"vehicle_type",value:u.vehicle_type||"",items:["Motorcycle","Tricycle","Car","Jeep","Truck","Bicycle"],onChange:A=>_(t,i,S,"vehicle_type",A.target.value),placeholder:"Select type"}),e.jsx(k,{label:"Classification",name:"vehicle_class",value:u.vehicle_class||"",items:[{label:"Private",value:"private"},{label:"Public",value:"public"}],onChange:A=>_(t,i,S,"vehicle_class",A.target.value),placeholder:"Select class"}),e.jsx(k,{label:"Usage Purpose",name:"usage_status",value:u.usage_status||"",items:[{label:"Personal",value:"personal"},{label:"Public Transport",value:"public_transport"},{label:"Business Use",value:"business_use"}],onChange:A=>_(t,i,S,"usage_status",A.target.value),placeholder:"Select usage"}),e.jsx(L,{label:"Is Registered?",name:"is_registered",selectedValue:u.is_registered===0||u.is_registered===1?u.is_registered:"",options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:A=>_(t,i,S,"is_registered",parseInt(A.target.value))})]}),e.jsx("button",{type:"button",onClick:()=>b(t,i,S),className:"absolute top-1 right-2 flex items-center gap-1 text-2xl text-red-400 hover:text-red-800 transition-colors duration-200",title:"Remove Vehicle",children:e.jsx(Y,{})})]},S)),e.jsxs("button",{type:"button",onClick:()=>a(t,i),className:"flex items-center text-blue-600 hover:text-blue-800 text-sm mt-2",title:"Add Vehicle",children:[e.jsx(G,{className:"text-4xl"}),e.jsx("span",{className:"ml-1",children:"Add Vehicle"})]})]})]})]})]},i)})]})]},t)})]})},le=te.memo(({label:l,value:y})=>e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:l}),e.jsx("span",{className:`text-sm break-words ${y?"text-gray-900":"text-red-500"}`,children:y||"N/A"})]})),ms=te.memo(({member:l})=>{var A;const y=g.useMemo(()=>ke,[]),o=g.useMemo(()=>Me,[]),s=g.useMemo(()=>Oe,[]),x=g.useMemo(()=>De,[]),$=g.useMemo(()=>Pe,[]),R=g.useMemo(()=>Ae,[]),F=g.useMemo(()=>Re,[]),H=g.useMemo(()=>Fe,[]),f=g.useMemo(()=>Le,[]),w=g.useMemo(()=>He,[]),U=g.useMemo(()=>Ue,[]),P=g.useMemo(()=>Ve,[]),T=g.useMemo(()=>Xe,[]),N=g.useMemo(()=>Be,[]),_=g.useMemo(()=>Ye,[]),a=g.useMemo(()=>Ge,[]),b=g.useMemo(()=>We,[]),p=g.useMemo(()=>qe,[]),v=g.useMemo(()=>Ke,[]),m=g.useMemo(()=>ze,[]),c=g.useMemo(()=>Qe,[]),t=g.useMemo(()=>Je,[]),n=g.useMemo(()=>Ze,[]),r=g.useMemo(()=>Ie,[]),i=g.useMemo(()=>es,[]),C=g.useMemo(()=>l.resident_image instanceof File?URL.createObjectURL(l.resident_image):l.resident_image,[l.resident_image]);g.useEffect(()=>()=>{l.resident_image instanceof File&&C&&URL.revokeObjectURL(C)},[l.resident_image,C]);const h=g.useCallback((d,j)=>e.jsx(le,{label:d,value:j}),[]),u=y[l.sex],S=o[l.civil_status];return e.jsxs("details",{className:"border rounded-md shadow-sm bg-white",children:[e.jsxs("summary",{className:"px-4 py-2 text-blue-700 font-semibold cursor-pointer",children:["Member:"," ",`${l.firstname||""} ${l.lastname||""}`.trim()||"No Name Provided"]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Personal Information"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:C?e.jsx("img",{src:C,alt:"Resident",className:"w-32 h-32 object-cover rounded-md border border-gray-300"}):e.jsx("div",{className:"w-32 h-32 flex items-center justify-center bg-gray-100 text-sm text-gray-500 rounded-md border border-gray-300",children:"No Image"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 flex-grow",children:[h("Full Name",`${l.firstname||""} ${l.middlename||""} ${l.lastname||""} ${l.suffix||""}`.trim()),h("Birth Date",l.birthdate),h("Birth Place",l.birthplace),h("Civil Status",S),h("Sex",u),h("Gender",y[l.gender]),u==="Female"&&["married","widowed","separated"].includes(l.civil_status)&&h("Maiden Middle Name",l.maiden_middle_name),h("Religion",l.religion),h("Ethnicity",l.ethnicity),h("Citizenship",l.citizenship),h("Contact Number",l.contactNumber),h("Email",l.email),h("Residency",s[l.residency_type]),h("Residency date",l.residency_date),h("4Ps Beneficiary",x[l.is_4ps_benificiary]),h("Solo Parent",$[l.is_solo_parent]),l.is_solo_parent===1&&h("Solo Parent ID",l.solo_parent_id_number),h("Registered Voter",R[l.registered_voter]),l.registered_voter===1&&h("Voter ID",l.voter_id_number),l.registered_voter===1&&h("Voting Status",F[l.voting_status]),l.age>=60&&h("Pensioner",H[l.is_pensioner]),l.age>=60&&l.is_pensioner===1&&h("OSCA ID",l.osca_id_number),l.age>=60&&l.is_pensioner===1&&h("Pension Type",l.pension_type),l.age>=60&&h("Living Alone",f[l.living_alone])]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-sm font-semibold text-gray-700",children:"Vehicle Information"}),l.has_vehicle===1&&((A=l.vehicles)==null?void 0:A.length)>0?e.jsx("div",{className:`grid ${l.vehicles.length>1?"md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"} gap-4`,children:l.vehicles.map((d,j)=>e.jsxs("div",{className:"bg-blue-50 p-4 rounded border border-blue-100",children:[e.jsxs("h6",{className:"text-sm font-semibold text-blue-700 mb-2",children:["Vehicle ",l.vehicles.length>1?j+1:""]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[h("Vehicle Type",d.vehicle_type),h("Classification",w[d.vehicle_class]),h("Usage Purpose",U[d.usage_status]),h("Registered",P[d.is_registered])]})]},j))}):e.jsx("p",{className:"text-gray-500 italic",children:"No vehicle details provided."})]}),e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Education & Medical Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2 border border-gray-200 p-4 rounded-md",children:[e.jsx("h6",{className:"text-sm font-semibold text-blue-700",children:"Educational Background"}),l.educations&&l.educations.length>0?e.jsx("div",{className:`space-y-2 ${l.educations.length>3?"max-h-96 overflow-y-auto":""}`,children:l.educations.map((d,j)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 bg-blue-50 p-4 rounded border border-blue-100",children:[h("Highest Education",T[d.education]),d.education!=="no_education_yet"&&d.education!=="no_formal_education"&&e.jsxs(e.Fragment,{children:[h("Education Status",N[d.educational_status]),h("School Type",_[d.school_type]),h("Year Started",d.year_started),d.educational_status!=="enrolled"&&h("Year Ended",d.year_ended),h("School Name",d.school_name),d.education==="college"&&d.educational_status==="graduate"&&h("Course/Strand",d.program)]})]},j))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No educational background provided."})]}),e.jsxs("div",{className:"space-y-2 border border-gray-200 p-4 rounded-md",children:[e.jsx("h6",{className:"text-sm font-semibold text-blue-700",children:"Medical Background"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[h("Weight (kg)",l.weight_kg),h("Height (cm)",l.height_cm),h("Nutrition Status",l.nutrition_status),h("Blood Type",l.blood_type),h("PhilHealth",a[l.has_philhealth]),l.has_philhealth===1&&h("PhilHealth ID",l.philhealth_id_number),h("Consumes Alcohol",b[l.is_alcohol_user]),h("Smoking",p[l.is_smoker]),h("PWD",v[l.is_pwd]),h("Emergency Contact Name",l.emergency_contact_name),h("Emergency Contact Number",l.emergency_contact_number),h("Emergency Contact Relationship",l.emergency_contact_relationship)]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Disability Information"}),l.pwd_id_number&&e.jsxs("div",{className:"mb-2 text-sm text-gray-800",children:[e.jsx("span",{className:"font-medium text-gray-600 mr-1",children:"PWD ID Number:"}),e.jsx("span",{children:l.pwd_id_number})]}),l.disabilities&&l.disabilities.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:l.disabilities.map((d,j)=>e.jsx("div",{className:"px-3 py-1 bg-blue-50 border border-blue-100 rounded-md text-sm text-blue-700",children:d.disability_type||""},j))}):e.jsx("p",{className:"text-sm italic text-gray-500",children:"No disability information provided."})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-sm font-semibold text-gray-700",children:"Occupations and Livelihood Status"}),l.occupations&&l.occupations.length>0?e.jsx("div",{className:`grid ${l.occupations.length>1?"md:grid-cols-2":"grid-cols-1"} gap-4`,children:l.occupations.map((d,j)=>e.jsxs("div",{className:"bg-blue-50 p-4 rounded border border-blue-100",children:[e.jsxs("h6",{className:"text-sm font-semibold text-blue-700 mb-2",children:["Occupation ",l.occupations.length>1?j+1:""]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[h("Employment Status",m[d.employment_status]),d.employment_status!=="unemployed"&&d.employment_status!=="not_applicable"&&e.jsxs(e.Fragment,{children:[h("Occupation",d.occupation),h("Employment Type",c[d.employment_type]),h("Occupation Status",t[d.occupation_status]),h("Work Arrangement",n[d.work_arrangement]),h("Employer Name",d.employer),h("Year Started",d.started_at),d.occupation_status!=="active"&&h("Year Ended",d.ended_at),h("Monthly Income",d.monthly_income),h("Income Frequency",d.frequency),h("Income",d.income),h("OFW",r[d.is_ofw]),h("Main source of income",i[d.is_main_source])]})]})]},j))}):e.jsx("p",{className:"text-gray-500 italic",children:"No occupation data."})]})]})]})}),us=({onBack:l,onSubmit:y,streets:o})=>{var i,C,h,u,S,A,d,j,D;const{userData:s,setUserData:x}=g.useContext(q),$=g.useMemo(()=>s.household||{household_type:"",families:[]},[s.household]),R=g.useMemo(()=>{var M,O;return`₱${((O=(M=s.household)==null?void 0:M.family_monthly_income)==null?void 0:O.toLocaleString())||"0"}`},[(i=s.household)==null?void 0:i.family_monthly_income]),F=g.useMemo(()=>{const M=new Map;return o.forEach(O=>M.set(O.id,O.street_name)),M},[o]),H=g.useCallback(M=>F.get(M)||"N/A",[F]),f=g.useCallback((M,O)=>e.jsx(le,{label:M,value:O}),[]),w=g.useMemo(()=>_e,[]),U=g.useMemo(()=>ge,[]),P=g.useMemo(()=>ye,[]),T=g.useMemo(()=>ve,[]),N=g.useMemo(()=>xe,[]),_=g.useMemo(()=>je,[]),a=g.useMemo(()=>Ne,[]),b=g.useMemo(()=>fe,[]),p=g.useMemo(()=>Ce,[]),v=g.useMemo(()=>Se,[]),m=g.useMemo(()=>$e,[]),c=g.useMemo(()=>we,[]),t=g.useMemo(()=>Te,[]),n=g.useMemo(()=>Ee,[]),r=g.useCallback(M=>{x(O=>({...O,verified:M.target.checked?1:0}))},[x]);return console.log(s),e.jsxs("section",{className:"space-y-8 p-4 bg-white rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Review Your Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please review your details carefully before submission."})]}),e.jsxs("section",{className:"border border-gray-200 p-4 rounded-md mb-6",children:[e.jsx("h6",{className:"text-lg font-semibold text-blue-700 border-l-4 border-blue-500 pl-3 mb-4",children:"Household Address & Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h6",{className:"text-md font-semibold text-gray-700",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f("House/Lot/Unit No.",s.housenumber),f("Street Name",H(parseInt(s.street))),f("Subdivision/Village",s.subdivision),f("Purok/Zone/Sitio",s.purok)]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h6",{className:"text-md font-semibold text-gray-700",children:"Household & Financial Info"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[f("Household Type",w[$.household_type]),f("No. of Household Members",$.household_count),f("Family Monthly Income",R),f("Income Bracket",U[(C=s.household)==null?void 0:C.income_bracket]||"N/A"),f("Income Category",P[(h=s.household)==null?void 0:h.income_category]||"N/A")]})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsx("h6",{className:"text-lg font-semibold text-blue-700 border-l-4 border-blue-500 pl-3",children:"Household Members"}),!$.families||$.families.length===0?e.jsx("p",{className:"text-gray-500 italic bg-gray-50 p-4 rounded text-sm text-center",children:"No household member information provided."}):$.families.map((M,O)=>e.jsxs("div",{className:"space-y-4 border rounded-md shadow-md p-4 bg-gray-50",children:[e.jsxs("h5",{className:"text-md font-bold text-blue-800",children:[M.family_name||`Family ${O+1}`," Family"]}),!M.members||M.members.length===0?e.jsx("p",{className:"text-gray-500 italic text-sm",children:"No members added for this family."}):M.members.map((ie,oe)=>e.jsx(ms,{member:ie},oe))]},O))]}),e.jsxs("section",{className:"space-y-4 border border-gray-200 p-4 rounded-md",children:[e.jsx("h6",{className:"text-lg font-semibold text-blue-700 border-l-4 border-blue-500 pl-3 mb-2",children:"House Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[f("Ownership Type",T[s.ownership_type]),f("House Condition",N[s.housing_condition]),f("House Structure",_[s.house_structure]),f("Year Established",s.year_established),f("No. of Rooms",s.number_of_rooms),f("No. of Floors",s.number_of_floors),f("Bath/Wash Area",a[s.bath_and_wash_area]),f("Internet",b[s.type_of_internet]),((u=s.toilets)==null?void 0:u.length)>0&&f("Toilet Type(s)",s.toilets.map(M=>p[M.toilet_type]).filter(Boolean).join(", ")),((S=s.electricity_types)==null?void 0:S.length)>0&&f("Electricity Source(s)",s.electricity_types.map(M=>v[M.electricity_type]).filter(Boolean).join(", ")),((A=s.water_source_types)==null?void 0:A.length)>0&&f("Water Source(s)",s.water_source_types.map(M=>m[M.water_source_type]).filter(Boolean).join(", ")),((d=s.waste_management_types)==null?void 0:d.length)>0&&f("Waste Disposal Method(s)",s.waste_management_types.map(M=>c[M.waste_management_type]).filter(Boolean).join(", "))]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-md font-semibold text-gray-700 border-b pb-1 mb-2",children:"Livestock Ownership"}),s.has_livestock==1&&((j=s.livestocks)==null?void 0:j.length)>0?e.jsx("div",{className:"space-y-2",children:s.livestocks.map((M,O)=>e.jsxs("div",{className:"bg-sky-50 p-3 border border-sky-200 rounded-md flex flex-wrap gap-6",children:[f("Livestock Type",M.livestock_type),f("Quantity",M.quantity),f("Purpose",t[M.purpose])]},O))}):e.jsx("p",{className:"text-sm italic text-gray-500",children:"No livestock information provided."})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-md font-semibold text-gray-700 border-b pb-1 mb-2",children:"Pet Ownership"}),s.has_pets==1&&((D=s.pets)==null?void 0:D.length)>0?e.jsx("div",{className:"space-y-2",children:s.pets.map((M,O)=>e.jsxs("div",{className:"bg-sky-50 p-3 border border-sky-200 rounded-md flex flex-wrap gap-6",children:[f("Pet Type",M.pet_type),f("Vaccinated for Rabies",n[M.is_vaccinated])]},O))}):e.jsx("p",{className:"text-sm italic text-gray-500",children:"No pet information provided."})]})]})]}),e.jsx("section",{className:"space-y-4 border border-gray-200 p-4 rounded-md",children:e.jsxs("label",{className:"flex items-start space-x-2",children:[e.jsx(ss,{name:"verified",checked:s.verified===1,value:s.verified,onChange:r}),e.jsx("span",{className:"text-sm text-gray-700",children:"I hereby certify that the above information is true and correct to the best of my knowledge. I understand that for the Barangay to carry out its mandate pursuant to Section 394(d)(6) of the Local Government Code of 1991, it must necessarily process my personal information for easy identification of inhabitants, as a tool in planning, and as an updated reference for the number of inhabitants in the Barangay. Therefore, I grant my consent and recognize the authority of the Barangay to process my personal information, subject to the provisions of the Philippine Data Privacy Act of 2012."})]})})]})};function hs({occupationTypes:l}){var b,p;const{userData:y,setUserData:o,errors:s}=g.useContext(q),x=((b=y.household)==null?void 0:b.families)||[],[$,R]=g.useState(null),[F,H]=g.useState({}),f=v=>{o(m=>({...m,household:{...m.household,families:v}}))},w=(v,m,c,t)=>{const{name:n,value:r}=t.target,i=[...x],C=i[v].members[m],h=[...C.educations||[]],u=n==="school_name"?B(r):r;h[c]={...h[c],[n]:u},C.educations=h,f(i)},U=(v,m)=>{const c=[...x],t=c[v].members[m],n=[...t.educations||[]];n.push({}),t.educations=n,f(c)},P=(v,m,c)=>{const t=[...x],n=t[v].members[m],r=[...n.educations||[]];r.splice(c,1),n.educations=r,f(t),ee.success("Education removed.")},T=(v,m,c,t)=>{const{name:n,value:r}=t.target,i=[...x],C=i[v].members[m],h=[...C.occupations||[]],u=["employer","occupation"].includes(n)?B(r):r,S={...h[c],[n]:u},A={daily:30,weekly:4.33,"bi-weekly":2.17,monthly:1,annually:1/12},d=parseFloat(n==="income"?r:S.income),j=n==="frequency"?r:S.frequency;!isNaN(d)&&A[j]?S.monthly_income=(d*A[j]).toFixed(2):S.monthly_income="",h[c]=S,C.occupations=h,f(i)};g.useEffect(()=>{var n;const m=(((n=y.household)==null?void 0:n.families)||[]).reduce((r,i)=>{const C=(i.members||[]).reduce((h,u)=>{const S=(u.occupations||[]).reduce((A,d)=>A+(parseFloat(d.monthly_income)||0),0);return h+S},0);return r+C},0),t=[{min:0,max:5e3,key:"below_5000",category:"survival"},{min:5001,max:1e4,key:"5001_10000",category:"poor"},{min:10001,max:2e4,key:"10001_20000",category:"low_income"},{min:20001,max:4e4,key:"20001_40000",category:"lower_middle_income"},{min:40001,max:7e4,key:"40001_70000",category:"middle_income"},{min:70001,max:12e4,key:"70001_120000",category:"upper_middle_income"},{min:120001,max:1/0,key:"above_120001",category:"high_income"}].find(r=>m>=r.min&&m<=r.max)||{};o(r=>({...r,household:{...r.household,family_monthly_income:m,income_bracket:t.key||"",income_category:t.category||""}}))},[(p=y.household)==null?void 0:p.families]);const N=(v,m)=>{const c=[...x],t=c[v].members[m],n=[...t.occupations||[]];n.push({}),t.occupations=n,f(c)},_=(v,m,c)=>{const t=[...x],n=t[v].members[m],r=[...n.occupations||[]];r.splice(c,1),n.occupations=r,f(t),ee.success("Occupation removed.")},a=l.map(v=>v.toLowerCase());return e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1 mt-1",children:"Education and Occupation"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Please provide education history, occupation and livelihood for each household member."}),x.map((v,m)=>{var c;return e.jsxs("div",{className:"mb-4 border rounded shadow-sm bg-white",children:[e.jsxs("button",{type:"button",className:`w-full text-left p-4 font-semibold flex justify-between items-center
                        ${$===m?"border-t-2 border-blue-600 text-gray-900":"text-gray-700 hover:bg-sky-100"}
                        transition duration-300 ease-in-out`,onClick:()=>R($===m?null:m),children:[e.jsx("span",{children:v.family_name?`${v.family_name} Family`:`Family ${m+1}`}),$===m?e.jsx(z,{className:"text-xl text-blue-600"}):e.jsx(Q,{className:"text-xl text-blue-600"})]}),$===m&&e.jsx("div",{className:"my-4 space-y-4 mx-4",children:(c=v.members)==null?void 0:c.map((t,n)=>{var C,h,u,S,A;const r=F[m]===n,i=`${t.firstname||""} ${t.lastname||""}`;return e.jsxs("div",{className:"mt-3 border rounded bg-white",children:[e.jsxs("button",{type:"button",className:`w-full text-left p-4 font-semibold flex justify-between items-center
                                            ${r?"border-t-2 border-blue-600 text-gray-900":"text-gray-700 hover:bg-sky-100"}
                                            transition duration-300 ease-in-out`,onClick:()=>H(d=>({...d,[m]:d[m]===n?null:n})),children:[e.jsx("span",{children:i||`Member ${n+1}`}),r?e.jsx(z,{className:"text-xl text-blue-600"}):e.jsx(Q,{className:"text-xl text-blue-600"})]}),r&&e.jsxs("div",{id:`member-panel-${n}`,role:"region","aria-labelledby":`member-header-${n}`,className:"p-4 space-y-4",children:[e.jsx("h4",{className:"font-bold",children:"Education"}),(t.educations||[]).map((d,j)=>{const M=d.education==="college"&&d.educational_status==="graduated"?"md:grid-cols-4":"md:grid-cols-3";return e.jsxs("div",{className:"border p-4 mb-4 rounded-md relative bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{label:"Educational Attainment",name:"education",value:d.education||"",onChange:O=>w(m,n,j,O),placeholder:"Select attainment",required:!0,items:[{label:"No Education Yet",value:"no_education_yet"},{label:"No Formal Education",value:"no_formal_education"},{label:"Prep School",value:"prep_school"},{label:"Kindergarten",value:"kindergarten"},{label:"Elementary",value:"elementary"},{label:"High School",value:"high_school"},{label:"Senior High School",value:"senior_high_school"},{label:"College",value:"college"},{label:"ALS (Alternative Learning System)",value:"als"},{label:"TESDA",value:"tesda"},{label:"Vocational",value:"vocational"},{label:"Post Graduate",value:"post_graduate"}]}),(s==null?void 0:s[`families.${m}.members.${n}.educations.${j}.education`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${m}.members.${n}.educations.${j}.education`]})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Educational Status",name:"educational_status",value:d.educational_status||"",onChange:O=>w(m,n,j,O),placeholder:"Select status",items:[{label:"Currently Enrolled",value:"enrolled"},{label:"Graduated",value:"graduated"},{label:"Incomplete",value:"incomplete"},{label:"Dropped Out",value:"dropped_out"}],disabled:d.education==="no_formal_education"||d.education==="no_education_yet"}),(s==null?void 0:s[`families.${m}.members.${n}.educations.${j}.educational_status`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${m}.members.${n}.educations.${j}.educational_status`]})]}),e.jsxs("div",{children:[e.jsx(E,{label:"School Name",name:"school_name",type:"text",value:d.school_name||"",onChange:O=>w(m,n,j,O),placeholder:"Enter school name",disabled:d.education==="no_formal_education"||d.education==="no_education_yet"}),(s==null?void 0:s[`families.${m}.members.${n}.educations.${j}.school_name`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${m}.members.${n}.educations.${j}.school_name`]})]})]}),e.jsxs("div",{className:`grid grid-cols-1 ${M} gap-4 mt-4`,children:[e.jsxs("div",{children:[e.jsx(L,{label:"School Type",name:"school_type",options:[{label:"Public",value:"public"},{label:"Private",value:"private"}],selectedValue:d.school_type||"",onChange:O=>w(m,n,j,O),disabled:d.education==="no_formal_education"||d.education==="no_education_yet"}),(s==null?void 0:s[`families.${m}.members.${n}.educations.${j}.school_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${m}.members.${n}.educations.${j}.school_type`]})]}),e.jsxs("div",{children:[e.jsx(K,{label:"Year Started",name:"year_started",value:d.year_started||"",onChange:O=>w(m,n,j,O),disabled:d.education==="no_formal_education"||d.education==="no_education_yet"}),(s==null?void 0:s[`families.${m}.members.${n}.educations.${j}.year_started`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${m}.members.${n}.educations.${j}.year_started`]})]}),e.jsxs("div",{children:[e.jsx(K,{label:"Year Ended",name:"year_ended",value:d.year_ended||"",onChange:O=>w(m,n,j,O),disabled:d.education==="no_formal_education"||d.education==="no_education_yet"||d.educational_status=="enrolled"}),(s==null?void 0:s[`families.${m}.members.${n}.educations.${j}.year_ended`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${m}.members.${n}.educations.${j}.year_ended`]})]}),d.education==="college"&&e.jsxs("div",{children:[e.jsx(E,{label:d.educational_status==="graduated"?"Finished Course":"Current Course",name:"program",type:"text",value:d.program||"",onChange:O=>w(m,n,j,O),placeholder:"Enter your course",disabled:d.education==="no_formal_education"}),(s==null?void 0:s[`families.${m}.members.${n}.educations.${j}.program`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${m}.members.${n}.educations.${j}.program`]})]})]}),e.jsx("button",{type:"button",onClick:()=>P(m,n,j),className:"absolute top-2 right-2 text-red-500 hover:text-red-700 transition-colors duration-200",children:e.jsx(Y,{className:"text-2xl"})})]},j)}),e.jsxs("button",{type:"button",onClick:()=>U(m,n),className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 font-medium mt-4 transition-colors duration-200",children:[e.jsx(G,{className:"text-4xl"}),e.jsx("span",{children:"Add Education History"})]}),e.jsx("hr",{className:"h-px bg-sky-500 border-0 transform scale-y-100 origin-center"}),e.jsx("p",{className:"font-bold",children:"Occupation Background"}),(t.occupations||[]).map((d,j)=>e.jsxs("div",{className:"border p-4 mb-4 rounded-md relative bg-gray-50",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{label:"Employment Status",name:"employment_status",value:d.employment_status||"",onChange:D=>T(m,n,j,D),required:!0,placeholder:"Select employment status",items:[{label:"Employed",value:"employed"},{label:"Unemployed",value:"unemployed"},{label:"Underemployed",value:"under_employed"},{label:"Self-Employed",value:"self_employed"},{label:"Retired",value:"retired"},{label:"Student",value:"student"},{label:"Not Applicable",value:"not_applicable"}]}),(s==null?void 0:s[`families.${m}.members.${n}.occupations.${j}.employment_status`])&&e.jsx("p",{className:"text-red-500 text-xs",children:s[`families.${m}.members.${n}.occupations.${j}.employment_status`]})]}),e.jsx("div",{children:e.jsx(k,{label:"Occupation",name:"occupation",value:d.occupation||"",onChange:D=>T(m,n,j,D),placeholder:"Select or Enter Occupation",items:a,disabled:d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{children:e.jsx(W,{label:"Employment Type",name:"employment_type",value:d.employment_type||"",onChange:D=>T(m,n,j,D),placeholder:"Select employment type",items:[{label:"Full-time",value:"full_time"},{label:"Part-time",value:"part_time"},{label:"Seasonal",value:"seasonal"},{label:"Contractual",value:"contractual"},{label:"Self-employed",value:"self_employed"}],disabled:d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{children:e.jsx(W,{label:"Occupation Status",name:"occupation_status",value:d.occupation_status||"",onChange:D=>T(m,n,j,D),placeholder:"Select occupation status",items:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Ended",value:"ended"},{label:"Retired",value:"retired"},{label:"Terminated",value:"terminated"},{label:"Resigned",value:"resigned"}],disabled:d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{children:e.jsx(W,{label:"Work Arrangement",name:"work_arrangement",value:d.work_arrangement||"",onChange:D=>T(m,n,j,D),items:[{label:"Remote",value:"remote"},{label:"Onsite",value:"on_site"},{label:"Hybrid",value:"hybrid"}],disabled:d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{children:e.jsx(E,{label:"Employer Name",name:"employer",type:"text",value:d.employer||"",onChange:D=>T(m,n,j,D),placeholder:"Enter employer name",disabled:d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{children:e.jsx(K,{label:"Year Started",name:"started_at",value:d.started_at||"",onChange:D=>T(m,n,j,D),disabled:d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{children:e.jsx(K,{label:"Year Ended",name:"ended_at",value:d.ended_at||"",onChange:D=>T(m,n,j,D),disabled:d.occupation_status==="active"||d.occupation_status==="inactive"||d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{children:e.jsx(W,{label:"Income Frequency",name:"frequency",value:d.frequency||"",onChange:D=>T(m,n,j,D),items:[{label:"Daily",value:"daily"},{label:"Weekly",value:"weekly"},{label:"Bi-Weekly",value:"bi-weekly"},{label:"Monthly",value:"monthly"},{label:"Annually",value:"annually"}],placeholder:"Select frequency",disabled:d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{children:e.jsx(E,{type:"number",label:"Income",name:"income",value:d.income||"",onChange:D=>T(m,n,j,D),placeholder:"Enter income",disabled:d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{className:"hidden",children:e.jsx(E,{type:"number",label:"Monthly Income",name:"monthly_income",value:d.monthly_income||"",onChange:D=>T(m,n,j,D),placeholder:"Auto-computed",disabled:!0})}),e.jsx("div",{children:e.jsx(L,{label:"Main Source of Income?",name:"is_main_source",selectedValue:d.is_main_source||"",options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:D=>T(m,n,j,D),required:!0,disabled:d.employment_status==="unemployed"||d.employment_status==="not_applicable"})}),e.jsx("div",{children:e.jsx(L,{label:"Overseas Filipino Worker",name:"is_ofw",selectedValue:d.is_ofw||"",options:[{label:"Yes",value:1},{label:"No",value:0}],onChange:D=>T(m,n,j,D),required:!0})})]}),e.jsx("button",{type:"button",onClick:()=>_(m,n,j),className:"absolute top-1 right-2 flex items-center gap-1 text-sm text-red-400 hover:text-red-800 font-medium mt-1 mb-5 transition-colors duration-200",children:e.jsx(Y,{className:"text-2xl"})})]},j)),e.jsxs("button",{type:"button",className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 font-medium mt-4 transition-colors duration-200",onClick:()=>N(m,n),children:[e.jsx(G,{className:"text-4xl"})," ",e.jsx("span",{children:"Add Occupation"})]}),e.jsxs("div",{className:"hidden",children:[e.jsx(E,{label:"Family Monthly Income",name:"family_monthly_income",value:((C=y.household)==null?void 0:C.family_monthly_income)||"",readOnly:!0}),e.jsx(k,{label:"Income Bracket",name:"income_bracket",value:((h=y.household)==null?void 0:h.income_bracket)||"",items:[((u=y.household)==null?void 0:u.income_bracket)||""],readOnly:!0}),e.jsx(k,{label:"Income Category",name:"income_category",value:((S=y.household)==null?void 0:S.income_category)||"",items:[((A=y.household)==null?void 0:A.income_category)||""],readOnly:!0})]})]})]},n)})})]},m)})]})}function ps(){const{userData:l,setUserData:y,errors:o}=g.useContext(q),s=l.livestocks||[],x=l.pets||[],$=_=>{const{name:a,value:b}=_.target;y(p=>({...p,[a]:b}))},R=(_,a)=>{const{name:b,value:p}=a.target,v=[...s];v[_]={...v[_],[b]:p},y(m=>({...m,livestocks:v}))},F=()=>{const _=[...s,{}];y(a=>({...a,livestocks:_}))},H=_=>{const a=[...l.livestocks||[]];a.splice(_,1),y(b=>({...b,livestocks:a}))},f=(_,a)=>{const{name:b,value:p}=a.target,v=[...x];v[_]={...v[_],[b]:p},y(m=>({...m,pets:v}))},w=()=>{const _=[...x,{}];y(a=>({...a,pets:_}))},U=_=>{const a=[...l.pets||[]];a.splice(_,1),y(b=>({...b,pets:a}))},P=(_,a={})=>{const p=[...l[_]||[],a];y(v=>({...v,[_]:p}))},T=(_,a)=>{const b=[...l[_]||[]];b.splice(a,1),y(p=>({...p,[_]:b}))},N=(_,a,b)=>{const{name:p,value:v}=b.target,m=[...l[_]||[]];m[a]={...m[a],[p]:v},y(c=>({...c,[_]:m}))};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1 mt-1",children:"House Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Please provide the necessary house information to continue."}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{label:"Ownership Type",name:"ownership_type",value:l.ownership_type||"",onChange:$,placeholder:"Select or enter ownership type",items:[{label:"Owned",value:"owned"},{label:"Rented",value:"rented"},{label:"Shared",value:"shared"},{label:"Government-provided",value:"government_provided"},{label:"Inherited",value:"inherited"}]}),o.ownership_type&&e.jsx("p",{className:"text-red-500 text-xs",children:o.ownership_type})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Housing Condition",name:"housing_condition",value:l.housing_condition||"",onChange:$,placeholder:"Select house condition",items:[{label:"Good",value:"good"},{label:"Needs Repair",value:"needs_repair"},{label:"Dilapidated",value:"dilapidated"}]}),o.housing_condition&&e.jsx("p",{className:"text-red-500 text-xs",children:o.housing_condition})]}),e.jsxs("div",{children:[e.jsx(k,{label:"House Structure",name:"house_structure",value:l.house_structure,onChange:$,placeholder:"Select or Enter house structure",items:[{label:"Concrete",value:"concrete"},{label:"Semi-concrete",value:"semi_concrete"},{label:"Wood",value:"wood"},{label:"Makeshift",value:"makeshift"}]}),o.house_structure&&e.jsx("p",{className:"text-red-500 text-xs",children:o.house_structure})]}),e.jsxs("div",{children:[e.jsx(K,{label:"Year Established",name:"year_established",value:l.year_established,onChange:$,placeholder:"Select year"}),o.year_established&&e.jsx("p",{className:"text-red-500 text-xs",children:o.year_established})]}),e.jsxs("div",{children:[e.jsx(E,{type:"number",label:"Number of Rooms",name:"number_of_rooms",value:l.number_of_rooms||"",onChange:$,placeholder:"Enter number of rooms"}),o.number_of_rooms&&e.jsx("p",{className:"text-red-500 text-xs",children:o.number_of_rooms})]}),e.jsxs("div",{children:[e.jsx(E,{type:"number",label:"Number of Floors",name:"number_of_floors",value:l.number_of_floors||"",onChange:$,placeholder:"Enter number of floors"}),o.number_of_rooms&&e.jsx("p",{className:"text-red-500 text-xs",children:o.number_of_rooms})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Bath and Wash Area",name:"bath_and_wash_area",value:l.bath_and_wash_area||"",onChange:$,placeholder:"Select or Enter",items:[{label:"With own sink and bath",value:"with_own_sink_and_bath"},{label:"With own sink only",value:"with_own_sink_only"},{label:"With own bath only",value:"with_own_bath_only"},{label:"Shared or communal",value:"shared_or_communal"},{label:"None",value:"none"}]}),o.bath_and_wash_area&&e.jsx("p",{className:"text-red-500 text-xs",children:o.bath_and_wash_area})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Internet Connection Type",name:"type_of_internet",value:l.type_of_internet||"",onChange:$,placeholder:"Select internet connection type",items:[{label:"Mobile Data",value:"mobile_data"},{label:"Wireless Fidelity (Wi-Fi)",value:"wireless_fidelity"},{label:"None",value:"none"}]}),o.type_of_internet&&e.jsx("p",{className:"text-red-500 text-xs",children:o.type_of_internet})]}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[(l.toilets||[]).map((_,a)=>e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{children:[e.jsx(k,{label:" Type of Toilet(s)",name:"toilet_type",value:_.toilet_type||"",onChange:b=>N("toilets",a,b),placeholder:"Select or enter toilet type",items:[{label:"Water sealed",value:"water_sealed"},{label:"Compost pit toilet",value:"compost_pit_toilet"},{label:"Shared communal public toilet",value:"shared_communal_public_toilet"},{label:"Shared or communal",value:"shared_or_communal"},{label:"No latrine",value:"no_latrine"}]}),(o==null?void 0:o[`toilets.${a}.toilet_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`toilets.${a}.toilet_type`]})]}),l.toilets.length>1&&e.jsx("button",{type:"button",onClick:()=>T("toilets",a),className:"text-red-500 hover:text-red-700 text-xl",children:e.jsx(Y,{})})]},a)),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>P("toilets",{toilet_type:""}),className:"text-blue-600 hover:text-blue-800 text-3xl",children:e.jsx(G,{})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Add another type of toilet"})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[(l.electricity_types||[]).map((_,a)=>e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{children:[e.jsx(k,{label:"Electricity Source(s)",name:"electricity_type",value:_.electricity_type||"",onChange:b=>N("electricity_types",a,b),placeholder:"Select electricity source",items:[{label:"ISELCO II",value:"distribution_company_iselco_ii"},{label:"Generator",value:"generator"},{label:"Solar / Renewable",value:"solar_renewable_energy_source"},{label:"Battery",value:"battery"},{label:"None",value:"none"}]}),(o==null?void 0:o[`electricity_types.${a}.electricity_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`electricity_types.${a}.electricity_type`]})]}),l.electricity_types.length>1&&e.jsx("button",{type:"button",onClick:()=>T("electricity_types",a),className:"text-red-500 hover:text-red-700 text-xl",children:e.jsx(Y,{})})]},a)),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>P("electricity_types",{electricity_type:""}),className:"text-blue-600 hover:text-blue-800 text-3xl",children:e.jsx(G,{})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Add electricity source"})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[(l.water_source_types||[]).map((_,a)=>e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{children:[e.jsx(k,{label:"Water Source(s)",name:"water_source_type",value:_.water_source_type||"",onChange:b=>N("water_source_types",a,b),placeholder:"Select water source",items:[{label:"Level II",value:"level_ii_water_system"},{label:"Level III",value:"level_iii_water_system"},{label:"Deep Well",value:"deep_well_level_i"},{label:"Artesian Well",value:"artesian_well_level_i"},{label:"Shallow Well",value:"shallow_well_level_i"},{label:"Refill Source",value:"commercial_water_refill_source"},{label:"None",value:"none"}]}),(o==null?void 0:o[`water_source_types.${a}.water_source_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`water_source_types.${a}.water_source_type`]})]}),l.water_source_types.length>1&&e.jsx("button",{type:"button",onClick:()=>T("water_source_types",a),className:"text-red-500 hover:text-red-700 text-xl",children:e.jsx(Y,{})})]},a)),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>P("water_source_types",{water_source_type:""}),className:"text-blue-600 hover:text-blue-800 text-3xl",children:e.jsx(G,{})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Add water source"})]})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[(l.waste_management_types||[]).map((_,a)=>e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("div",{children:[e.jsx(k,{label:"Waste Disposal Method(s)",name:"waste_management_type",value:_.waste_management_type||"",onChange:b=>N("waste_management_types",a,b),placeholder:"Select waste disposal method",items:[{label:"Open Dump",value:"open_dump_site"},{label:"Sanitary Landfill",value:"sanitary_landfill"},{label:"Compost Pits",value:"compost_pits"},{label:"Material Recovery",value:"material_recovery_facility"},{label:"Garbage Collected",value:"garbage_is_collected"},{label:"None",value:"none"}]}),(o==null?void 0:o[`waste_management_types.${a}.waste_management_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`waste_management_types.${a}.waste_management_type`]})]}),l.waste_management_types.length>1&&e.jsx("button",{type:"button",onClick:()=>T("waste_management_types",a),className:"text-red-500 hover:text-red-700 text-xl",children:e.jsx(Y,{})})]},a)),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>P("waste_management_types",{waste_management_type:""}),className:"text-blue-600 hover:text-blue-800 text-3xl",children:e.jsx(G,{})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Add waste disposal method"})]})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Livestock Ownership Details"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(L,{label:"Do you have a livestock?",name:"has_livestock",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:l.has_livestock||"",onChange:$}),o.has_livestock&&e.jsx("p",{className:"text-red-500 text-xs",children:o.has_livestock})]}),e.jsx("div",{children:l.has_livestock==1?e.jsxs(e.Fragment,{children:[s.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No livestock added yet."}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:s.map((_,a)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(k,{label:"Livestock animal",name:"livestock_type",value:_.livestock_type||"",onChange:b=>R(a,b),placeholder:"Select or enter type of animal",items:["cattle","carabao","goat","pig","chicken","duck","sheep","horse"]}),(o==null?void 0:o[`livestocks.${a}.livestock_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`livestocks.${a}.livestock_type`]})]}),e.jsxs("div",{children:[e.jsx(E,{label:"Quantity",name:"quantity",value:_.quantity||"",onChange:b=>R(a,b),placeholder:"Enter quantity",type:"number"}),(o==null?void 0:o[`livestocks.${a}.quantity`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`livestocks.${a}.quantity`]})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Purpose",name:"purpose",value:_.purpose||"",onChange:b=>R(a,b),placeholder:"Select purpose",items:[{label:"Personal Consumption",value:"personal_consumption"},{label:"Commercial",value:"commercial"},{label:"Both",value:"both"}]}),(o==null?void 0:o[`livestocks.${a}.purpose`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`livestocks.${a}.purpose`]})]}),e.jsx("button",{type:"button",onClick:()=>H(a),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove livestock",children:e.jsx(Y,{className:"text-2xl"})})]},a))}),e.jsxs("button",{type:"button",onClick:F,className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add livestock",children:[e.jsx(G,{className:"text-2xl"}),"Add Livestock"]})]}):l.has_livestock==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No livestock declared."}):null})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-md mt-3 text-gray-800",children:"Pet Ownership Details"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(L,{label:"Do you have a Pets?",name:"has_pets",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:l.has_pets||"",onChange:$}),o.has_pets&&e.jsx("p",{className:"text-red-500 text-xs",children:o.has_pets})]}),e.jsx("div",{children:l.has_pets==1?e.jsxs(e.Fragment,{children:[x.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No pet added yet."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[x.map((_,a)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(k,{label:"Type of Pet",name:"pet_type",value:_.pet_type||"",onChange:b=>f(a,b),placeholder:"Select or enter type of pet",items:["dog","cat","rabbit"]}),(o==null?void 0:o[`pets.${a}.pet_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`pets.${a}.pet_type`]})]}),e.jsxs("div",{children:[e.jsx(L,{label:"Is the pet vaccinated for rabies?",name:"is_vaccinated",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:_.is_vaccinated||"",onChange:b=>f(a,b)}),(o==null?void 0:o[`pets.${a}.is_vaccinated`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`pets.${a}.is_vaccinated`]})]}),e.jsx("button",{type:"button",onClick:()=>U(a),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove pet",children:e.jsx(Y,{className:"text-2xl"})})]},a)),e.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add pet",children:[e.jsx(G,{className:"text-2xl"}),"Add Pet"]})]})]}):l.has_pets==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No pet declared."}):null})]})]})]})]})}const X={severely_underweight:"Severely Underweight",underweight:"Underweight",normal:"Normal",overweight:"Overweight",obese:"Obese"};function bs(){var N;const{userData:l,setUserData:y,errors:o}=g.useContext(q),s=((N=l.household)==null?void 0:N.families)||[],[x,$]=g.useState(null),[R,F]=g.useState({}),H=_=>{y(a=>({...a,household:{...a.household,families:_}}))},f=(_,a,b,p)=>{if(!_||!a||b==null)return{bmi:null,status:""};const v=a/100,m=_/(v*v);let c="";return b>=20?m<18.5?c=X.underweight:m<=24.9?c=X.normal:m<=29.9?c=X.overweight:c=X.obese:b>=5?m<15?c=X.severely_underweight:m<19?c=X.normal:m<23?c=X.overweight:c=X.obese:m<13?c=X.severely_underweight:m<14?c=X.underweight:m<=18?c=X.normal:m<=20?c=X.overweight:c=X.obese,{bmi:parseFloat(m.toFixed(2)),status:c}},w=(_,a,b)=>{const{name:p,value:v,type:m}=b.target,c=[...s],t=c[_].members[a];m==="number"?t[p]=v===""?"":parseFloat(v):t[p]=v;const{weight_kg:n,height_cm:r,age:i,gender:C}=t;if(n&&r&&i&&C){const{bmi:h,status:u}=f(n,r,i);t.bmi=h,t.nutrition_status=u}H(c)},U=(_,a)=>{const b=[...s],p=b[_].members[a],v=[...p.disabilities||[]];v.push({disability_type:""}),p.disabilities=v,H(b)},P=(_,a,b)=>{const p=[...s],v=p[_].members[a],m=[...v.disabilities||[]];m.splice(b,1),v.disabilities=m,H(p)},T=(_,a,b,p)=>{const{name:v,value:m}=p.target,c=[...s],t=c[_].members[a],n=[...t.disabilities||[]];n[b]={...n[b],[v]:m},t.disabilities=n,H(c)};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1 mt-1",children:"Medical Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Kindly share your medical history and health-related details."}),s.map((_,a)=>e.jsxs("div",{className:"mb-4 border rounded shadow-sm bg-white",children:[e.jsxs("button",{type:"button",className:`w-full text-left p-4 font-semibold flex justify-between items-center
                            ${x===a?"border-t-2 border-blue-600 text-gray-900":"text-gray-700 hover:bg-sky-100"}
                            transition duration-300 ease-in-out`,onClick:()=>$(x===a?null:a),children:[e.jsx("span",{children:_.family_name?`${_.family_name} Family`:`Family ${a+1}`}),x===a?e.jsx(z,{className:"text-xl text-blue-600"}):e.jsx(Q,{className:"text-xl text-blue-600"})]}),x===a&&e.jsx("div",{className:"my-4 space-y-4 mx-4",children:(_.members||[]).map((b,p)=>{const v=R[a]===p,m=`${b.firstname||""} ${b.lastname||""}`.trim();return e.jsxs("div",{className:"mt-3 border rounded bg-white",children:[e.jsxs("button",{type:"button",className:`w-full text-left p-4 font-semibold flex justify-between items-center
                                                ${v?"border-t-2 border-blue-600 text-gray-900":"text-gray-700 hover:bg-sky-100"}
                                                transition duration-300 ease-in-out`,onClick:()=>F(c=>({...c,[a]:c[a]===p?null:p})),children:[e.jsx("span",{children:m||`Member ${p+1}`}),v?e.jsx(z,{className:"text-xl text-blue-600"}):e.jsx(Q,{className:"text-xl text-blue-600"})]}),v&&e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{label:"Weight in Kilogram (kg)",name:"weight_kg",value:b.weight_kg||"",onChange:c=>w(a,p,c),placeholder:"Enter weight in kg",type:"number",step:"0.01"}),(o==null?void 0:o[`families.${a}.members.${p}.weight_kg`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.weight_kg`]})]}),e.jsxs("div",{children:[e.jsx(E,{label:"Height in Centimeter (cm)",name:"height_cm",value:b.height_cm||"",onChange:c=>w(a,p,c),placeholder:"Enter height in cm",type:"number",step:"0.01"}),(o==null?void 0:o[`families.${a}.members.${p}.height_cm`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.height_cm`]})]}),e.jsxs("div",{children:[e.jsx(E,{label:"BMI",name:"bmi",value:b.bmi||"",placeholder:"Auto-calculated BMI",disabled:!0}),(o==null?void 0:o[`families.${a}.members.${p}.bmi`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.bmi`]})]}),e.jsx("div",{children:e.jsx(E,{label:"Nutrition Status",name:"nutrition_status",value:b.nutrition_status||"",placeholder:"Automatically determined",disabled:!0})}),e.jsxs("div",{children:[e.jsx(E,{label:"Emergency contact number",name:"emergency_contact_number",value:b.emergency_contact_number||"",onChange:c=>w(a,p,c),placeholder:"09XXXXXXXXX",type:"text"}),(o==null?void 0:o[`families.${a}.members.${p}.emergency_contact_number`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.emergency_contact_number`]})]}),e.jsxs("div",{children:[e.jsx(E,{label:"Emergency contact name",name:"emergency_contact_name",value:b.emergency_contact_name||"",onChange:c=>w(a,p,c),placeholder:"Enter contact name"}),(o==null?void 0:o[`families.${a}.members.${p}.emergency_contact_name`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.emergency_contact_name`]})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Emergency Contact Relationship",name:"emergency_contact_relationship",value:b.emergency_contact_relationship||"",onChange:c=>w(a,p,c),placeholder:"Select relationship",items:["Mother","Father","Sibling","Child","Grandparent","Relative","Neighbor","Friend","Guardian"]}),(o==null?void 0:o[`families.${a}.members.${p}.emergency_contact_relationship`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.emergency_contact_relationship`]})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Blood Type",name:"blood_type",value:b.blood_type||"",onChange:c=>w(a,p,c),placeholder:"Select blood type",items:["A+","A-","B+","B-","AB+","AB-","O+","O-"]}),(o==null?void 0:o[`families.${a}.members.${p}.blood_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.blood_type`]})]}),e.jsxs("div",{children:[e.jsx(L,{label:"Are you a PhilHealth member?",name:"has_philhealth",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:b.has_philhealth??"",onChange:c=>w(a,p,c)}),(o==null?void 0:o[`families.${a}.members.${p}.has_philhealth`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.has_philhealth`]})]}),b.has_philhealth==1&&e.jsxs("div",{children:[e.jsx(E,{label:"PhilHealth ID number",name:"philhealth_id_number",value:b.philhealth_id_number||"",onChange:c=>w(a,p,c),placeholder:"Enter PhilHealth id number"}),(o==null?void 0:o[`families.${a}.members.${p}.philhealth_id_number`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.philhealth_id_number`]})]}),e.jsxs("div",{children:[e.jsx(L,{label:"Do you consume alcohol?",name:"is_alcohol_user",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:b.is_alcohol_user??"",onChange:c=>w(a,p,c)}),(o==null?void 0:o[`families.${a}.members.${p}.is_alcohol_user`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.is_alcohol_user`]})]}),e.jsxs("div",{children:[e.jsx(L,{label:"Do you smoke?",name:"is_smoker",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:b.is_smoker??"",onChange:c=>w(a,p,c)}),(o==null?void 0:o[`families.${a}.members.${p}.is_smoker`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.is_smoker`]})]}),e.jsxs("div",{children:[e.jsx(L,{label:"Do you have a disability?",name:"is_pwd",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:b.is_pwd??"",onChange:c=>w(a,p,c)}),(o==null?void 0:o[`families.${a}.members.${p}.is_pwd`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.is_pwd`]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-x-6 items-start",children:b.is_pwd==1&&e.jsxs("div",{className:"flex flex-col gap-4 mt-2",children:[e.jsx(E,{label:"PWD ID number",name:"pwd_id_number",value:b.pwd_id_number||"",onChange:c=>w(a,p,c),placeholder:"PWD-XXX-XXXXXXX"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Disability type(s)"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[(b.disabilities||[]).map((c,t)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx(E,{type:"text",name:"disability_type",value:c.disability_type||"",onChange:n=>T(a,p,t,n),placeholder:"Enter disability type"}),(o==null?void 0:o[`families.${a}.members.${p}.disabilities.${t}.disability_type`])&&e.jsx("p",{className:"text-red-500 text-xs",children:o[`families.${a}.members.${p}.disabilities.${t}.disability_type`]})]}),e.jsx("button",{type:"button",onClick:()=>P(a,p,t),className:"text-red-500 hover:text-red-700 text-xl",title:"Remove",children:e.jsx(Y,{})})]},t)),e.jsx("button",{type:"button",onClick:()=>U(a,p),className:"text-blue-600 hover:text-blue-800 text-2xl",title:"Add disability",children:e.jsx(G,{})})]})]})]})})]})]},p)})})]},a))]})}function tt({puroks:l,streets:y,barangays:o,occupationTypes:s}){const x=[{label:"Residents Information",showOnMobile:!1},{label:"Residents Table",href:route("resident.index"),showOnMobile:!1},{label:"Add Household",showOnMobile:!0}],[$,R]=g.useState(1),[F,H]=g.useState({toilets:[{toilet_type:""}],electricity_types:[{electricity_type:""}],water_source_types:[{water_source_type:""}],waste_management_types:[{waste_management_type:""}]}),[f,w]=g.useState([]),[U,P]=g.useState({}),T=["Address Information","Household Information","Education & Occupation","Medical Information","House Information","Summary"];g.useEffect(()=>{localStorage.setItem("householdFormData",JSON.stringify(F))},[F]),g.useEffect(()=>{localStorage.setItem("currentStep",$)},[$]);const N=v=>{switch(v){case 1:return e.jsx(as,{puroks:l,streets:y});case 2:return e.jsx(ds,{barangays:o});case 3:return e.jsx(hs,{occupationTypes:s});case 4:return e.jsx(bs,{});case 5:return e.jsx(ps,{});case 6:return e.jsx(us,{streets:y});default:return null}},_=v=>{let m=$;if(v==="next"){if($===T.length){de.post(route("resident.storehousehold"),F,{onSuccess:()=>{J.success("Household data submitted successfully!",{duration:3e3,closeButton:!0}),localStorage.removeItem("householdFormData"),localStorage.removeItem("currentStep"),H({toilets:[{toilet_type:""}],electricity_types:[{electricity_type:""}],water_source_types:[{water_source_type:""}],waste_management_types:[{waste_management_type:""}]}),R(1)},onError:c=>{P(c);const t=Object.values(c).join("<br />");J.error("Validation Errors",{description:e.jsx("div",{dangerouslySetInnerHTML:{__html:t}}),duration:5e3,closeButton:!0})}});return}m++}else m--;m>0&&m<=T.length&&R(m)},a=re().props,b=(a==null?void 0:a.success)??null,p=(a==null?void 0:a.error)??null;return ae(),g.useEffect(()=>{b&&J.success(b,{description:"Operation successful!",duration:3e3,closeButton:!0}),a.success=null},[b]),g.useEffect(()=>{p&&J.error(p,{description:"Operation failed!",duration:3e3,closeButton:!0}),a.error=null},[p]),e.jsxs(ue,{children:[e.jsx(ts,{richColors:!0}),e.jsx(ce,{title:"Resident Dashboard"}),e.jsx(me,{breadcrumbs:x}),e.jsxs("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8 mt-6",children:[e.jsx("div",{className:"bg-blue-100 rounded-t-xl px-2 sm:px-6 lg:px-8 py-2 border-gray-200 shadow-lg",children:e.jsx(he,{steps:T,currentStep:$})}),e.jsx("div",{className:"overflow-hidden bg-white border border-gray-200 rounded-b-xl p-2 drop-shadow-[0_4px_6px_rgba(0,0,0,0.1)]",children:e.jsx("div",{className:"my-2 pb-5 pr-5 pl-5 pt-0",children:e.jsx(q.Provider,{value:{userData:F,setUserData:H,finalData:f,setFinalData:w,errors:U,setErrors:P},children:N($)})})}),e.jsx("div",{className:"mt-5",children:e.jsx(pe,{handleClick:_,currentStep:$,steps:T,userData:F})})]})]})}export{tt as default};
