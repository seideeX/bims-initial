import{r as g,j as e,V as j,R as D,O as ke,K as $e,L as Ge,S as We}from"./app-CDPwVV6Y.js";import Ve from"./BreadcrumbsHeader-BOSIhs5m.js";import{S as Ue}from"./AdminLayout-BW3ywimG.js";import{S as C,a as Ye,b as Je}from"./StepperContext-BlppoemL.js";import{I as z}from"./InputField-D_ZI8EKx.js";import{C as Qe,a as Ie}from"./chevron-up-BBBA9wsx.js";import{t as R,a as $,b as Ke}from"./stringFormat-Dx_XIxG1.js";import{t as q,T as Xe}from"./index-CH7DWExs.js";import{X as Y}from"./x-rg4AgZHH.js";import{S as J}from"./SelectField-DIeNwIQe.js";import{c as De}from"./createLucideIcon-B4SoG9zf.js";import{C as Q}from"./check-BsJSkZwI.js";import{P as Ze}from"./nav-user-BTW7oy-u.js";import"./index-Dsz93ONd.js";import{c as et}from"./button-B_aprJyo.js";import{c as tt}from"./utils-CkmPJWYF.js";import"./breadcrumb-DsnADmME.js";import"./chevron-right-DYtVQaAj.js";import"./sidebar-BqlEtGlg.js";import"./input-DTbtaxsV.js";import"./index-8Tef56KC.js";import"./floating-ui.react-dom-VvtSZ_DO.js";import"./tooltip-10O7WS77.js";import"./useAppUrl-BIsbUUVL.js";import"./DeleteConfirmationModal-DcMwm5QA.js";import"./file-text-DhLfxzDZ.js";import"./users-round-BK2vts8v.js";import"./heart-pulse-BRIexC2Z.js";import"./index-D4O4cOmu.js";import"./iconBase-DNpEM3Pe.js";import"./index-BDJITxkD.js";import"./avatar-p9YAZDXV.js";import"./dropdown-menu-DFrz86N0.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M5 12h14",key:"1ays0h"}]],Se=De("minus",st);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],at=De("square",rt);function k({title:t,children:a,defaultOpen:m=!1}){const[c,b]=g.useState(m);return e.jsxs("div",{className:"border border-gray-200 rounded-lg shadow-sm mb-2 overflow-hidden",children:[e.jsxs("button",{onClick:()=>b(!c),className:"w-full flex justify-between items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors duration-200",children:[e.jsx("span",{className:"font-medium text-gray-800",children:t}),c?e.jsx(Qe,{className:"w-5 h-5 text-gray-600"}):e.jsx(Ie,{className:"w-5 h-5 text-gray-600"})]}),c&&e.jsx("div",{className:"p-4 bg-white border-t border-gray-200 animate-fadeIn",children:a})]})}const A=["Farming","Fishing","Poultry and Livestock","Carpentry","Professional","Government Employee","Private Employee","Brgy. Official or Staff","Businessman/woman","Formal/Licensed Driver","Non-Licensed Driver","Porter","Masseuse","House Helper","Electrician","Laborer","Miner","Lender","Call Center Agent","Medical Transcriptionist","Virtual Assistant"],M=[{category:"Electricity Source",rows:[{type:"Distribution Company (ISELCO-II)",households:""},{type:"Generator",households:""},{type:"Solar (renewable energy source)",households:""},{type:"Battery",households:""},{type:"None",households:""}]},{category:"Bath and Wash Area",rows:[{type:"With own Sink and Bath",households:""},{type:"Shared or Communal",households:""},{type:"Separate Bathroom",households:""}]},{category:"Water Source",rows:[{type:"Level II Water System",households:""},{type:"Level III Water System",households:""},{type:"Deep Well (Level I)",households:""},{type:"Artesian Well (Level I)",households:""},{type:"Shallow Well (Level I)",households:""},{type:"Commercial Water Refill Source",households:""}]},{category:"Waste Management",rows:[{type:"Open Dump Site",households:""},{type:"Sanitary Landfill",households:""},{type:"Compost Pits",households:""},{type:"Material Recovery Facility (MRF)",households:""},{type:"Garbage is collected",households:""}]},{category:"Toilet",rows:[{type:"Water Sealed",households:""},{type:"Compost Pit Toilet",households:""},{type:"Shared or Communal Toilet/Public Toilet",households:""},{type:"No Latrine",households:""},{type:"Flash Toilet",households:""}]}],T=[{category:"Facilities and Services",rows:[{type:"Multi-Purposes Hall",quantity:""},{type:"Barangay Women and Chidren Protection Desk",quantity:""},{type:"Barangay Tanonds and Barangay Peacekeeping Action Teams Post",quantity:""},{type:"Bureau of Jail Management and Penology",quantity:""},{type:"Philippine National Police Outpost",quantity:""},{type:"Bank",quantity:""},{type:"Post Office",quantity:""},{type:"Market",quantity:""}]},{category:"Public Transportation",rows:[{type:"Bus",quantity:""},{type:"Taxi",quantity:""},{type:"Van/FX",quantity:""},{type:"Jeepney",quantity:""},{type:"Tricyle",quantity:""},{type:"Pedicab",quantity:""},{type:"Boat",quantity:""}]},{category:"Road Types",rows:[{type:"Concrete",length:"",maintained_by:""},{type:"Asphalt",length:"",maintained_by:""},{type:"Gravel",length:"",maintained_by:""},{type:"Natural Earth Surface",length:"",maintained_by:""}]}],L=[{category:"Health and Medical Facilities",rows:[{type:"Evacuation Center",households:""},{type:"Flood Control",households:""},{type:"Rain Water Harvester (Communal)",households:""},{type:"Barangay Disaster Operation Center",households:""},{type:"Public Comfort Room/Toilet",households:""},{type:"Community Garden",households:""},{type:"Barangay Health Center",households:""},{type:"Hospital",households:""},{type:"Maternity Clinic",households:""},{type:"Barangay Drug Store",households:""},{type:"City/Municipal Public Drug Store",households:""},{type:"Private Drug Store",households:""},{type:"Quarantine/Isolation Facility",households:""}]},{category:"Education Facilities",rows:[{type:"Child Development Center",households:""},{type:"Preschool",households:""},{type:"Elementary",households:""},{type:"Secondary",households:""},{type:"Vocational",households:""},{type:"College/University",households:""},{type:"Islamic School",households:""}]},{category:"Agricultural Facilities",rows:[{type:"Rice Mill",households:""},{type:"Corn Mill",households:""},{type:"Feed Mill",households:""},{type:"Agriculture Produce Market",households:""}]}],U=["male_no_dis","male_dis","female_no_dis","female_dis","lgbtq_no_dis","lgbtq_dis"],Ee=t=>U.reduce((a,m)=>a+(Number(t[m])||0),0),nt=(t,a)=>(t==null?void 0:t.reduce((m,c)=>m+(Number(c[a])||0),0))||"",ot=t=>(t==null?void 0:t.reduce((a,m)=>a+Ee(m),0))||"",lt=D.memo(function({data:a,defaultLivelihoodTypes:m,updateRow:c,updateType:b,removeRow:u,addRow:p}){return e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Primary Livelihood of Residents"}),e.jsxs("p",{className:"text-sm text-gray-600 italic mb-2",children:[e.jsx("strong",{children:"Note:"})," Leave a cell blank if the value is zero. Default livelihoods cannot be removed or edited."]}),e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"3",className:"border px-2 py-1 w-[250px]",children:"Type of Livelihood"}),e.jsx("th",{colSpan:"6",className:"border px-2 py-1 text-center",children:"NUMBER"}),e.jsx("th",{rowSpan:"3",className:"border px-2 py-1",children:"Total"}),e.jsx("th",{rowSpan:"3",className:"border px-2 py-1 !border-0 w-10"})]}),e.jsxs("tr",{children:[e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Male"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Female"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"LGBTQ+"})]}),e.jsx("tr",{children:["Without Disability","With Disability","Without Disability","With Disability","Without Disability","With Disability"].map((l,s)=>e.jsx("th",{className:"border px-2 py-1",children:l},s))})]}),e.jsx("tbody",{children:a.map((l,s)=>{const i=m.includes(l.type);return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:i?e.jsx("span",{className:"block w-full p-1 bg-gray-50 text-gray-700",children:l.type}):e.jsx("input",{type:"text",className:"w-full border p-1",value:l.type,placeholder:"Enter livelihood type",onChange:o=>b(s,R(o.target.value))})}),U.map(o=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",min:"0",className:"w-full border p-1 text-center",value:l[o]??"",onChange:r=>c(s,o,r.target.value)})},o)),e.jsx("td",{className:"border px-2 py-1 font-semibold text-center bg-gray-50",children:Ee(l)||""}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:!i&&e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>u(s),title:"Remove this row",children:"✕"})})]},s)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),U.map(l=>e.jsx("td",{className:"border px-2 py-1 text-center",children:nt(a,l)},l)),e.jsx("td",{className:"border px-2 py-1 text-center",children:ot(a)}),e.jsx("td",{className:"!border-0"})]})})]}),e.jsxs("div",{className:"flex items-start justify-between mt-3",children:[e.jsx("button",{onClick:p,className:"text-xs px-2 py-1 border border-blue-500 text-blue-600 rounded-md font-medium hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:"+ Add new row"}),e.jsxs("p",{className:"text-sm text-gray-600 italic",children:[e.jsx("strong",{children:"Note:"})," Add a new row if the livelihood type is not specified."]})]})]})}),oe=D.memo(function({category:a,catIdx:m,defaultCategoryRows:c,updateRow:b,removeRow:u,addRow:p}){const l=c.map(s=>s.type);return e.jsxs("div",{className:"flex flex-col border rounded",children:[e.jsx("h3",{className:"font-semibold text-md mb-2 p-2",children:a.category}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[300px]",children:"Type"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Households"}),e.jsx("th",{className:"px-2 py-1 text-center !border-0 w-10"})]})}),e.jsx("tbody",{children:a.rows.map((s,i)=>{const o=l.includes(s.type);return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:o?e.jsx("span",{className:"block w-full p-1 bg-gray-50 text-gray-700",children:s.type}):e.jsx("input",{type:"text",className:"w-full border p-1",value:s.type,placeholder:"Enter type",onChange:r=>{o?j.error("Default infrastructure types cannot be edited."):b(m,i,"type",R(r.target.value))}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",min:"0",className:"w-full border p-1 text-center",value:s.households??"",onChange:r=>b(m,i,"households",r.target.value)})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:!o&&e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>u(m,i),title:"Remove this row",children:"✕"})})]},i)})})]})}),e.jsxs("div",{className:"flex items-start justify-between p-2 mt-2",children:[e.jsxs("button",{onClick:()=>p(m),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add new row"]}),e.jsxs("p",{className:"text-xs text-gray-600 italic",children:[e.jsx("strong",{children:"Note:"})," Add a new row if needed."]})]})]})});function it(){var i,o;const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{a(r=>{var n,d,h,x;return(n=r.livelihood)!=null&&n.length&&((d=r.infrastructure)!=null&&d.length)?r:{...r,livelihood:(h=r.livelihood)!=null&&h.length?r.livelihood:A.map(y=>({type:y,male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""})),infrastructure:(x=r.infrastructure)!=null&&x.length?r.infrastructure:M}})},[a]);const m=g.useCallback((r,n,d)=>{a(h=>{const x=[...h.livelihood];return x[r]={...x[r],[n]:d===""?"":Number(d)},{...h,livelihood:x}})},[a]),c=g.useCallback((r,n)=>{a(d=>{const h=[...d.livelihood];return A.includes(h[r].type)?j.error("Default livelihood types cannot be edited."):h[r]={...h[r],type:n},{...d,livelihood:h}})},[a]),b=g.useCallback(()=>{a(r=>({...r,livelihood:[...r.livelihood,{type:"",male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""}]})),j.success("Row added!")},[a]),u=g.useCallback(r=>{a(n=>{const d=n.livelihood[r];return A.includes(d.type)?(j.error("Default livelihood rows cannot be removed."),n):(j.error("Row removed!"),{...n,livelihood:n.livelihood.filter((x,y)=>y!==r)})})},[a]),p=g.useCallback((r,n,d,h)=>{a(x=>{const y=x.infrastructure.map((f,N)=>N===r?{...f,rows:f.rows.map((v,w)=>w!==n?v:{...v,[d]:d==="households"?h===""?"":Number(h):h})}:f);return{...x,infrastructure:y}})},[a]),l=g.useCallback(r=>{a(n=>{const d=n.infrastructure.map((h,x)=>x===r?{...h,rows:[...h.rows,{type:"",households:""}]}:h);return{...n,infrastructure:d}}),j.success("New row added!")},[a]),s=g.useCallback((r,n)=>{a(d=>{const x=d.infrastructure[r].rows[n];if(M[r].rows.some(v=>v.type===x.type))return j.error("Default infrastructure rows cannot be removed."),d;j.error("Row removed!");const N=d.infrastructure.map((v,w)=>w===r?{...v,rows:v.rows.filter((S,P)=>P!==n)}:v);return{...d,infrastructure:N}})},[a]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{title:"B. Information on Livelihood",children:e.jsx(lt,{data:t.livelihood||[],defaultLivelihoodTypes:A,updateRow:m,updateType:c,removeRow:u,addRow:b})}),e.jsx(k,{title:"C. Infrastructures and Institutions that provide services to the Barangay",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 italic mb-2",children:[e.jsx("strong",{children:"Note:"})," Leave a cell blank if the value is zero."]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:(i=t.infrastructure)==null?void 0:i.slice(0,3).map((r,n)=>e.jsx(oe,{category:r,catIdx:n,defaultCategoryRows:M[n].rows,updateRow:p,removeRow:s,addRow:l},n))}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:(o=t.infrastructure)==null?void 0:o.slice(3).map((r,n)=>e.jsx(oe,{category:r,catIdx:n+3,defaultCategoryRows:M[n+3].rows,updateRow:p,removeRow:s,addRow:l},n+3))})]})})]})}const ct=D.memo(function({category:a,catIdx:m,defaultCategoryRows:c,updateRow:b,removeRow:u,addRow:p}){const l=c.map(s=>s.type);return e.jsxs("div",{className:"flex flex-col border rounded",children:[e.jsx("h3",{className:"font-semibold text-md mb-2 p-2",children:a.category}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[400px]",children:"Type"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Households"}),e.jsx("th",{className:"px-2 py-1 text-center !border-0 w-[40px]"})]})}),e.jsx("tbody",{children:a.rows.map((s,i)=>{const o=l.includes(s.type);return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:o?e.jsx("span",{className:"block w-full p-1 bg-gray-50 text-gray-700",children:s.type}):e.jsx("input",{type:"text",className:"w-full border p-1",value:s.type,placeholder:"Enter type",onChange:r=>b(m,i,"type",R(r.target.value))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",min:"0",className:"w-full border p-1 text-center",value:s.households??"",onChange:r=>b(m,i,"households",r.target.value)})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:!o&&e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>u(m,i),title:"Remove this row",children:"✕"})})]},i)})})]})}),e.jsx("div",{className:"p-2 mt-auto",children:e.jsx("button",{onClick:()=>p(m),className:"text-xs px-2 py-1 border border-blue-500 text-blue-600 rounded-md font-medium hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:"+ Add new row"})})]})}),le=D.memo(function({category:a,catIdx:m,defaultCategoryRows:c,updateRow:b,removeRow:u,addRow:p}){var r;const l=((r=a.rows)==null?void 0:r[0])||(c==null?void 0:c[0])||{},s=Object.keys(l).filter(n=>n!=="type"),i=c.map(n=>n.type),o={quantity:"Quantity",length:"Length of Road (km)",maintained_by:"Who Maintains the Road Network"};return e.jsxs("div",{className:"flex flex-col border rounded",children:[e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[400px]",children:a.category}),s.map(n=>e.jsx("th",{className:"border px-2 py-1 text-center",children:o[n]||R(n.replace(/_/g," "))},n)),e.jsx("th",{className:"px-2 py-1 text-center !border-0 w-[40px]"})]})}),e.jsx("tbody",{children:a.rows.map((n,d)=>{const h=i.includes(n.type);return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:h?e.jsx("span",{className:"block w-full p-1 bg-gray-50 text-gray-700",children:n.type}):e.jsx("input",{type:"text",className:"w-full border p-1",value:n.type,placeholder:"Enter type",onChange:x=>b(m,d,"type",R(x.target.value))})}),s.map(x=>e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:x==="quantity"||x==="length"?"number":"text",min:x==="quantity"||x==="length"?0:void 0,className:"w-full border p-1 text-center",value:n[x]??"",onChange:y=>{let f=y.target.value;if(x==="quantity"||x==="length"){if(!/^\d*\.?\d*$/.test(f))return;f<0&&(f=0)}b(m,d,x,f)}})},x)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:!h&&e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>u(m,d),title:"Remove this row",children:"✕"})})]},d)})})]})}),e.jsx("div",{className:"p-2 mt-auto",children:e.jsxs("button",{onClick:()=>p(m),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add new row"]})})]})});function dt(){var s,i,o;const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{a(r=>{const n={...r};return(!n.buildings||n.buildings.length===0)&&(n.buildings=JSON.parse(JSON.stringify(L))),(!n.facilities||n.facilities.length===0)&&(n.facilities=JSON.parse(JSON.stringify(T))),n})},[a]),g.useEffect(()=>{(!t.facilities||t.facilities.length===0)&&a(r=>({...r,facilities:JSON.parse(JSON.stringify(T))}))},[t.facilities,a]);const m=g.useCallback((r,n,d,h)=>{a(x=>{const y=[...x.buildings];if(!y[r]||!y[r].rows||!y[r].rows[n])return console.error("Invalid indices for updateBuildingRow:",r,n),x;if(L[r].rows.some(S=>S.type===y[r].rows[n].type)&&d==="type")return j.error("Default building types cannot be edited."),x;const v={...y[r].rows[n]};v[d]=d==="households"?h===""?"":Number(h):h;const w=[...y[r].rows];return w[n]=v,y[r]={...y[r],rows:w},{...x,buildings:y}})},[a]),c=g.useCallback(r=>{a(n=>{const d=[...n.buildings],h={...d[r]};Array.isArray(h.rows)||(h.rows=[]);const x=[...h.rows,{type:"",households:""}];return h.rows=x,d[r]=h,j.success(`New row added to "${h.category}"`),{...n,buildings:d}})},[a]),b=g.useCallback((r,n)=>{a(d=>{const h=[...d.buildings];if(!h[r]||!h[r].rows||!h[r].rows[n])return console.error("Invalid indices for removeBuildingRow:",r,n),d;const x=h[r].rows[n];if(L[r].rows.some(w=>w.type===x.type))return j.error("Default building rows cannot be removed."),d;const N=x.type||"row",v=h[r].rows.filter((w,S)=>S!==n);return h[r]={...h[r],rows:v},j.error(`Removed "${N}" from "${h[r].category}"`),{...d,buildings:h}})},[a]),u=g.useCallback((r,n,d,h)=>{a(x=>{const y=[...x.facilities];if(!y[r]||!y[r].rows||!y[r].rows[n])return console.error("Invalid indices for updateFacilityRow:",r,n),x;if(T[r].rows.some(S=>S.type===y[r].rows[n].type)&&d==="type")return j.error("Default facility types cannot be edited."),x;const v={...y[r].rows[n]};v[d]=d==="quantity"||d==="length"?h===""?"":Number(h):h;const w=[...y[r].rows];return w[n]=v,y[r]={...y[r],rows:w},{...x,facilities:y}})},[a]),p=g.useCallback(r=>{a(n=>{const d=[...n.facilities],h={...d[r]},x=h==null?void 0:h.category;let y={type:""};x==="Facilities and Services"||x==="Public Transportation"?y.quantity="":x==="Road Types"&&(y.length="",y.maintained_by=""),Array.isArray(h.rows)||(h.rows=[]);const f=[...h.rows,y];return h.rows=f,d[r]=h,j.success(`New row added to "${x}"`),{...n,facilities:d}})},[a]),l=g.useCallback((r,n)=>{a(d=>{const h=[...d.facilities];if(!h[r]||!h[r].rows||!h[r].rows[n])return console.error("Invalid indices for removeFacilityRow:",r,n),d;const x=h[r].rows[n];if(T[r].rows.some(w=>w.type===x.type))return j.error("Default facility rows cannot be removed."),d;const N=x.type||"row",v=h[r].rows.filter((w,S)=>S!==n);return h[r]={...h[r],rows:v},j.error(`Removed "${N}" from "${h[r].category}"`),{...d,facilities:h}})},[a]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(k,{title:"D. Buildings and other Facilities in the Barangay",children:[e.jsxs("p",{className:"text-sm text-gray-600 italic mb-2",children:[e.jsx("strong",{children:"Note:"})," Leave a cell blank if the value is zero. Default building types cannot be removed or edited."]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(s=t.buildings)==null?void 0:s.map((r,n)=>e.jsx(ct,{category:r,catIdx:n,defaultCategoryRows:L[n].rows,updateRow:m,removeRow:b,addRow:c},n))})]}),e.jsxs(k,{title:"E. Primary Facilities and Services in the Barangay",children:[e.jsxs("p",{className:"text-sm text-gray-600 italic mb-2",children:[e.jsx("strong",{children:"Note:"})," Leave a cell blank if the value is zero. Default facility types cannot be removed or edited."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(i=t.facilities)==null?void 0:i.slice(0,2).map((r,n)=>e.jsx(le,{category:r,catIdx:n,defaultCategoryRows:T[n].rows,updateRow:u,removeRow:l,addRow:p},n)),e.jsx("div",{className:"md:col-span-2",children:((o=t.facilities)==null?void 0:o[2])&&e.jsx(le,{category:t.facilities[2],catIdx:2,defaultCategoryRows:T[2].rows,updateRow:u,removeRow:l,addRow:p})})]})]})]})}const W=t=>({type:t,male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""}),ie=[{name:"",male:"",female:"",lgbtq:"",head:"",contact:"",registered:"YES",programs:""}],ut=[{category:"Medical Personnel/Professionals",rows:["Barangay Health Worker","Barangay Nutrition Scholar","Doctor","Nurse","Midwife","Dentist","Medical Technologist"].map(W)},{category:"Other Professionals",rows:["Fireman/Firewoman","Teacher","Social Worker"].map(W)},{category:"Laborers",rows:["Carpenter","Mason","Electrician","Engineer","Technician","Painter","Plumber","Crane Operator","Truck Driver"].map(W)}],O=["male_no_dis","male_dis","female_no_dis","female_dis","lgbtq_no_dis","lgbtq_dis"],Pe=t=>O.reduce((a,m)=>a+(Number(t[m])||0),0),pt=(t,a)=>t.reduce((m,c)=>m+(Number(c[a])||0),0),mt=t=>t.reduce((a,m)=>a+Pe(m),0);function ht({category:t,catIdx:a,updateCategoryName:m,updateRow:c,removeRow:b,addRow:u,removeCategory:p}){return e.jsxs("div",{className:"overflow-x-auto border rounded-lg shadow-sm mb-4 bg-white",children:[e.jsxs("div",{className:"px-2 py-1 font-semibold flex items-center justify-between",children:[e.jsx("input",{type:"text",className:"w-[300px] p-1 text-lg font-semibold border rounded m-2",value:t.category,onChange:l=>m(a,R(l.target.value)),placeholder:"Enter category name"}),e.jsx("button",{className:"ml-2 text-red-600 hover:text-red-800 font-bold",onClick:()=>p(a),children:"✕"})]}),e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"3",className:"border px-2 py-1 w-[250px]",children:"HUMAN RESOURCES"}),e.jsx("th",{colSpan:"6",className:"border px-2 py-1 text-center",children:"NUMBER"}),e.jsx("th",{rowSpan:"3",className:"border px-2 py-1",children:"Total"}),e.jsx("th",{rowSpan:"3",className:"border px-2 py-1 w-[40px]"})]}),e.jsxs("tr",{children:[e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Male"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Female"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"LGBTQ+"})]}),e.jsx("tr",{children:["Without Disability","With Disability","Without Disability","With Disability","Without Disability","With Disability"].map((l,s)=>e.jsx("th",{className:"border px-2 py-1",children:l},s))})]}),e.jsx("tbody",{children:t.rows.map((l,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:l.type,onChange:i=>c(a,s,"type",R(i.target.value))})}),O.map(i=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",mim:"0",className:"w-full border p-1 text-center",value:l[i]??"",onChange:o=>c(a,s,i,o.target.value)})},i)),e.jsx("td",{className:"border px-2 py-1 text-center font-semibold bg-gray-50",children:Pe(l)}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>b(a,s),children:"✕"})})]},s))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),O.map(l=>e.jsx("td",{className:"border px-2 py-1 text-center",children:pt(t.rows,l)},l)),e.jsx("td",{className:"border px-2 py-1 text-center",children:mt(t.rows)}),e.jsx("td",{className:"border"})]})})]}),e.jsxs("div",{className:"flex items-start justify-between p-2 mt-2",children:[e.jsxs("button",{onClick:()=>u(a),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm mt-3",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add new row"]}),e.jsxs("p",{className:"text-xs text-gray-600 italic mt-3",children:[e.jsx("strong",{children:"Note:"})," Add a new row if needed."]})]})]})}function xt({institutions:t,instIdx:a,updateField:m,removeInstitution:c,addInstitution:b}){return e.jsxs("div",{className:"overflow-x-auto border rounded-lg shadow-sm mb-4",children:[e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[250px]",rowSpan:"2",children:"NAME OF INSTITUTION/ SECTOR/ GROUP"}),e.jsx("th",{colSpan:"3",className:"border px-2 py-1 text-center",children:"NUMBER OF MEMBERS"}),e.jsx("th",{className:"border px-2 py-1",rowSpan:"2",children:"NAME OF HEAD"}),e.jsx("th",{className:"border px-2 py-1",rowSpan:"2",children:"CONTACT NO."}),e.jsx("th",{className:"border px-2 py-1",rowSpan:"2",children:"STATUS (REGISTERED OR NOT)"}),e.jsx("th",{className:"border px-2 py-1",rowSpan:"2",children:"PROGRAMS/ SERVICES"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"MALE"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"FEMALE"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"LGBTQ"})]})]}),e.jsx("tbody",{children:t.map((u,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:u.name,onChange:l=>m(a,p,"name",$(l.target.value))})}),["male","female","lgbtq"].map(l=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",min:"0",className:"w-full border p-1 text-center",value:u[l],onChange:s=>m(a,p,l,s.target.value)})},l)),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:u.head,onChange:l=>m(a,p,"head",$(l.target.value))})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:u.contact,onChange:l=>m(a,p,"contact",l.target.value)})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("select",{className:"w-full border p-1",value:u.registered,onChange:l=>m(a,p,"registered",l.target.value),children:[e.jsx("option",{value:"YES",children:"YES"}),e.jsx("option",{value:"NO",children:"NO"})]})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:u.programs,onChange:l=>m(a,p,"programs",$(l.target.value))})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>c(a,p),children:"✕"})})]},p))})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 mt-2",children:[e.jsxs("button",{onClick:()=>b(a),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm mt-3",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add new row"]}),e.jsxs("p",{className:"text-xs text-gray-600 italic mt-2",children:[e.jsx("strong",{children:"Note:"})," Add a new row if needed."]})]})]})}const bt=()=>{const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{t.human_resources||a(r=>({...r,human_resources:ut}))},[t,a]);const m=(r,n)=>{const d=[...t.human_resources];d[r].category=n,a(h=>({...h,human_resources:d}))},c=(r,n,d,h)=>{const x=[...t.human_resources];x[r].rows[n][d]=d==="type"?h:h===""?"":Number(h),a(y=>({...y,human_resources:x}))},b=r=>{const n=[...t.human_resources];n[r].rows.push({type:"",...Object.fromEntries(O.map(d=>[d,""]))}),a(d=>({...d,human_resources:n})),j.success("Row added!")},u=(r,n)=>{var x;const d=[...t.human_resources],h=((x=d[r].rows[n])==null?void 0:x.type)||"Row";d[r].rows.splice(n,1),a(y=>({...y,human_resources:d})),j.error(`${h} removed!`)},p=()=>{const r=[...t.human_resources];r.push({category:"",rows:[{type:"",...Object.fromEntries(O.map(n=>[n,""]))}]}),a(n=>({...n,human_resources:r})),j.success("New category added!")},l=r=>{const n=[...t.human_resources],d=n[r].category||"Category";n.splice(r,1),a(h=>({...h,human_resources:n})),j.error(`${d} removed!`)};g.useEffect(()=>{t.institutions||a(r=>({...r,institutions:ie}))},[t,a]);const s=(r,n,d,h)=>{const x=[...t.institutions];x[n][d]=d==="male"||d==="female"||d==="lgbtq"?h===""?"":Number(h):h,a(y=>({...y,institutions:x}))},i=r=>{const n=[...t.institutions];n.push({...ie[0]}),a(d=>({...d,institutions:n})),j.success("Row added!")},o=(r,n)=>{var x;const d=[...t.institutions],h=((x=d[n])==null?void 0:x.name)||"Institution";d.splice(n,1),a(y=>({...y,institutions:d})),j.error(`${h} removed!`)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{title:"F. Inventory of Institutions, Sectors, and other Volunteer Groups in the Barangay",children:e.jsx(xt,{institutions:t.institutions||[],instIdx:0,updateField:s,removeInstitution:o,addInstitution:i})}),e.jsxs(k,{title:"G. Inventory of Human Resources",children:[e.jsxs("p",{className:"text-sm text-gray-600 italic mb-2",children:[e.jsx("strong",{children:"Note:"})," Leave a cell blank if the value is zero."]}),e.jsx("div",{className:"mb-10 border-2 border-purple-300 rounded-xl p-5 bg-purple-50 shadow-sm",children:(t.human_resources||[]).map((r,n)=>e.jsx(ht,{category:r,catIdx:n,updateCategoryName:m,updateRow:c,removeRow:u,addRow:b,removeCategory:l},n))}),e.jsx("div",{className:"p-2 m-auto",children:e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium border border-green-500 text-green-600 rounded-md hover:bg-green-500 hover:text-white transition-colors duration-200 shadow-sm mt-3",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add new category"]})})]})]})};function yt(){var d,h;const{craData:t,setCraData:a}=g.useContext(C),m=["Owned (Land and House)","Rented","Shared with Owner","Shared with Renter","Owned (House)","Informal Settler Families"],c=["Concrete","Semi-Concrete","Made of wood and light materials","Salvaged/Makeshift House"],b=["0_6_mos","7_mos_to_2_yrs","3_to_5_yrs","6_to_12_yrs","13_to_17_yrs","18_to_59_yrs","60_plus_yrs"],u=x=>x.replace(/_/g," ").replace("0 6","0–6").replace("60 plus","60+").replace(/\bmos\b/,"mos.").replace(/\byrs\b/,"yrs.");g.useEffect(()=>{(!t.population||t.population.length===0)&&a(x=>({...x,population:b.map(y=>({ageGroup:y,male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""}))})),(!t.houses||t.houses.length===0)&&a(x=>({...x,houses:c.map(y=>({houseType:y,oneFloor:"",multiFloor:""}))}))},[t,a]);const p=(x,y,f)=>{a(N=>{const v=[...N.population];return v[x][y]=f===""?"":Number(f),{...N,population:v}})},l=x=>{var f;const y=((f=t.population)==null?void 0:f[x])||{};return Object.entries(y).filter(([N])=>N!=="ageGroup").reduce((N,[,v])=>N+(v||0),0)},s=x=>{var y;return(y=t.population)==null?void 0:y.reduce((f,N)=>f+(N[x]||0),0)},i=()=>{var x;return(x=t.population)==null?void 0:x.reduce((y,f,N)=>y+l(N),0)},o=(x,y,f)=>{a(N=>{const v=[...N.houses];return v[x][y]=f===""?"":Number(f),{...N,houses:v}})},r=x=>{var y;return(y=t.houses)==null?void 0:y.reduce((f,N)=>f+(N[x]||0),0)},n=()=>{var x;return(x=t.houses)==null?void 0:x.reduce((y,f)=>y+(f.oneFloor||0)+(f.multiFloor||0),0)};return g.useEffect(()=>{(!t.populationGender||t.populationGender.length===0)&&a(x=>({...x,populationGender:[{gender:"male",value:x.malePopulation??""},{gender:"female",value:x.femalePopulation??""},{gender:"lgbtq",value:x.lgbtqPopulation??""}]}))},[]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(k,{title:"A. Information on Population and Resident",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsxs("section",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold mb-0",children:"General Population"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 ",children:[e.jsx(z,{type:"number",name:"barangayPopulation",label:"Barangay Population",placeholder:"Total Population",value:t.barangayPopulation??"",onChange:x=>a(y=>({...y,barangayPopulation:x.target.value===""?"":Number(x.target.value)}))}),e.jsx(z,{type:"number",name:"householdsPopulation",label:"Households Population",placeholder:"Total Households",value:t.householdsPopulation??"",onChange:x=>a(y=>({...y,householdsPopulation:x.target.value===""?"":Number(x.target.value)}))}),e.jsx(z,{type:"number",name:"familiesPopulation",label:"Families Population",placeholder:"Total Families",value:t.familiesPopulation??"",onChange:x=>a(y=>({...y,familiesPopulation:x.target.value===""?"":Number(x.target.value)}))})]})]}),e.jsxs("section",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold mb-0",children:"Population Based on Gender/Sex"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["female","male","lgbtq"].map((x,y)=>{var f,N;return e.jsx(z,{type:"number",name:`${x}Population`,label:`${x.charAt(0).toUpperCase()+x.slice(1)} Population`,placeholder:x.charAt(0).toUpperCase()+x.slice(1),value:((N=(f=t.populationGender)==null?void 0:f[y])==null?void 0:N.value)??"",onChange:v=>{const w=v.target.value===""?"":Number(v.target.value);a(S=>{const P=[...S.populationGender||[]];return P[y]={gender:x,value:w},{...S,populationGender:P}})}},x)})})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 mt-6",children:"Population according to Age"}),e.jsxs("p",{className:"text-sm text-gray-600 italic mb-2",children:[e.jsx("strong",{children:"Note:"})," Leave a cell blank if the value is zero."]}),e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"2",className:"border px-2 py-1",children:"Age Group"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1",children:"Male"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1",children:"Female"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1",children:"LGBTQ+"}),e.jsx("th",{rowSpan:"2",className:"border px-2 py-1",children:"Total"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"Without Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"With Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"Without Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"With Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"Without Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"With Disability"})]})]}),e.jsx("tbody",{children:(d=t.population)==null?void 0:d.map((x,y)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:u(x.ageGroup)}),Object.keys(x).filter(f=>f!=="ageGroup").map((f,N)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1 text-center",value:x[f]??"",onChange:v=>p(y,f,v.target.value)})},N)),e.jsx("td",{className:"border px-2 py-1 font-semibold text-center bg-gray-50",children:l(y)})]},y))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:s("male_no_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:s("male_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:s("female_no_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:s("female_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:s("lgbtq_no_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:s("lgbtq_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:i()})]})})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[e.jsxs("section",{className:"flex-1 flex flex-col",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Number of Houses according to Build (Materials Used)"}),e.jsxs("p",{className:"text-sm text-gray-600 italic mb-2",children:[e.jsx("strong",{children:"Note:"})," Leave a cell blank if the value is zero."]}),e.jsx("div",{className:"flex-1",children:e.jsxs("table",{className:"w-full border text-sm h-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"TYPES OF HOUSES"}),e.jsx("th",{className:"border px-2 py-1",children:"Number of Houses with 1 Floor"}),e.jsx("th",{className:"border px-2 py-1",children:"Number of Houses with 2 or more Floors"}),e.jsx("th",{className:"border px-2 py-1",children:"Total"})]})}),e.jsx("tbody",{children:(h=t.houses)==null?void 0:h.map((x,y)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:x.houseType}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1 text-center",value:x.oneFloor??"",onChange:f=>o(y,"oneFloor",f.target.value)})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1 text-center",value:x.multiFloor??"",onChange:f=>o(y,"multiFloor",f.target.value)})}),e.jsx("td",{className:"border px-2 py-1 font-semibold text-center bg-gray-50",children:(x.oneFloor||0)+(x.multiFloor||0)})]},y))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:r("oneFloor")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:r("multiFloor")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:n()})]})})]})})]}),e.jsxs("section",{className:"flex-1 flex flex-col",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Number of Houses according to Type of Ownership"}),e.jsxs("p",{className:"text-sm text-gray-600 italic mb-2",children:[e.jsx("strong",{children:"Note:"})," Leave a cell blank if the value is zero."]}),e.jsx("div",{className:"flex-1",children:e.jsxs("table",{className:"w-full border text-sm h-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"Type of Ownership"}),e.jsx("th",{className:"border px-2 py-1",children:"Quantity"})]})}),e.jsx("tbody",{children:m.map((x,y)=>{var f;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:x}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1 text-center",value:((f=t.ownership)==null?void 0:f[x])??"",onChange:N=>a(v=>({...v,ownership:{...v.ownership,[x]:N.target.value===""?"":Number(N.target.value)}}))})})]},y)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Object.values(t.ownership||{}).reduce((x,y)=>x+(y||0),0)})]})})]})})]})]})]}),e.jsx(it,{}),e.jsx(dt,{}),e.jsx(bt,{})]})}function ce({data:t,updateField:a,handleBlur:m,addRow:c,removeRow:b,label:u}){return e.jsxs("div",{className:"overflow-x-auto border rounded-lg shadow-sm mb-4",children:[e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"2",className:"border px-2 py-1",children:"Priority Hazards"}),e.jsx("th",{colSpan:"5",className:"border px-2 py-1",children:u}),e.jsx("th",{className:"border px-2 py-1"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"People"}),e.jsx("th",{className:"border px-2 py-1",children:"Properties"}),e.jsx("th",{className:"border px-2 py-1",children:"Services"}),e.jsx("th",{className:"border px-2 py-1",children:"Environment"}),e.jsx("th",{className:"border px-2 py-1",children:"Livelihood"})]})]}),e.jsx("tbody",{children:t.map((p,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("select",{className:"border p-1 text-sm w-48",value:p.hazard==="None"?"":p.hazard,onChange:s=>a(l,"hazard",R(s.target.value)),onBlur:s=>m(l,"hazard",s.target.value),children:[e.jsx("option",{value:"",children:"Select hazard"}),["Typhoon","Flood","Rain-induced Landslide","Fire","Drought","Earthquake","Vehicular Incident","Pandemic / Emerging and Re-emerging Diseases"].map((s,i)=>e.jsx("option",{value:s,children:s},i)),p.hazard&&!["Typhoon","Flood","Rain-induced Landslide","Fire","Drought","Earthquake","Vehicular Incident","Pandemic / Emerging and Re-emerging Diseases"].includes(p.hazard)&&e.jsx("option",{value:p.hazard,children:p.hazard})]})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1",value:p.people,onChange:s=>a(l,"people",s.target.value),placeholder:"e.g., 5142",min:"0"})}),["properties","services","environment","livelihood"].map(s=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{className:"w-full border p-1",value:p[s]==="None"?"":p[s],onChange:i=>a(l,s,i.target.value),onBlur:i=>m(l,s,i.target.value),placeholder:`Enter ${s}`})},s)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>b(l),children:"✕"})})]},l))})]}),e.jsx("div",{className:"p-2 m-auto",children:e.jsxs("button",{onClick:c,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add new row"]})})]})}const gt=()=>{const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{(!t.risks||t.risks.length===0)&&a(u=>({...u,risks:[{hazard:"",people:"",properties:"",services:"",environment:"",livelihood:""}]})),(!t.vulnerabilities||t.vulnerabilities.length===0)&&a(u=>({...u,vulnerabilities:[{hazard:"",people:"",properties:"",services:"",environment:"",livelihood:""}]}))},[t,a]);const m=u=>({updateField:(o,r,n)=>{const d=[...t[u]];d[o][r]=r==="people"?n===""?"":Number(n):n,a(h=>({...h,[u]:d}))},handleBlur:(o,r,n)=>{const d=[...t[u]];r!=="people"&&n.trim()===""&&(d[o][r]="None"),a(h=>({...h,[u]:d}))},addRow:()=>{const o=[...t[u]||[]];o.push({hazard:"",people:"",properties:"",services:"",environment:"",livelihood:""}),a(r=>({...r,[u]:o})),j.success(`${u==="risks"?"Risk":"Vulnerability"} row added!`)},removeRow:o=>{var d;const r=[...t[u]],n=((d=r[o])==null?void 0:d.hazard)||"Row";r.splice(o,1),a(h=>({...h,[u]:r})),j.error(`${n} removed!`)}}),c=m("risks"),b=m("vulnerabilities");return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"mt-8 pt-6 font-bold text-md",children:"2.1 Public Health - Risk Assessment Matrix"}),e.jsx(ce,{data:t.risks||[],label:"RISK TO THE COMMUNITY",...c}),e.jsx("p",{className:"mt-8 pt-6 font-bold text-md",children:"2.2 Public Health - Vulnerability Assessment Matrix"}),e.jsx(ce,{data:t.vulnerabilities||[],label:"VULNERABILITY TO THE COMMUNITY",...b})]})},Fe=["Deaf/Hard of Hearing","Speech/Language Impairment","Visual Disability","Mental Disability","Intellectual Disability","Learning Disability","Physical Disability","Psychosocial Disability","Orthopedic Disability"],ft=[{label:"0-6Y",cols:2},{label:"7M-2Y",cols:2},{label:"3-5Y",cols:2},{label:"6-12Y",cols:3},{label:"13-17Y",cols:3},{label:"18-59Y",cols:3},{label:"60Y+",cols:3}],jt=["M","F","M","F","M","F","M","F","LGBTQ","M","F","LGBTQ","M","F","LGBTQ","M","F","LGBTQ"],B=["age0_6M","age0_6F","age7m_2yM","age7m_2yF","age3_5M","age3_5F","age6_12M","age6_12F","age6_12LGBTQ","age13_17M","age13_17F","age13_17LGBTQ","age18_59M","age18_59F","age18_59LGBTQ","age60upM","age60upF","age60upLGBTQ"],de=(t="")=>B.reduce((a,m)=>({...a,[m]:""}),{type:t}),Nt=()=>e.jsxs("thead",{className:"bg-gray-100 text-sm",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"2",className:"border p-1",children:"Type"}),ft.map((t,a)=>e.jsx("th",{colSpan:t.cols,className:"border p-1 text-center",children:t.label},a)),e.jsx("th",{rowSpan:"2",className:"border p-1 text-center",children:"TOTAL"}),e.jsx("th",{rowSpan:"2",className:"border p-1"})]}),e.jsx("tr",{children:jt.map((t,a)=>e.jsx("th",{className:"border p-1 text-center",children:t},a))})]}),vt=({row:t,rowIdx:a,updateField:m,removeRow:c,inputRefs:b})=>{const u=t.type===""||!Fe.includes(t.type);return e.jsxs("tr",{children:[e.jsx("td",{className:"border p-1 text-sm",children:u?e.jsx("input",{ref:p=>b.current[a]=p,type:"text",value:t.type,className:"w-full border p-1 text-sm",onChange:p=>m(a,"type",R(p.target.value)),placeholder:"Enter Disability"}):t.type}),B.map(p=>e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:t[p],className:"w-full text-center border p-1",onChange:l=>m(a,p,l.target.value)})},p)),e.jsx("td",{className:"border p-1 text-center font-bold",children:B.reduce((p,l)=>p+(Number(t[l])||0),0)}),e.jsx("td",{className:"border p-1 text-center",children:u?e.jsx("button",{onClick:()=>c(a),className:"w-5 h-5 flex items-center justify-center rounded-full bg-gray-100 text-gray-500 hover:bg-gray-200",children:e.jsx(Y,{className:"w-3 h-3"})}):e.jsx("div",{className:"w-5 h-5"})})]})},wt=({rows:t})=>e.jsxs("tr",{className:"bg-gray-50 font-bold text-sm",children:[e.jsx("td",{className:"border p-1",children:"TOTAL"}),B.map(a=>e.jsx("td",{className:"border p-1 text-center",children:t.reduce((m,c)=>m+(Number(c[a])||0),0)},a)),e.jsx("td",{className:"border p-1 text-center",children:t.reduce((a,m)=>a+B.reduce((c,b)=>c+(Number(m[b])||0),0),0)}),e.jsx("td",{className:"border p-1"})]});function Ct(){var s;const{craData:t,setCraData:a}=g.useContext(C),m=g.useRef([]),[c,b]=g.useState((s=t.pwd)!=null&&s.length?t.pwd:Fe.map(i=>de(i)));g.useEffect(()=>{a(i=>({...i,pwd:c}))},[c,a]);const u=(i,o,r)=>{const n=c.map((d,h)=>h===i?{...d,[o]:B.includes(o)?r.replace(/\D/g,""):r}:d);b(n)},p=()=>{b(i=>{const o=[...i,de()];return setTimeout(()=>{var r;return(r=m.current[o.length-1])==null?void 0:r.focus()},0),o}),j.success("New disability row added!")},l=i=>{b(c.filter((o,r)=>r!==i)),j.error("Disability row removed!")};return e.jsxs("div",{className:"border rounded-lg shadow-sm p-2 overflow-auto",children:[e.jsx("h3",{className:"text-base font-semibold mb-2 text-gray-800",children:"Persons with Disability (PWD) by Age Group"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border table-auto text-sm",children:[e.jsx(Nt,{}),e.jsxs("tbody",{children:[c.map((i,o)=>e.jsx(vt,{row:i,rowIdx:o,updateField:u,removeRow:l,inputRefs:m},o)),e.jsx(wt,{rows:c})]})]})}),e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-1 mt-2 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Disability"]})]})}const H=[{value:"Number of Informal Settler Families",count:""},{value:"Number of Employed Individuals",count:""},{value:"Number of Families Aware of the Effects of Risks and Hazards",count:""},{value:"Number of Families with Access to Information (radio/TV/newspaper/social media, etc.)",count:""},{value:"Number of Families who received Financial Assistance",count:""},{value:"Number of Families with Access to Early Warning System",count:""}],Rt=()=>{const{craData:t,setCraData:a}=g.useContext(C),m=t.disaster_per_purok||[],c=(l,s,i,o=null)=>{a(r=>{const d=(r.disaster_per_purok||[]).map((h,x)=>{if(x!==l)return h;const y=h.rowsValue||H.map(f=>({...f}));if(o!==null){let f=i.replace(/\D/g,"");f.length>1&&f.startsWith("0")&&(f=f.substring(1));const N=y.map((v,w)=>w===o?{...v,count:f}:v);return{...h,rowsValue:N}}return{...h,[s]:i}});return{...r,disaster_per_purok:d}})},b=()=>{a(l=>{const s=l.disaster_per_purok||[],o={purok:`${s.length+1}`,rowsValue:H.map(r=>({...r}))};return{...l,disaster_per_purok:[...s,o]}}),j.success("Purok added successfully!")},u=l=>{a(s=>{const o=(s.disaster_per_purok||[]).filter((r,n)=>n!==l);return{...s,disaster_per_purok:o}}),j.error("Purok removed!")},p=H.map((l,s)=>m.reduce((i,o)=>{var r,n;return i+Number(((n=(r=o.rowsValue)==null?void 0:r[s])==null?void 0:n.count)||0)},0));return e.jsxs("div",{className:"p-4",children:[e.jsx(ke,{position:"top-right"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border p-1 text-center",children:"Purok"}),H.map((l,s)=>e.jsx("th",{className:"border p-1 text-center",children:l.value},s)),e.jsx("th",{className:"border p-1 text-center",children:"Actions"})]})}),e.jsxs("tbody",{children:[m.map((l,s)=>{const i=l.rowsValue&&l.rowsValue.length>0?l.rowsValue:H.map(o=>({...o}));return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:l.purok||"",placeholder:`${s+1}`,onChange:o=>c(s,"purok",o.target.value),className:"w-full text-center text-xs p-1 border rounded"})}),i.map((o,r)=>e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:o.count||"",onChange:n=>c(s,"count",n.target.value,r),className:"w-full text-center text-xs p-1 border rounded"})},r)),e.jsx("td",{className:"p-0.5 text-center !border-0",children:e.jsx("button",{className:"w-4 h-4 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200 mx-auto",onClick:()=>u(s),children:"✕"})})]},s)}),e.jsxs("tr",{className:"bg-gray-200 font-bold",children:[e.jsx("td",{className:"border p-1 text-center",children:"Total"}),p.map((l,s)=>e.jsx("td",{className:"border p-1 text-center",children:l},s)),e.jsx("td",{className:"border p-1"})]})]})]})}),e.jsxs("button",{onClick:b,className:"inline-flex items-center gap-1 m-2 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Purok"]})]})},_t=[{illness:"Hypertension",children:"",adults:""},{illness:"Acute Respiratory Infection (AURI)",children:"",adults:""},{illness:"Diabetes Mellitus",children:"",adults:""},{illness:"Scabies",children:"",adults:""},{illness:"Infected Wound",children:"",adults:""},{illness:"Influenza",children:"",adults:""},{illness:"Urinary Tract Infection (UTI)",children:"",adults:""},{illness:"Skin Allergy",children:"",adults:""},{illness:"Boil",children:"",adults:""},{illness:"Chicken Pox",children:"",adults:""},{illness:"Diarrhea",children:"",adults:""},{illness:"Dengue",children:"",adults:""},{illness:"Stroke",children:"",adults:""}],kt=()=>{var p,l;const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{(!t.illnesses||t.illnesses.length===0)&&a(s=>({...s,illnesses:_t}))},[t,a]);const m=(s,i,o)=>{const r=t.illnesses.map((n,d)=>d===s?{...n,[i]:i==="illness"?o:o.replace(/\D/g,"")}:n);a(n=>({...n,illnesses:r}))},c=()=>{const s={illness:"",children:"",adults:""};a(i=>({...i,illnesses:[...i.illnesses,s]})),j.success("Illness added successfully!")},b=s=>{const i=t.illnesses.filter((o,r)=>r!==s);a(o=>({...o,illnesses:i})),j.error("Illness removed!")},u=((p=t.illnesses)==null?void 0:p.reduce((s,i)=>(s[0]+=Number(i.children)||0,s[1]+=Number(i.adults)||0,s),[0,0]))||[0,0];return e.jsxs("div",{className:"p-4",children:[e.jsx(ke,{position:"top-right"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border p-1 text-center",children:"Illness/Disease"}),e.jsx("th",{className:"border p-1 text-center",children:"Children (17 and below)"}),e.jsx("th",{className:"border p-1 text-center",children:"Adults (18 and above)"})]})}),e.jsxs("tbody",{children:[(l=t.illnesses)==null?void 0:l.map((s,i)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:s.illness,onChange:o=>m(i,"illness",R(o.target.value)),className:"w-full text-center text-xs p-1 border rounded"})}),e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:s.children,onChange:o=>m(i,"children",o.target.value),className:"w-full text-center text-xs p-1 border rounded"})}),e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:s.adults,onChange:o=>m(i,"adults",o.target.value),className:"w-full text-center text-xs p-1 border rounded"})}),e.jsx("td",{className:"p-0.5 text-center !border-0",children:e.jsx("button",{className:"w-4 h-4 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200 mx-auto",onClick:()=>b(i),children:"✕"})})]},i)),e.jsxs("tr",{className:"bg-gray-200 font-bold",children:[e.jsx("td",{className:"border p-1 text-center",children:"Total"}),e.jsx("td",{className:"border p-1 text-center",children:u[0]}),e.jsx("td",{className:"border p-1 text-center",children:u[1]}),e.jsx("td",{className:"border p-1"})]})]})]})}),e.jsxs("button",{onClick:c,className:"inline-flex items-center gap-1 m-2 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Illness"]})]})},V=(t="")=>{const a={purok:t};return["families","individualsM","individualsF","lgbtq","age0_6M","age0_6F","age7m_2yM","age7m_2yF","age3_5M","age3_5F","age6_12M","age6_12F","age13_17M","age13_17F","age18_59M","age18_59F","age60upM","age60upF","pwdM","pwdF","diseasesM","diseasesF","pregnantWomen"].forEach(c=>{a[c]=""}),a};function Dt({tableId:t,riskType:a,purokData:m,updateRiskType:c,updatePurokField:b,addPurokRow:u,removePurokRow:p,removeTable:l,tableIndex:s}){const i=["families","individualsM","individualsF","lgbtq","age0_6M","age0_6F","age7m_2yM","age7m_2yF","age3_5M","age3_5F","age6_12M","age6_12F","age13_17M","age13_17F","age18_59M","age18_59F","age60upM","age60upF","pwdM","pwdF","diseasesM","diseasesF","pregnantWomen"];return e.jsxs("div",{className:"border rounded-lg shadow-sm mb-4 p-2 relative bg-white",children:[e.jsx("div",{className:"absolute top-2 right-2 mb-4",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-red-100 text-red-500 hover:bg-red-200 transition",onClick:()=>l(t),children:e.jsx(Se,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"mb-4 mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kind of Risk:"}),e.jsx(J,{label:"",value:a,onChange:o=>c(t,R(o.target.value)),items:[{value:"Typhoon",label:"Typhoon"},{value:"Flood",label:"Flood"},{value:"Rain-induced Landslide",label:"Rain-induced Landslide"},{value:"Fire",label:"Fire"},{value:"Drought",label:"Drought"},{value:"Earthquake",label:"Earthquake"},{value:"Vehicular Incident",label:"Vehicular Incident"},{value:"Pandemic / Emerging and Re-emerging Diseases",label:"Pandemic / Emerging and Re-emerging Diseases"},...a&&!["Typhoon","Flood","Rain-induced Landslide","Fire","Drought","Earthquake","Vehicular Incident","Pandemic / Emerging and Re-emerging Diseases"].includes(a)?[{value:a,label:a}]:[]],placeholder:"Select hazard"})]}),e.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-800",children:["3.1.",s+1," Number of Families and Individuals according to Age and Health Condition who are at Risk from"," ",e.jsx("span",{className:"underline",children:a||"[Kind of Risk]"})]}),e.jsxs("table",{className:"w-full border text-[0.6rem] table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"60px"}}),e.jsx("col",{style:{width:"60px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"45px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"60px"}}),e.jsx("col",{style:{width:"24px"}})]}),e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border p-0.5 rotate-90 whitespace-nowrap",rowSpan:"3",children:"Purok"}),e.jsx("th",{className:"border p-0.5 rotate-90 whitespace-nowrap",rowSpan:"3",children:"Families"}),e.jsx("th",{colSpan:"3",className:"border p-0.5 text-center whitespace-nowrap",children:"Individuals"}),e.jsx("th",{colSpan:"10",className:"border p-0.5 text-center whitespace-nowrap",children:"Children"}),e.jsx("th",{colSpan:"4",className:"border p-0.5 text-center whitespace-nowrap",children:"Adult"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"PWD"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"Diseases"}),e.jsx("th",{className:"border p-0.5 rotate-90 whitespace-nowrap",rowSpan:"3",children:"Pregnant"}),e.jsx("th",{className:"border p-0.5 whitespace-nowrap",rowSpan:"3"})]}),e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"LGBTQ"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"0-6Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"7M-2Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"3-5Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"6-12Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"13-17Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"18-59Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"60Y+"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"F"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"})]})]}),e.jsxs("tbody",{children:[(m||[]).map((o,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-0.5",children:e.jsx("input",{type:"number",min:"0",className:"border p-0.5 w-full text-[0.6rem] text-center",value:o.purok,onChange:n=>b(t,r,"purok",n.target.value),placeholder:"1"})}),i.map(n=>e.jsx("td",{className:"border p-0.5",children:e.jsx("input",{type:"number",min:"0",className:"border p-0.5 w-full text-[0.6rem] text-center",value:o[n]??"",onChange:d=>b(t,r,n,d.target.value)})},n)),e.jsx("td",{className:"p-0.5 text-center !border-0",children:e.jsx("button",{className:"w-4 h-4 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200 mx-auto",onClick:()=>p(t,r),children:"✕"})})]},r)),e.jsxs("tr",{children:[e.jsx("td",{className:"border p-0.5 font-bold",children:"TOTAL"}),i.map(o=>e.jsx("td",{className:"border p-0.5 font-bold text-center",children:(m||[]).reduce((r,n)=>r+(Number(n[o])||0),0)},`total-${o}`)),e.jsx("td",{className:"p-0.5 !border-0"})]})]})]}),e.jsxs("button",{onClick:()=>u(t),className:"inline-flex items-center gap-1 mt-3 px-4 py-1.4 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Purok"]})]})}const St=()=>{const{craData:t,setCraData:a}=g.useContext(C),[m,c]=g.useState(t.exposure||[{riskType:"",purokData:[V("1")]}]);g.useEffect(()=>{a(o=>({...o,exposure:m}))},[m,a]);const b=(o,r)=>{c(n=>n.map((d,h)=>h===o?{...d,riskType:r}:d))},u=(o,r,n,d)=>{c(h=>h.map((x,y)=>y===o?{...x,purokData:x.purokData.map((f,N)=>N===r?{...f,[n]:d===""?"":Number(d)}:f)}:x))},p=o=>{c(r=>r.map((n,d)=>d===o?{...n,purokData:[...n.purokData,V((n.purokData.length+1).toString())]}:n))},l=(o,r)=>{c(n=>n.map((d,h)=>h===o?{...d,purokData:d.purokData.filter((x,y)=>y!==r)}:d))},s=()=>{c(o=>{if(o.length===0)return[{riskType:"",purokData:[V("1")]}];const r=o[o.length-1],n=r.purokData.map(d=>({...d}));return[...o,{riskType:r.riskType||"",purokData:n}]})},i=o=>{c(r=>r.filter((n,d)=>d!==o))};return e.jsxs("div",{className:"space-y-5",children:[e.jsx("p",{className:"text-md font-bold",children:"3.1 Population"}),e.jsx("div",{className:"mb-4 border-2 border-purple-300 rounded-xl p-5 bg-purple-50 shadow-sm",children:m.map((o,r)=>e.jsx(D.Fragment,{children:e.jsx(Dt,{tableId:r,riskType:o.riskType,purokData:o.purokData,updateRiskType:b,updatePurokField:u,addPurokRow:p,removePurokRow:l,removeTable:i,tableIndex:r})},r))}),e.jsx("div",{className:"mb-10 flex justify-start",children:e.jsxs("button",{onClick:s,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium border border-green-500 text-green-600 rounded-md hover:bg-green-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add New Risk Table"]})}),e.jsx("p",{className:"text-md font-bold",children:"3.2 Deatailed Number of Persons with Disabilities"}),e.jsx(Ct,{}),e.jsx("p",{className:"text-md font-bold",children:"3.3 Number of Families at Risk of Hazards and Disaster per Purok"}),e.jsx(Rt,{}),e.jsx("p",{className:"text-md font-bold",children:"3.4 Number of Persons with Illnesses or Communicable Diseases"}),e.jsx(kt,{})]})},Te={purok:"",lowFamilies:"",lowIndividuals:"",mediumFamilies:"",mediumIndividuals:"",highFamilies:"",highIndividuals:""},ue=()=>Array.from({length:7},(t,a)=>({...Te,purok:`${a+1}`})),pe=[{key:"lowFamilies",label:"Families",group:"Low Risk"},{key:"lowIndividuals",label:"Individuals",group:"Low Risk"},{key:"mediumFamilies",label:"Families",group:"Medium Risk"},{key:"mediumIndividuals",label:"Individuals",group:"Medium Risk"},{key:"highFamilies",label:"Families",group:"High Risk"},{key:"highIndividuals",label:"Individuals",group:"High Risk"}],Et=()=>{const{craData:t,setCraData:a}=g.useContext(C),m=t.disaster_per_purok||[];g.useEffect(()=>{m.length>0&&m.some(r=>Array.isArray(r.rows)&&r.rows.length>0)||a(r=>({...r,disaster_per_purok:[{type:"Typhoon",rows:ue()}]}))},[m,a]);const c=g.useCallback((o,r)=>{a(n=>{const d=[...n.disaster_per_purok||[]],h=d[o]||{type:"",rows:[]};return d[o]={...h,...r(h)},{...n,disaster_per_purok:d}})},[a]),b=(o,r)=>c(o,n=>({type:r})),u=(o,r,n,d)=>c(o,h=>{const x=[...h.rows||[]];return x[r]={...x[r],[n]:d},{rows:x}}),p=()=>{a(o=>({...o,disaster_per_purok:[...o.disaster_per_purok||[],{type:"",rows:ue()}]})),j.success("New hazard category added!")},l=o=>{a(r=>({...r,disaster_per_purok:(r.disaster_per_purok||[]).filter((n,d)=>d!==o)})),j.success("Hazard category removed!")},s=o=>c(o,r=>({rows:[...r.rows||[],{...Te,purok:""}]})),i=(o,r)=>c(o,n=>({rows:(n.rows||[]).filter((d,h)=>h!==r)}));return e.jsxs("div",{children:[e.jsx("p",{className:"text-md font-bold mb-4",children:"4.1 Number of Families and Individuals at Risk of Hazards per Purok based on the following categories:"}),e.jsx("div",{className:"mb-10 border-2 border-purple-300 rounded-xl p-5 bg-purple-50 shadow-sm",children:m.map((o,r)=>e.jsxs("div",{className:"mb-8 border rounded p-4 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx(J,{label:"",value:o.type||"",onChange:n=>b(r,R(n.target.value)),items:[{value:"Typhoon",label:"Typhoon"},{value:"Flood",label:"Flood"},{value:"Rain-induced Landslide",label:"Rain-induced Landslide"},{value:"Fire",label:"Fire"},{value:"Drought",label:"Drought"},{value:"Earthquake",label:"Earthquake"},{value:"Vehicular Incident",label:"Vehicular Incident"},{value:"Pandemic / Emerging and Re-emerging Diseases",label:"Pandemic / Emerging and Re-emerging Diseases"},...o.type&&!["Typhoon","Flood","Rain-induced Landslide","Fire","Drought","Earthquake","Vehicular Incident","Pandemic / Emerging and Re-emerging Diseases"].includes(o.type)?[{value:o.type,label:o.type}]:[]],placeholder:"Select hazard",required:!1}),e.jsx("button",{onClick:()=>l(r),className:"ml-2 w-6 h-6 flex items-center justify-center rounded-full bg-red-100 text-red-500 hover:bg-red-500 hover:text-white",title:"Remove Category",children:"✕"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{rowSpan:"2",className:"border px-2 py-1",children:"Areas affected (Purok)"}),["Low Risk","Medium Risk","High Risk"].map(n=>e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:n},n)),e.jsx("th",{rowSpan:"2",className:"border px-2 py-1 text-center"})]}),e.jsx("tr",{className:"bg-gray-100",children:pe.map(({label:n},d)=>e.jsx("th",{className:"border px-2 py-1",children:n},d))})]}),e.jsx("tbody",{children:(o.rows||[]).map((n,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",min:"0",value:(n==null?void 0:n.purok)??"",onChange:h=>u(r,d,"purok",h.target.value),className:"border w-full px-2 py-1 text-center text-xs"})}),pe.map(({key:h},x)=>e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",min:"0",value:(n==null?void 0:n[h])??"",onChange:y=>u(r,d,h,y.target.value),className:"border w-full px-2 py-1 text-center text-xs"})},x)),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-500 hover:bg-red-200",onClick:()=>i(r,d),title:"Remove Purok Row",children:"✕"})})]},d))})]})}),e.jsxs("button",{onClick:()=>s(r),className:"inline-flex items-center gap-1 mt-2 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Purok"]})]},r))}),e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-1 mt-0 mb-4 px-3 py-1.5 text-xs font-medium border border-green-500 text-green-600 rounded-md hover:bg-green-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Hazard Category"]})]})},_={item:"",total:"",percent:"",location:""},me=[{hazard:"Typhoon",categories:[{type:"Infrastructures",rows:[{..._,item:"Bridge/s"},{..._,item:"Barangay Hall"},{..._,item:"Multi-purpose Building"},{..._,item:"Houses"},{..._,item:"School/s"},{..._,item:"Child Development Center"}]},{type:"Establishments",rows:[{..._,item:"Store"},{..._,item:"Eatery"},{..._,item:"Bakery"}]},{type:"Facilities",rows:[{..._,item:"Water"},{..._,item:"Electricity"},{..._,item:"Telephone/Mobile service"},{..._,item:"Hospitals"},{..._,item:"Barangay Health Center"}]},{type:"Livelihood",rows:[{..._,item:"Rice/Corn Field"},{..._,item:"Vegetables"},{..._,item:"Boats"},{..._,item:"Fish Nets"},{..._,item:"Fish Ponds"}]},{type:"Nature",rows:[{..._,item:"Mountain/s"},{..._,item:"Mangroves"}]}]}],Pt=()=>{var r;const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{var n;(n=t.disaster_inventory)!=null&&n.length||a(d=>({...d,disaster_inventory:me}))},[t,a]);const m=g.useCallback((n,d)=>{a(h=>{const x=[...h.disaster_inventory];return x[n]={...x[n],...d(x[n])},{...h,disaster_inventory:x}})},[a]),c=(n,d,h)=>m(n,x=>{const y=[...x.categories];return y[d]={...y[d],...h(y[d])},{categories:y}}),b=(n,d,h,x,y)=>c(n,d,f=>{const N=[...f.rows];return N[h]={...N[h],[x]:y},{rows:N}}),u=()=>{a(n=>({...n,disaster_inventory:[...n.disaster_inventory,{hazard:"",categories:me[0].categories.map(d=>({...d,rows:d.rows.map(h=>({...h}))}))}]})),j.success("New hazard added!")},p=n=>{a(d=>({...d,disaster_inventory:d.disaster_inventory.filter((h,x)=>x!==n)})),j.error("Hazard removed!")},l=n=>{m(n,d=>({categories:[...d.categories,{type:"",rows:[{..._}]}]})),j.success("New category added!")},s=(n,d)=>{m(n,h=>({categories:h.categories.filter((x,y)=>y!==d)})),j.error("Category removed!")},i=(n,d)=>c(n,d,h=>({rows:[...h.rows,{..._}]})),o=(n,d,h)=>c(n,d,x=>({rows:x.rows.filter((y,f)=>f!==h)}));return e.jsxs("div",{children:[e.jsx("p",{className:"text-md font-bold mb-4 mt-4",children:"4.2 Inventory of Assets at Risk during Hazards and Disasters"}),(r=t.disaster_inventory)==null?void 0:r.map((n,d)=>{var h;return e.jsxs("div",{className:"mb-10 border-2 border-purple-300 rounded-xl p-5 bg-purple-50 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(J,{label:"",value:n.hazard||"",onChange:x=>m(d,()=>({hazard:R(x.target.value)})),items:[{value:"Typhoon",label:"Typhoon"},{value:"Flood",label:"Flood"},{value:"Rain-induced Landslide",label:"Rain-induced Landslide"},{value:"Fire",label:"Fire"},{value:"Drought",label:"Drought"},{value:"Earthquake",label:"Earthquake"},{value:"Vehicular Incident",label:"Vehicular Incident"},{value:"Pandemic / Emerging and Re-emerging Diseases",label:"Pandemic / Emerging and Re-emerging Diseases"},...n.hazard&&!["Typhoon","Flood","Rain-induced Landslide","Fire","Drought","Earthquake","Vehicular Incident","Pandemic / Emerging and Re-emerging Diseases"].includes(n.hazard)?[{value:n.hazard,label:n.hazard}]:[]],placeholder:"Select hazard"}),e.jsx("div",{children:e.jsx("button",{onClick:()=>p(d),className:"ml-2 px-2 py-1 rounded-full bg-red-500 text-white text-xs",children:"✕"})})]}),(h=n.categories)==null?void 0:h.map((x,y)=>e.jsxs("div",{className:"mb-6 border rounded-lg p-4 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("input",{type:"text",value:x.type,onChange:f=>c(d,y,()=>({type:R(f.target.value)})),className:"font-medium text-gray-700 bg-transparent border-b border-gray-300 focus:outline-none px-1",placeholder:"Enter Category"}),e.jsx("button",{onClick:()=>s(d,y),className:"ml-2 px-2 py-1 bg-red-400 text-white text-xs rounded-full",children:"✕"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Item"}),e.jsx("th",{className:"border px-2 py-1",children:"Total"}),e.jsxs("th",{className:"border px-2 py-1",children:["Percentage or no. at Risk ",e.jsx("br",{})," ","(or will be affected)"]}),e.jsx("th",{className:"border px-2 py-1",children:"Location"}),e.jsx("th",{className:"border px-2 py-1"})]})}),e.jsx("tbody",{children:x.rows.map((f,N)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:f.item,onChange:v=>b(d,y,N,"item",R(v.target.value)),className:"border w-full px-2 py-1 text-xs text-center rounded",placeholder:"Enter Item"})}),["total","percent","location"].map((v,w)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:f[v],onChange:S=>{let P=S.target.value;v==="percent"&&(P=P.replace(/%/g,""),P!==""&&(P=P+"%")),b(d,y,N,v,P)},className:"border w-full px-2 py-1 text-xs text-center rounded"})},w)),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-600 hover:bg-red-300 hover:text-white",onClick:()=>o(d,y,N),children:"✕"})})]},N))})]})}),e.jsxs("button",{onClick:()=>i(d,y),className:"inline-flex items-center gap-1 mt-3 px-4 py-1.4 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Item"]})]},y)),e.jsxs("button",{onClick:()=>l(d),className:"inline-flex items-center gap-1 mt-3 px-3 py-1.5 text-xs font-medium border border-green-500 text-green-600 rounded-md hover:bg-green-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Category"]})]},d)}),e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-1 mt-0 mb-3 px-5 py-1.5 text-xs font-medium border border-purple-500 text-purple-600 rounded-md hover:bg-purple-600 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Hazard"]})]})},Ft=()=>{const{craData:t,setCraData:a}=g.useContext(C),m={name:"",families:"",individuals:"",ownerGovt:!1,ownerPrivate:!1,inspectedYes:!1,inspectedNo:!1,mouYes:!1,mouNo:!1},c=t.evacuation_list||[m],b=o=>{a({...t,evacuation_list:o})},u=(o,r,n)=>{const d=[...c];n.forEach(h=>d[o][h]=!1),d[o][r]=!0,b(d)},p=(o,r,n)=>{const d=[...c];d[o][r]=n,b(d)},l=()=>{b([...c,{...m}])},s=o=>{const r=[...c];r.splice(o,1),b(r)},i=(o,r)=>e.jsx("button",{onClick:r,className:"w-full flex items-center justify-center hover:bg-gray-100 p-1 rounded text-center",children:o?e.jsx(Q,{className:"w-4 h-4 text-green-600"}):e.jsx(at,{className:"w-4 h-4 text-gray-400"})});return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"text-md font-bold mb-4 mt-4",children:"4.3 Inventory of Evacuation Centers / Isolation Facilities"}),e.jsxs("table",{className:"w-full border border-gray-300 text-sm text-center",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"Name of Evacuation Center / Isolation Facility"}),e.jsx("th",{className:"border px-2 py-1",colSpan:2,children:"Capacity"}),e.jsx("th",{className:"border px-2 py-1",colSpan:2,children:"Owner"}),e.jsx("th",{className:"border px-2 py-1",colSpan:2,children:"Inspected by an Engineer"}),e.jsx("th",{className:"border px-2 py-1",colSpan:2,children:"Presence of Memorandum of Understanding"}),e.jsx("th",{className:"border px-2 py-1"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Gov’t"}),e.jsx("th",{className:"border px-2 py-1",children:"Private"}),e.jsx("th",{className:"border px-2 py-1",children:"Yes"}),e.jsx("th",{className:"border px-2 py-1",children:"No"}),e.jsx("th",{className:"border px-2 py-1",children:"Yes"}),e.jsx("th",{className:"border px-2 py-1",children:"No"}),e.jsx("th",{className:"border px-2 py-1"})]})]}),e.jsx("tbody",{children:c.map((o,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:o.name,onChange:n=>p(r,"name",R(n.target.value)),className:"w-full border px-1 py-0.5 text-sm text-center",placeholder:"Enter Facility"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",min:0,value:o.families,onChange:n=>p(r,"families",n.target.value),className:"w-full border px-1 py-0.5 text-sm text-center",placeholder:"Families"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",min:0,value:o.individuals,onChange:n=>p(r,"individuals",n.target.value),className:"w-full border px-1 py-0.5 text-sm text-center",placeholder:"Individuals"})}),e.jsx("td",{className:"border",children:i(o.ownerGovt,()=>u(r,"ownerGovt",["ownerGovt","ownerPrivate"]))}),e.jsx("td",{className:"border",children:i(o.ownerPrivate,()=>u(r,"ownerPrivate",["ownerGovt","ownerPrivate"]))}),e.jsx("td",{className:"border",children:i(o.inspectedYes,()=>u(r,"inspectedYes",["inspectedYes","inspectedNo"]))}),e.jsx("td",{className:"border",children:i(o.inspectedNo,()=>u(r,"inspectedNo",["inspectedYes","inspectedNo"]))}),e.jsx("td",{className:"border",children:i(o.mouYes,()=>u(r,"mouYes",["mouYes","mouNo"]))}),e.jsx("td",{className:"border",children:i(o.mouNo,()=>u(r,"mouNo",["mouYes","mouNo"]))}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>s(r),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},r))})]}),e.jsxs("button",{onClick:l,className:"inline-flex items-center gap-1 mt-2 px-4 py-1.4 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},Tt=t=>{if(t.probability===""||t.effect===""||t.management==="")return"";const a=(Number(t.probability)+Number(t.effect)+Number(t.management))/3;return parseFloat(a.toFixed(3))};function At({hazards:t,updateField:a,addHazard:m,removeHazard:c}){const b=t.map((u,p)=>({...u,index:p,average:Tt(u)})).sort((u,p)=>(p.average||0)-(u.average||0)).map((u,p)=>({...u,rank:u.average?p+1:""}));return e.jsxs("div",{className:"overflow-x-auto border rounded-lg shadow-sm mb-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 border-b text-sm",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Legend"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Probability"}),e.jsx("p",{children:"1 – Most Unlikely"}),e.jsx("p",{children:"2 – Low Probability"}),e.jsx("p",{children:"3 – Perhaps"}),e.jsx("p",{children:"4 – High Probability"}),e.jsx("p",{children:"5 – Almost Certain"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Effect"}),e.jsx("p",{children:"1 – Negligible"}),e.jsx("p",{children:"2 – Low Impact"}),e.jsx("p",{children:"3 – Maintain Impact"}),e.jsx("p",{children:"4 – High Impact"}),e.jsx("p",{children:"5 – Devastating"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Management"}),e.jsx("p",{children:"1 – Most Manageable"}),e.jsx("p",{children:"2 – Manageable"}),e.jsx("p",{children:"3 – Most Extensive"}),e.jsx("p",{children:"4 – Most Frequent"}),e.jsx("p",{children:"5 – Most Severe"})]})]})]}),e.jsxs("table",{className:"w-full border text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"Hazard / Risk"}),e.jsx("th",{className:"border px-2 py-1",children:"Probability"}),e.jsx("th",{className:"border px-2 py-1",children:"Effect"}),e.jsx("th",{className:"border px-2 py-1",children:"Management"}),e.jsx("th",{className:"border px-2 py-1",children:"Basis"}),e.jsx("th",{className:"border px-2 py-1",children:"Average"}),e.jsx("th",{className:"border px-2 py-1",children:"Ranking"}),e.jsx("th",{className:"border px-2 py-1"})]})}),e.jsx("tbody",{children:b.map(u=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("select",{className:"border border-gray-300 rounded-md p-2 text-sm w-48 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",value:u.hazard,onChange:p=>a(u.index,"hazard",p.target.value),children:[e.jsx("option",{value:"",children:"Select Hazard"}),["Typhoon","Flood","Rain-induced Landslide","Fire","Drought","Earthquake","Vehicular Incident","Pandemic / Emerging and Re-emerging Diseases"].map((p,l)=>e.jsx("option",{value:p,children:p},l))]})}),["probability","effect","management"].map(p=>e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("select",{className:"w-full border p-1",value:u[p],onChange:l=>a(u.index,p,l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),[1,2,3,4,5].map(l=>e.jsx("option",{value:l,children:l},l))]})},p)),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{className:"w-full border p-1",value:u.basis,onChange:p=>a(u.index,"basis",p.target.value),placeholder:"Enter Basis"})}),e.jsx("td",{className:"border px-2 py-1 text-center bg-gray-50 font-semibold",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:u.average,onChange:p=>a(u.index,"average",p.target.value)})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:u.rank}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>c(u.index),children:"✕"})})]},u.index))})]}),e.jsx("div",{className:"p-2 m-auto",children:e.jsxs("button",{onClick:m,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add new row"]})})]})}const Mt=()=>{const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{(!t.hazards||t.hazards.length===0)&&a(u=>({...u,hazards:[{hazard:"",probability:"",effect:"",management:"",basis:""}]}))},[t,a]);const m=(u,p,l)=>{const s=[...t.hazards];s[u][p]=p==="probability"||p==="effect"||p==="management"?l===""?"":Number(l):l,a(i=>({...i,hazards:s}))},c=()=>{const u=[...t.hazards||[]];u.push({hazard:"",probability:"",effect:"",management:"",basis:""}),a(p=>({...p,hazards:u})),j.success("Hazard added!")},b=u=>{var s;const p=[...t.hazards],l=((s=p[u])==null?void 0:s.hazard)||"Hazard";p.splice(u,1),a(i=>({...i,hazards:p})),j.error(`${l} removed!`)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(k,{title:"2. Identifying Possible Risks or Dangers that could affect the Barangay",children:[e.jsx(At,{hazards:t.hazards||[],updateField:m,addHazard:c,removeHazard:b}),e.jsx(gt,{})]}),e.jsx(k,{title:"3. Development an exposure database of those that can be directly affected by risks and hazards",children:e.jsx(St,{})}),e.jsxs(k,{title:"4. Effects of Hazards or Disasters",children:[e.jsx(Et,{}),e.jsx(Pt,{})]}),e.jsx(k,{title:`5. List of Designated Center and Temporary Isolation Facilities in the
            Barangay and City (whether owned by the goverment or private)`,children:e.jsx(Ft,{})})]})},I=["With Disability","Pregnant Women","Number of Families","Number of Individuals","0-6 months","7 mos - 2 yrs","3-5 yrs","6-12 yrs","13-17 yrs","18-59 yrs","60+ yrs","Physical Health","Mental Health"],K=["Number of Casualties","Deaths","Injured","Missing"],X=[{category:"Agriculture",defaultDescriptions:["Farming (extent of damage in land area or worth of damage)"]},{category:"Fishing",defaultDescriptions:["Fishing Equipment (quantity or worth of damage)","Fishing Boats (damaged or lost)"]}],Z=[{defaultDescriptions:["Transportation Facilities (extent of damage or worth of damage)"]},{category:"Roads",defaultDescriptions:["National (Number of impassable road or worth of damage)","Provincial (Number of impassable road or worth of damage)","City (Number of impassable road or worth of damage)","Barangay (Number of impassable road or worth of damage)"]},{category:"Electric and Water Supply",defaultDescriptions:["Electric Supply (Number of households affected)","Water Supply (Number of households affected)"]},{category:"Bridges",defaultDescriptions:["Bailey (Number of impassable bridges or worth of damages)","Concrete (Number of impassable bridges or worth of damages)","Wooden (Number of impassable bridges or worth of damages)","Railway (Number of impassable bridges or worth of damages)"]},{category:"Communication Facilities",defaultDescriptions:["PLDT (Number of damaged lines or worth of damages)","BAYANTEL (Number of damaged lines or worth of damages)","Cell Sites (Number of damaged lines or worth of damages)","Radio (Number of damaged lines or worth of damages)","Repeaters (Number of damaged lines or worth of damages)"]}],ee=["Livestock (quantity or value)","Farm animals (quantity)","Poultry and Fowl (quantity)","Agriculture/Farm Inputs"],Lt=["Totally Damaged (quantity or worth of damage)","Partially Damaged (quantity or worth of damage)"],te=["Houses","Schools","Hospitals","Health Center","Government Offices","Public Markets","Flood Control","Commercial Facilities"].map(t=>({category:t,defaultDescriptions:[...Lt]})),he=()=>({disaster_name:"",year:"",population:I.map(t=>({category:t,value:"",source:""})),impacts:K.map(t=>({effect_type:t,value:"",source:""})),property:X.map(t=>({category:t.category,descriptions:t.defaultDescriptions.map(a=>({description:a,value:"",source:""}))})),structure:te.map(t=>({category:t.category,descriptions:t.defaultDescriptions.map(a=>({description:a,value:"",source:""}))})),agriculture:ee.map(t=>({description:t,value:"",source:""})),lifelines:Z.map(t=>({category:t.category||t.defaultDescriptions,descriptions:Array.isArray(t.defaultDescriptions)?t.defaultDescriptions.map(a=>({description:a,value:"",source:""})):[{description:t.defaultDescriptions,value:"",source:""}]}))}),Bt=({calamities:t,updateCell:a})=>e.jsxs("table",{className:"w-full border text-sm mt-4",children:[e.jsxs("thead",{children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[200px]",children:"Calamity/Disaster"}),t.map((m,c)=>e.jsxs(D.Fragment,{children:[e.jsx("th",{className:"border text-center",children:e.jsx("input",{type:"text",placeholder:"Disaster Name",value:m.disaster_name,className:"border w-full text-center font-bold",onChange:b=>a(c,"disaster_name",R(b.target.value))})}),e.jsx("th",{className:"border text-center",children:"Source of Information"})]},c))]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[200px]",children:"Year"}),t.map((m,c)=>e.jsxs(D.Fragment,{children:[e.jsx("th",{className:"border text-center",children:e.jsx("input",{type:"text",placeholder:"e.g. 2020 or 2020-2026",value:m.year,className:"border text-center w-full",onChange:b=>a(c,"year",b.target.value)})}),e.jsx("th",{className:"border text-center",children:"Barangay"})]},c))]}),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"POPULATION"})}),e.jsx("tr",{children:e.jsx("th",{className:"border text-center w-[200px]",children:"Affected Population"})})]}),e.jsxs("tbody",{children:[I.map((m,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:m}),t.map((b,u)=>{var l;const p=((l=b.population)==null?void 0:l[c])||{value:"",source:""};return e.jsxs(D.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border text-center",value:p.value,onChange:s=>a(u,"population",s.target.value,c,null,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:p.source,onChange:s=>a(u,"population",s.target.value,c,null,"source")})})]},u)})]},c)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"EFFECTS/IMPACTS OF DISASTER"})}),K.map((m,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:m}),t.map((b,u)=>{var l;const p=((l=b.impacts)==null?void 0:l[c])||{value:"",source:""};return e.jsxs(D.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border text-center",value:p.value,onChange:s=>a(u,"impacts",s.target.value,c,null,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:p.source,onChange:s=>a(u,"impacts",s.target.value,c,null,"source")})})]},u)})]},`impact-${c}`)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"DAMAGE TO PROPERTY"})}),X.map((m,c)=>e.jsxs(D.Fragment,{children:[e.jsx("tr",{children:e.jsx("th",{className:"border text-left font-bold bg-gray-50 px-2",colSpan:1+t.length*2,children:m.category})}),m.defaultDescriptions.map((b,u)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:b}),t.map((p,l)=>{var i,o,r;const s=((r=(o=(i=p.property)==null?void 0:i[c])==null?void 0:o.descriptions)==null?void 0:r[u])||{value:"",source:""};return e.jsxs(D.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.value,onChange:n=>a(l,"property",n.target.value,c,u,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.source,onChange:n=>a(l,"property",n.target.value,c,u,"source")})})]},`prop-${l}-${c}-${u}`)})]},`desc-${c}-${u}`))]},`category-${c}`)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"AGRICULTURE"})}),ee.map((m,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:m}),t.map((b,u)=>{var l;const p=((l=b.agriculture)==null?void 0:l[c])||{value:"",source:""};return e.jsxs(D.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:p.value,onChange:s=>a(u,"agriculture",s.target.value,c,null,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:p.source,onChange:s=>a(u,"agriculture",s.target.value,c,null,"source")})})]},u)})]},`agri-${c}`)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"DAMAGE PROPERTIES (STRUCTURES)"})}),te.map((m,c)=>e.jsxs(D.Fragment,{children:[e.jsx("tr",{children:e.jsx("th",{className:"border text-left font-bold bg-gray-50 px-2",colSpan:1+t.length*2,children:m.category})}),m.defaultDescriptions.map((b,u)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:b}),t.map((p,l)=>{var i,o,r;const s=((r=(o=(i=p.structure)==null?void 0:i[c])==null?void 0:o.descriptions)==null?void 0:r[u])||{value:"",source:""};return e.jsxs(D.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.value,onChange:n=>a(l,"structure",n.target.value,c,u,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.source,onChange:n=>a(l,"structure",n.target.value,c,u,"source")})})]},`struct-${l}-${c}-${u}`)})]},`structure-${c}-${u}`))]},`structure-${c}`)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"LIFELINES"})}),Z.map((m,c)=>e.jsxs(D.Fragment,{children:[e.jsx("tr",{children:e.jsx("th",{className:"border text-left font-bold bg-gray-50 px-2",colSpan:1+t.length*2,children:m.category||"General Lifeline"})}),m.defaultDescriptions.map((b,u)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:b}),t.map((p,l)=>{var i,o,r;const s=((r=(o=(i=p.lifelines)==null?void 0:i[c])==null?void 0:o.descriptions)==null?void 0:r[u])||{value:"",source:""};return e.jsxs(D.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.value,onChange:n=>a(l,"lifelines",n.target.value,c,u,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.source,onChange:n=>a(l,"lifelines",n.target.value,c,u,"source")})})]},`life-${l}-${c}-${u}`)})]},`life-${c}-${u}`))]},`life-${c}`))]})]});function Ht(){const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{a(u=>{var p;return{...u,calamities:(p=u.calamities)!=null&&p.length?u.calamities.map(l=>{var s,i,o,r,n,d;return{...l,population:(s=l.population)!=null&&s.length?l.population:I.map(h=>({category:h,value:"",source:""})),impacts:(i=l.impacts)!=null&&i.length?l.impacts:K.map(h=>({effect_type:h,value:"",source:""})),property:(o=l.property)!=null&&o.length?l.property:X.map(h=>({category:h.category,descriptions:h.defaultDescriptions.map(x=>({description:x,value:"",source:""}))})),structure:(r=l.structure)!=null&&r.length?l.structure:te.map(h=>({category:h.category,descriptions:h.defaultDescriptions.map(x=>({description:x,value:"",source:""}))})),agriculture:(n=l.agriculture)!=null&&n.length?l.agriculture:ee.map(h=>({description:h,value:"",source:""})),lifelines:(d=l.lifelines)!=null&&d.length?l.lifelines:Z.map(h=>({category:h.category||"General",descriptions:(Array.isArray(h.defaultDescriptions)?h.defaultDescriptions:[h.defaultDescriptions]).map(x=>({description:x,value:"",source:""}))}))}}):[he()]}})},[a]);const m=g.useCallback(()=>{a(u=>({...u,calamities:[...u.calamities,he()]})),j.success("New calamity added!")},[a]),c=g.useCallback(()=>{a(u=>u.calamities.length<=1?u:{...u,calamities:u.calamities.slice(0,-1)}),j.error("Last calamity removed!")},[a]),b=g.useCallback((u,p,l,s=null,i=null,o=null)=>{a(r=>{const n=[...r.calamities];return["population","impacts","agriculture"].includes(p)?s!==null&&o&&(n[u]={...n[u],[p]:n[u][p].map((d,h)=>h===s?{...d,[o]:l}:d)}):["property","structure","lifelines"].includes(p)?s!==null&&i!==null&&o&&(n[u]={...n[u],[p]:n[u][p].map((d,h)=>h===s?{...d,descriptions:d.descriptions.map((x,y)=>y===i?{...x,[o]:l}:x)}:d)}):n[u]={...n[u],[p]:l},{...r,calamities:n}})},[a]);return e.jsx("div",{children:e.jsxs(k,{title:"1. Identify Calamities or Disasters in the Past Years and their Impact to the Community",children:[e.jsxs("div",{className:"flex justify-between items-start mt-2",children:[e.jsxs("div",{className:"flex flex-col text-xs text-gray-600 italic space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Leave a cell blank if the value is zero."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Click ",e.jsx("span",{className:"font-bold",children:"+"})," to add two columns, and ",e.jsx("span",{className:"font-bold",children:"–"})," to remove two columns."]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:m,className:"group relative flex items-center justify-center w-8 h-8 bg-blue-300 text-white rounded-full shadow hover:bg-blue-700 transition",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{className:"absolute top-12 opacity-0 group-hover:opacity-100 transition bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:"Add Calamity"})]}),e.jsxs("button",{onClick:c,className:"group relative flex items-center justify-center w-8 h-8 bg-red-300 text-white rounded-full shadow hover:bg-red-700 transition",children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsx("span",{className:"absolute top-12 opacity-0 group-hover:opacity-100 transition bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:"Remove Calamity"})]})]})]}),e.jsx("div",{className:"overflow-x-auto mt-2",children:e.jsx("div",{className:"min-w-max",children:e.jsx(Bt,{calamities:t.calamities||[],updateCell:b})})})]})})}const xe={totalFamilies:"",totalIndividuals:"",populationAtRiskFamilies:"",populationAtRiskIndividuals:"",evacuationCenterPlanA:"",personsCanBeAccommodatedPlanAFamilies:"",personsCanBeAccommodatedPlanAIndividuals:"",personsCannotBeAccommodatedPlanAFamilies:"",personsCannotBeAccommodatedPlanAIndividuals:"",evacuationCenterPlanB:"",personsCannotBeAccommodatedPlanABFamilies:"",personsCannotBeAccommodatedPlanABIndividuals:"",remarks:""},Ot=()=>{const{craData:t,setCraData:a}=g.useContext(C),m=g.useRef([]);g.useEffect(()=>{if(!t.evacuation_center_inventory){const s=Array.from({length:7},()=>({...xe}));a({...t,evacuation_center_inventory:s})}},[]);const c=t.evacuation_center_inventory||[],b=(s,i,o)=>{const r=[...c];r[s]={...r[s],[i]:o},a({...t,evacuation_center_inventory:r})},u=()=>{a({...t,evacuation_center_inventory:[...c,{...xe}]}),j.success("Row added successfully!")},p=s=>{a({...t,evacuation_center_inventory:c.filter((i,o)=>o!==s)}),j.error("Row removed!")},l=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{m.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[c]),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-1",children:"Purok"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Total Population"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Number of Population at Risk"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-1",children:"Name of Evacuation Center (Plan A) Government-owned"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Number of Persons who can be accommodated"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Number of Persons who cannot be accommodated"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-1",children:"Name of Evacuation Center (Plan B) Privately-owned"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Number of Persons who cannot be accommodated at Plan A & B"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-1 w-[110px]",children:"Remarks"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-1 w-[40px]"})]}),e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"})]})]}),e.jsx("tbody",{children:c.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:i+1}),["totalFamilies","totalIndividuals","populationAtRiskFamilies","populationAtRiskIndividuals","evacuationCenterPlanA","personsCanBeAccommodatedPlanAFamilies","personsCanBeAccommodatedPlanAIndividuals","personsCannotBeAccommodatedPlanAFamilies","personsCannotBeAccommodatedPlanAIndividuals","evacuationCenterPlanB","personsCannotBeAccommodatedPlanABFamilies","personsCannotBeAccommodatedPlanABIndividuals","remarks"].map((o,r)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:n=>m.current[i*13+r]=n,rows:1,value:s[o],onChange:n=>{b(i,o,n.target.value),l(n)},className:"border w-full px-2 py-1 text-center resize-none overflow-hidden text-xs"})},o)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>p(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i))})]})}),e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},Ae={riskLevel:"",purok:"",totalFamilies:"",totalIndividuals:"",atRiskFamilies:"",atRiskIndividuals:"",safeEvacuationArea:""},be=()=>Array.from({length:7},(t,a)=>({...Ae,purok:(a+1).toString()})),zt=({disaster:t,updateDisaster:a,removeDisaster:m})=>{const c=(s,i,o)=>{const r=[...t.rows];r[s]={...r[s],[i]:o},a({...t,rows:r})},b=()=>{const s=(t.rows.length+1).toString();a({...t,rows:[...t.rows,{...Ae,purok:s}]})},u=s=>{a({...t,rows:t.rows.filter((i,o)=>o!==s)})},p=t.rows.reduce((s,i)=>(s.families+=Number(i.totalFamilies)||0,s.individuals+=Number(i.totalIndividuals)||0,s.atRiskFamilies+=Number(i.atRiskFamilies)||0,s.atRiskIndividuals+=Number(i.atRiskIndividuals)||0,s),{families:0,individuals:0,atRiskFamilies:0,atRiskIndividuals:0}),l={totalFamilies:"Enter # of families",totalIndividuals:"Enter # of individuals",atRiskFamilies:"Enter # of at-risk families",atRiskIndividuals:"Enter # of at-risk individuals",safeEvacuationArea:"Enter safe evacuation area"};return e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("select",{value:t.name,onChange:s=>a({...t,name:s.target.value}),className:"text-md font-bold bg-transparent border-none focus:outline-none w-full",children:[e.jsx("option",{value:"",children:"Select Disaster"}),e.jsx("option",{value:"Typhoon",children:"Typhoon"}),e.jsx("option",{value:"Flood",children:"Flood"}),e.jsx("option",{value:"Rain-induced Landslide",children:"Rain-induced Landslide"}),e.jsx("option",{value:"Earthquake",children:"Earthquake"}),e.jsx("option",{value:"Fire",children:"Fire"}),e.jsx("option",{value:"Drought",children:"Drought"}),e.jsx("option",{value:"Pandemic / Emerging and Re-emerging Diseases",children:"Pandemic / Emerging and Re-emerging Diseases"}),e.jsx("option",{value:"Vehicular Incident",children:"Vehicular Incident"})]}),e.jsx("button",{onClick:m,className:"w-6 h-6 flex items-center justify-center rounded-full bg-red-500 text-white hover:bg-red-600 transition-colors duration-200",children:"✕"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1 w-32",children:"Risk Level"}),e.jsx("th",{className:"border px-2 py-1",children:"Purok"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Total Population"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"At-Risk Population"}),e.jsx("th",{className:"border px-2 py-1",children:"Safe Evacuation Area"}),e.jsx("th",{className:"border px-2 py-1 text-center"})]}),e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"})]})]}),e.jsxs("tbody",{children:[t.rows.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsxs("select",{value:s.riskLevel,onChange:o=>c(i,"riskLevel",o.target.value),className:"border w-full px-2 py-1 text-xs text-center rounded",children:[e.jsx("option",{value:"",children:"--Select--"}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:s.purok}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",value:s.totalFamilies,onChange:o=>c(i,"totalFamilies",o.target.value),placeholder:l.totalFamilies,className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",value:s.totalIndividuals,onChange:o=>c(i,"totalIndividuals",o.target.value),placeholder:l.totalIndividuals,className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",value:s.atRiskFamilies,onChange:o=>c(i,"atRiskFamilies",o.target.value),placeholder:l.atRiskFamilies,className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",value:s.atRiskIndividuals,onChange:o=>c(i,"atRiskIndividuals",o.target.value),placeholder:l.atRiskIndividuals,className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"text",value:s.safeEvacuationArea,onChange:o=>c(i,"safeEvacuationArea",R(o.target.value)),placeholder:l.safeEvacuationArea,className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>u(i),children:"✕"})})]},i)),e.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:p.families}),e.jsx("td",{className:"border px-2 py-1 text-center",children:p.individuals}),e.jsx("td",{className:"border px-2 py-1 text-center",children:p.atRiskFamilies}),e.jsx("td",{className:"border px-2 py-1 text-center",children:p.atRiskIndividuals}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center"})]})]})]})}),e.jsxs("button",{onClick:b,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},qt=()=>{const{craData:t,setCraData:a}=g.useContext(C),m=()=>{a(u=>{const p=u.affected_areas||[];if(p.length===0)return{...u,affected_areas:[{id:Date.now(),name:"",rows:be()}]};const l=p[p.length-1],s=l.rows.map(i=>({...i}));return{...u,affected_areas:[...p,{id:Date.now(),name:l.name||"",rows:s}]}})},c=(u,p)=>{a({...t,affected_areas:t.affected_areas.map(l=>l.id===u?p:l)})},b=u=>{a({...t,affected_areas:t.affected_areas.filter(p=>p.id!==u)})};return D.useEffect(()=>{(!t.affected_areas||t.affected_areas.length===0)&&a({...t,affected_areas:[{id:Date.now(),name:"Typhoon",rows:be()}]})},[]),e.jsxs("div",{children:[e.jsx("div",{className:"mb-10 border-2 border-purple-300 rounded-xl p-5 bg-purple-50 shadow-sm",children:(t.affected_areas||[]).map(u=>e.jsx(zt,{disaster:u,updateDisaster:p=>c(u.id,p),removeDisaster:()=>b(u.id)},u.id))}),e.jsxs("button",{onClick:m,className:"inline-flex items-center gap-1 mt-0 mb-3 px-2 py-1 text-xs font-medium border border-green-500 text-green-600 rounded-md hover:bg-green-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Disaster"]})]})},ye={type:"",evacuation:"",origin:"",items:""},$t=()=>{const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{t.livelihood_evacuation||a({...t,livelihood_evacuation:[ye]})},[]);const m=t.livelihood_evacuation||[],c=(p,l,s)=>{const i=[...m];i[p]={...i[p],[l]:s},a({...t,livelihood_evacuation:i})},b=()=>{a({...t,livelihood_evacuation:[...m,{...ye}]}),j.success("Row added successfully!")},u=p=>{a({...t,livelihood_evacuation:m.filter((l,s)=>s!==p)}),j.error("Row removed!")};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Livelihood and Evacuation"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Types of Livelihoods"}),e.jsx("th",{className:"border px-2 py-1",children:"Evacuation Site/Area (Purok)"}),e.jsx("th",{className:"border px-2 py-1",children:"Place of Origin (Purok)"}),e.jsx("th",{className:"border px-2 py-1",children:"Number of items that can be accommodated"}),e.jsx("th",{className:"border px-2 py-1 text-center"})]})}),e.jsx("tbody",{children:m.map((p,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:p.type,onChange:s=>c(l,"type",R(s.target.value)),className:"border w-full px-2 py-1 text-xs text-center",placeholder:"Enter livelihood"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:p.evacuation,onChange:s=>c(l,"evacuation",s.target.value),className:"border w-full px-2 py-1 text-xs text-center",placeholder:"Enter purok"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:p.origin,onChange:s=>c(l,"origin",s.target.value),className:"border w-full px-2 py-1 text-xs text-center",placeholder:"Enter purok"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:p.items,onChange:s=>c(l,"items",s.target.value),className:"border w-full px-2 py-1 text-xs text-center",placeholder:"Enter number of items"})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>u(l),children:"✕"})})]},l))})]})}),e.jsxs("button",{onClick:b,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},ge={item:"",quantity:"",remarks:""},Gt=()=>{const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{t.food_inventory||a({...t,food_inventory:[ge]})},[]);const m=t.food_inventory||[],c=(p,l,s)=>{const i=[...m];i[p]={...i[p],[l]:s},a({...t,food_inventory:i})},b=()=>{a({...t,food_inventory:[...m,{...ge}]}),j.success("Row added successfully!")},u=p=>{a({...t,food_inventory:m.filter((l,s)=>s!==p)}),j.error("Row removed!")};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Food Inventory"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1 whitespace-nowrap",children:"Item"}),e.jsx("th",{className:"border px-2 py-1 whitespace-nowrap",children:"Quantity"}),e.jsx("th",{className:"border px-2 py-1 whitespace-nowrap",children:"Remarks"}),e.jsx("th",{className:"border px-2 py-1 w-[40px] text-center"})]})}),e.jsx("tbody",{children:m.map((p,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:p.item,onChange:s=>c(l,"item",R(s.target.value)),className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden",rows:1,onInput:s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"},placeholder:"Enter Item"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:p.quantity,onChange:s=>c(l,"quantity",s.target.value),className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden",rows:1,onInput:s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"},placeholder:"Enter Quantity"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:p.remarks,onChange:s=>c(l,"remarks",R(s.target.value)),className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden",rows:1,onInput:s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"},placeholder:"Enter Remarks"})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>u(l),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200",children:"✕"})})]},l))})]})}),e.jsxs("button",{onClick:b,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},fe={evacuationCenter:"",typeOfGoods:"",quantity:"",unit:"",beneficiaries:"",address:""},Wt=()=>{const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{t.relief_goods||a({...t,relief_goods:[fe]})},[]);const m=t.relief_goods||[],c=(l,s,i)=>{const o=[...m];o[l]={...o[l],[s]:i},a({...t,relief_goods:o})},b=()=>{a({...t,relief_goods:[...m,{...fe}]}),j.success("Row added successfully!")},u=l=>{if(m.length===1){j.error("At least one row is required!");return}a({...t,relief_goods:m.filter((s,i)=>i!==l)}),j.error("Row removed!")},p=l=>{l&&(l.style.height="auto",l.style.height=l.scrollHeight+"px")};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Relief Goods (Food and Non-Food Items)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Name of Evacuation Center"}),e.jsx("th",{className:"border px-2 py-1",children:"Type of Relief Goods"}),e.jsx("th",{className:"border px-2 py-1",children:"Quantity"}),e.jsx("th",{className:"border px-2 py-1",children:"Unit"}),e.jsx("th",{className:"border px-2 py-1",children:"Name of Beneficiaries"}),e.jsx("th",{className:"border px-2 py-1",children:"Beneficiaries’ Address"}),e.jsx("th",{className:"border px-2 py-1 w-[40px] text-center"})]})}),e.jsx("tbody",{children:m.map((l,s)=>{const i={evacuationCenter:"Enter evacuation center",typeOfGoods:"Enter type of goods",quantity:"Enter quantity",unit:"Enter unit",beneficiaries:"Enter beneficiaries",address:"Enter address"};return e.jsxs("tr",{children:[["evacuationCenter","typeOfGoods","quantity","unit","beneficiaries","address"].map(o=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{rows:1,value:l[o],placeholder:i[o],onChange:r=>{c(s,o,R(r.target.value)),p(r.target)},ref:r=>p(r),className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden"})},o)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>u(s),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},s)})})]})}),e.jsxs("button",{onClick:b,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},Vt=()=>e.jsxs("div",{children:[e.jsx(k,{title:`6. Inventory of Evacuation Centers where Families can Relocate
                or Stay During Disasters`,children:e.jsx(Ot,{})}),e.jsx(k,{title:`7. List of Places/Areas where affected residents can evacuate
            during times of impending or current disaster`,children:e.jsx(qt,{})}),e.jsx(k,{title:"8. List of Places/Areas where Sources of Livelihood can be evacuated",children:e.jsx($t,{})}),e.jsx(k,{title:"9. Inventory of Prepositioned Food and Non-food Items",children:e.jsx(Gt,{})}),e.jsx(k,{title:`10. List of Designated Evacuation Centers that will serve as Distribution
            Sites for Relief Goods(Food and Non-Food Items)`,children:e.jsx(Wt,{})})]}),je={process:"",origin:"",remarks:""},Ut=()=>{const{craData:t,setCraData:a}=g.useContext(C);g.useEffect(()=>{t.distribution_process||a({...t,distribution_process:[je]})},[]);const m=t.distribution_process||[],c=l=>{l&&(l.style.height="auto",l.style.height=l.scrollHeight+"px")},b=(l,s,i)=>{const o=[...m];o[l]={...o[l],[s]:i},a({...t,distribution_process:o})},u=()=>{a({...t,distribution_process:[...m,{...je}]}),j.success("Row added!")},p=l=>{if(m.length===1){j.error("At least one row is required!");return}a({...t,distribution_process:m.filter((s,i)=>i!==l)}),j.success("Row removed!")};return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Distribution Process"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-400 text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-400 px-2 py-1 w-1/3",children:"Distribution Process"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1 w-1/3",children:"Origin of Relief Goods"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1 w-1/3",children:"Challenge / Status / Remarks"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1 w-[100px]"})]})}),e.jsx("tbody",{children:m.map((l,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("textarea",{value:l.process,onChange:i=>b(s,"process",i.target.value),ref:c,onInput:i=>c(i.target),className:"w-full resize-none overflow-hidden border rounded p-1",rows:1,placeholder:"Enter distribution process"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("textarea",{value:l.origin,onChange:i=>b(s,"origin",i.target.value),ref:c,onInput:i=>c(i.target),className:"w-full resize-none overflow-hidden border rounded p-1",rows:1,placeholder:"Enter origin of relief goods"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("textarea",{value:l.remarks,onChange:i=>b(s,"remarks",i.target.value),ref:c,onInput:i=>c(i.target),className:"w-full resize-none overflow-hidden border rounded p-1",rows:1,placeholder:"Enter remarks"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1 text-center",children:e.jsx("button",{type:"button",onClick:()=>p(s),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},s))})]})}),e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},Yt=["Training on RA 10121 (Philippine Disaster Risk Reduction and Management Act)","Training on RA 10821 (Children’s Emergency Relief and Protection Act)","Training on Child Protection in Emergencies","Training on Pre- Disaster Risk Assessment","Training on the Protocol for Management of the Dead and Missing","Training on Camp Management","Training on Incident Command System","Training on Psychological First Aid","First Aid at Basic Life Support Training","Basic Search and Rescue Training","Training on Psychological First Aid","Training on Mental Health and Psychosocial Support","Community-Based Reduction and Management (CBDRRM) Training","Mental Health and Psychosocial Support (MHPSS) Training","Training on the Conduct of Simulation/Drills for Priority Hazards","Training on Rapid Damage Assessment and Needs Analysis (RDANA)","Training on Minimum Health Protocols","Training on Contact Tracing and Reporting","Training on Public Service Continuity","Training on Basic Disease Surveillance and Reporting","QAS for BDRRM and Committee training workshop"],Ne={title:"",applies:"",duration:"",agency:"",dates:"",participants:"",names:""},Jt=()=>{const{craData:t,setCraData:a}=g.useContext(C),m=g.useRef([]);g.useEffect(()=>{t.trainings_inventory||a({...t,trainings_inventory:Yt.map(s=>({...Ne,title:s}))})},[]);const c=t.trainings_inventory||[],b=(s,i,o)=>{const r=[...c];r[s]={...r[s],[i]:o},a({...t,trainings_inventory:r})},u=()=>{a({...t,trainings_inventory:[...c,{...Ne}]}),j.success("Row added successfully!")},p=s=>{a({...t,trainings_inventory:c.filter((i,o)=>o!==s)}),j.error("Row removed!")},l=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{m.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[c]),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Trainings Inventory"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Title of the training"}),e.jsx("th",{className:"border px-2 py-1 w-[150px]",children:"Put a check if the item applies (✓) and cross (x) if it does not"}),e.jsx("th",{className:"border px-2 py-1",children:"Duration of training"}),e.jsx("th",{className:"border px-2 py-1 w-[180px]",children:"Agency or organization that provided the training"}),e.jsx("th",{className:"border px-2 py-1",children:"Inclusive dates of the training"}),e.jsx("th",{className:"border px-2 py-1",children:"Number of participants"}),e.jsx("th",{className:"border px-2 py-1",children:"Name of persons attended/ participated"}),e.jsx("th",{className:"border px-2 py-1 w-[40px] text-center"})]})}),e.jsx("tbody",{children:c.map((s,i)=>{const o={title:"Enter title or activity",duration:"Enter duration",agency:"Enter agency name",dates:"Enter date(s)",participants:"Enter number of participants",names:"Enter participant names"};return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:r=>m.current[i*6+0]=r,rows:1,value:s.title,onChange:r=>{b(i,"title",r.target.value),l(r)},placeholder:o.title,className:"border w-full px-2 py-1 text-md text-left resize-none overflow-hidden"})}),e.jsx("td",{className:"border px-2 py-1 w-[80px]",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("button",{onClick:()=>b(i,"applies","yes"),className:`p-1 rounded-full ${s.applies==="yes"?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(Q,{size:14})}),e.jsx("button",{onClick:()=>b(i,"applies","no"),className:`p-1 rounded-full ${s.applies==="no"?"bg-red-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(Y,{size:14})})]})}),["duration","agency","dates","participants","names"].map((r,n)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:d=>m.current[i*6+(n+1)]=d,rows:1,value:s[r],onChange:d=>{let h=d.target.value;(r==="dates"||r==="names")&&(h=R(h)),b(i,r,h),l(d)},placeholder:o[r],className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden"})},r)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>p(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i)})})]})}),e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},Qt=["Spine Board","Axe","Gasoline or Fuel","First Aid or Emergency Kit","Hand-held Radio","Helmet or hard hat","Batteries","Portable Generator or alternative source of electricity (ex: solar panel)","Boots","Rope","Search Light","Flash Light","Megaphone","Face Shield","Alcohol","Thermal scanner","Chainsaw","Cleaning materials (Ex: broom, dustpan, rugs, etc.)","Life Vest","Reflectorized Life Vest","Personal Protective Equipment (PPE)","Shovel"],ve={item:"",status:"",quantity:"",location:"",remarks:""},It=()=>{const{craData:t,setCraData:a}=g.useContext(C),m=g.useRef([]);g.useEffect(()=>{t.equipment_inventory||a({...t,equipment_inventory:Qt.map(s=>({...ve,item:s}))})},[]);const c=t.equipment_inventory||[],b=(s,i,o)=>{const r=[...c];r[s]={...r[s],[i]:o},a({...t,equipment_inventory:r})},u=()=>{a({...t,equipment_inventory:[...c,{...ve}]}),j.success("Row added successfully!")},p=s=>{a({...t,equipment_inventory:c.filter((i,o)=>o!==s)}),j.error("Row removed!")},l=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{m.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[c]),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Equipment Inventory"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Equipment"}),e.jsx("th",{className:"border px-2 py-1 w-[150px]",children:"Put a check (✓) if the items are found in the barangay and cross (x) if they are not"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Quantity"}),e.jsx("th",{className:"border px-2 py-1",children:"Location of the equipment"}),e.jsx("th",{className:"border px-2 py-1",children:"Remarks"}),e.jsx("th",{className:"border px-2 py-1 w-[40px]"})]})}),e.jsx("tbody",{children:c.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:o=>m.current[i*5]=o,rows:1,value:s.item,onChange:o=>{b(i,"item",o.target.value),l(o)},placeholder:"Enter Equipment",className:"border w-full px-2 py-1 text-left resize-none overflow-hidden"})}),e.jsx("td",{className:"border px-2 py-1 w-[80px]",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("button",{onClick:()=>b(i,"status","yes"),className:`p-1 rounded-full ${s.status==="yes"?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(Q,{size:14})}),e.jsx("button",{onClick:()=>b(i,"status","no"),className:`p-1 rounded-full ${s.status==="no"?"bg-red-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(Y,{size:14})})]})}),["quantity","location","remarks"].map((o,r)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:n=>m.current[i*5+(r+1)]=n,rows:1,value:s[o],onChange:n=>{b(i,o,R(n.target.value)),l(n)},className:"border w-full px-2 py-1 text-center resize-none overflow-hidden",placeholder:o.charAt(0).toUpperCase()+o.slice(1)})},o)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>p(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i))})]})}),e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},Kt=["BDRRMC Chairman","BDRRM Focal Person","Operation/Admin/ Infra/Shelter","Prevention & Mitigation Sub-Committee","Preparedness Sub-Committee","Response Sub-Committee","Recovery & Rehabilitation Sub-Committee","SRR","Security And Safety","Education","Damage Control/POANA Team/RDANA","Health Or First Aid & Psycho-Social Support","Livelihood","Evacuation/Camp Mngt.","Relief Distribution","Protection","Research And Planning","Communication & Warning","Transportation","Fire Management","Infrastructure and Shelter"],we={designation:"",name:"",contact:""},Xt=()=>{const{craData:t,setCraData:a}=g.useContext(C),m=g.useRef([]);g.useEffect(()=>{t.bdrrmc_directory||a({...t,bdrrmc_directory:Kt.map(s=>({...we,designation:s}))})},[]);const c=t.bdrrmc_directory||[],b=(s,i,o)=>{const r=[...c];r[s]={...r[s],[i]:o},a({...t,bdrrmc_directory:r})},u=()=>{a({...t,bdrrmc_directory:[...c,{...we}]}),j.success("Row added successfully!")},p=s=>{a({...t,bdrrmc_directory:c.filter((i,o)=>o!==s)}),j.error("Row removed!")},l=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{m.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[c]),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"#"}),e.jsx("th",{className:"border px-2 py-1",children:"Designation/Team"}),e.jsx("th",{className:"border px-2 py-1",children:"Name"}),e.jsx("th",{className:"border px-2 py-1",children:"Contact No."}),e.jsx("th",{className:"border px-2 py-1 w-[40px]"})]})}),e.jsx("tbody",{children:c.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:i+1}),e.jsx("td",{className:"border px-2 py-1 text-left",children:e.jsx("textarea",{ref:o=>m.current[i*3]=o,rows:1,value:s.designation,onChange:o=>{b(i,"designation",Ke(o.target.value)),l(o)},className:"border w-full px-2 py-1 text-left resize-none overflow-hidden",placeholder:"Enter Designation/team"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:o=>m.current[i*3+1]=o,rows:1,value:s.name,onChange:o=>{b(i,"name",$(o.target.value)),l(o)},className:"border w-full px-2 py-1 text-center resize-none overflow-hidden",placeholder:"Enter Name"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:o=>m.current[i*3+2]=o,rows:1,value:s.contact,onChange:o=>{b(i,"contact",o.target.value),l(o)},className:"border w-full px-2 py-1 text-center resize-none overflow-hidden",placeholder:"Enter contact number"})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>p(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i))})]})}),e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},Ce={task:"",responsible:"",remarks:""},Zt=()=>{const{craData:t,setCraData:a}=g.useContext(C),m=g.useRef([]);g.useEffect(()=>{t.evacuation_plan||a({...t,evacuation_plan:[{...Ce}]})},[]);const c=t.evacuation_plan||[],b=(s,i,o)=>{const r=[...c];r[s]={...r[s],[i]:o},a({...t,evacuation_plan:r})},u=()=>{a({...t,evacuation_plan:[...c,{...Ce}]}),j.success("Row added successfully!")},p=s=>{a({...t,evacuation_plan:c.filter((i,o)=>o!==s)}),j.error("Row removed!")},l=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{m.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[c]),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Barangay Evacuation Plan"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"#"}),e.jsx("th",{className:"border px-2 py-1",children:"THINGS TO DO"}),e.jsx("th",{className:"border px-2 py-1",children:"RESPONSIBLE PERSON"}),e.jsx("th",{className:"border px-2 py-1",children:"REMARKS"}),e.jsx("th",{className:"border px-2 py-1 w-[40px]"})]})}),e.jsx("tbody",{children:c.map((s,i)=>{const o={task:"Enter task or activity",responsible:"Enter responsible person",remarks:"Enter remarks or notes"};return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:i+1}),["task","responsible","remarks"].map((r,n)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:d=>m.current[i*3+n]=d,rows:1,value:s[r],onChange:d=>{let h=d.target.value;r==="responsible"&&(h=h.toUpperCase()),b(i,r,h),l(d)},placeholder:o[r],className:"border w-full px-2 py-1 text-left resize-none overflow-hidden"})},r)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>p(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i)})})]})}),e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-1 mt-3 px-2 py-1 text-xs font-medium border border-blue-500 text-blue-600 rounded-md hover:bg-blue-500 hover:text-white transition-colors duration-200 shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold",children:"+"})," Add Row"]})]})},es=()=>e.jsxs("div",{children:[e.jsx(k,{title:"11. Distribution of Relief Goods to Affected Families and Individuals",children:e.jsx(Ut,{})}),e.jsx(k,{title:"12. Inventory of Tranings Attended by the Members of BDRRMC",children:e.jsx(Jt,{})}),e.jsx(k,{title:`13. Inventory of Responsive Equipment that can be be utilized during Calamities
            and Disasters`,children:e.jsx(It,{})}),e.jsx(k,{title:"BDRRMC Directory",children:e.jsx(Xt,{})}),e.jsx(k,{title:"BARANGAY EVACUATION PLAN",children:e.jsx(Zt,{})})]});function ts(t,a=[]){let m=[];function c(u,p){const l=g.createContext(p),s=m.length;m=[...m,p];const i=r=>{var f;const{scope:n,children:d,...h}=r,x=((f=n==null?void 0:n[t])==null?void 0:f[s])||l,y=g.useMemo(()=>h,Object.values(h));return e.jsx(x.Provider,{value:y,children:d})};i.displayName=u+"Provider";function o(r,n){var x;const d=((x=n==null?void 0:n[t])==null?void 0:x[s])||l,h=g.useContext(d);if(h)return h;if(p!==void 0)return p;throw new Error(`\`${r}\` must be used within \`${u}\``)}return[i,o]}const b=()=>{const u=m.map(p=>g.createContext(p));return function(l){const s=(l==null?void 0:l[t])||u;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:s}}),[l,s])}};return b.scopeName=t,[c,ss(b,...a)]}function ss(...t){const a=t[0];if(t.length===1)return a;const m=()=>{const c=t.map(b=>({useScope:b(),scopeName:b.scopeName}));return function(u){const p=c.reduce((l,{useScope:s,scopeName:i})=>{const r=s(u)[`__scope${i}`];return{...l,...r}},{});return g.useMemo(()=>({[`__scope${a.scopeName}`]:p}),[p])}};return m.scopeName=a.scopeName,m}var rs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Me=rs.reduce((t,a)=>{const m=et(`Primitive.${a}`),c=g.forwardRef((b,u)=>{const{asChild:p,...l}=b,s=p?m:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(s,{...l,ref:u})});return c.displayName=`Primitive.${a}`,{...t,[a]:c}},{}),se="Progress",re=100,[as,Us]=ts(se),[ns,os]=as(se),Le=g.forwardRef((t,a)=>{const{__scopeProgress:m,value:c=null,max:b,getValueLabel:u=ls,...p}=t;(b||b===0)&&!Re(b)&&console.error(is(`${b}`,"Progress"));const l=Re(b)?b:re;c!==null&&!_e(c,l)&&console.error(cs(`${c}`,"Progress"));const s=_e(c,l)?c:null,i=G(s)?u(s,l):void 0;return e.jsx(ns,{scope:m,value:s,max:l,children:e.jsx(Me.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":G(s)?s:void 0,"aria-valuetext":i,role:"progressbar","data-state":Oe(s,l),"data-value":s??void 0,"data-max":l,...p,ref:a})})});Le.displayName=se;var Be="ProgressIndicator",He=g.forwardRef((t,a)=>{const{__scopeProgress:m,...c}=t,b=os(Be,m);return e.jsx(Me.div,{"data-state":Oe(b.value,b.max),"data-value":b.value??void 0,"data-max":b.max,...c,ref:a})});He.displayName=Be;function ls(t,a){return`${Math.round(t/a*100)}%`}function Oe(t,a){return t==null?"indeterminate":t===a?"complete":"loading"}function G(t){return typeof t=="number"}function Re(t){return G(t)&&!isNaN(t)&&t>0}function _e(t,a){return G(t)&&!isNaN(t)&&t<=a&&t>=0}function is(t,a){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${re}\`.`}function cs(t,a){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${re} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ze=Le,ds=He;const us=g.forwardRef(({className:t,value:a,...m},c)=>e.jsx(ze,{ref:c,className:tt("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...m,children:e.jsx(ds,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));us.displayName=ze.displayName;function Ys({progress:t,barangay_id:a}){const m=[{label:"Community Risk Assessment (CRA)",showOnMobile:!1}],[c,b]=g.useState(1),{props:u}=$e(),{success:p,error:l,craData:s}=u,o=new URLSearchParams(window.location.search).get("year")||"default",[r,n]=g.useState(o),d=`craDataDraft_${a}_${o}`,[h,x]=g.useState(()=>{try{const E=localStorage.getItem(d);return E?JSON.parse(E):{population:[],livelihood:(A??[]).map(F=>({type:F,male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""})),infrastructure:M??[],institutions:[],hazards:[],evacuation:[],buildings:JSON.parse(JSON.stringify(L)),facilities:JSON.parse(JSON.stringify(T)),year:o}}catch(E){return console.error("Error loading draft:",E),{population:[],livelihood:(A??[]).map(F=>({type:F,male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""})),infrastructure:M??[],institutions:[],hazards:[],evacuation:[],buildings:JSON.parse(JSON.stringify(L)),facilities:JSON.parse(JSON.stringify(T)),year:o}}});g.useEffect(()=>{r&&a&&localStorage.setItem(`craDataDraft_${a}_${r}`,JSON.stringify(h))},[h,r,a]),g.useEffect(()=>{if(!(!r||!a))try{const E=localStorage.getItem(`craDataDraft_${a}_${r}`);x(E?JSON.parse(E):{population:[],livelihood:(A??[]).map(F=>({type:F,male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""})),infrastructure:M??[],institutions:[],hazards:[],evacuation:[],buildings:JSON.parse(JSON.stringify(L)),facilities:JSON.parse(JSON.stringify(T)),year:r})}catch(E){console.error("Error reloading draft:",E)}},[r,a]);const[y,f]=g.useState([]),[N,v]=g.useState({}),w=["Barangay Resource Profile ","Community Disaster History","Barangay Risk Assessment","Inventory & Evacuations","Disaster Readiness"],S=E=>{switch(E){case 1:return e.jsx(yt,{});case 2:return e.jsx(Ht,{});case 3:return e.jsx(Mt,{});case 4:return e.jsx(Vt,{});case 5:return e.jsx(es,{});default:return null}},P=E=>{let F=c;if(E==="next"){if(c===w.length){We.post(route("cra.store"),{...h,barangay_id:a},{onSuccess:()=>{localStorage.removeItem(`craDataDraft_${a}_${r}`),q.success("CRA submitted successfully!")},onError:ae=>{v(ae),console.error("Validation Errors:",ae);const ne=localStorage.getItem(`craDataDraft_${a}_${r}`);ne&&x(JSON.parse(ne))}});return}F++}else F--;F>0&&F<=w.length&&b(F)},qe=()=>{if(!r){q.error("Year not set for CRA.");return}const E=route("cra.pdf",{id:r});window.open(E,"_blank")};return g.useEffect(()=>{p&&q.success(p,{description:"Your CRA has been successfully submitted!",duration:3e3,closeButton:!0})},[p]),g.useEffect(()=>{l&&q.error(l,{description:"Operation failed!",duration:3e3,closeButton:!0}),u.error=null},[l]),e.jsxs(Ue,{children:[e.jsx(Xe,{richColors:!0}),e.jsx(Ge,{title:"CRA"}),e.jsx(Ve,{breadcrumbs:m}),e.jsxs("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8 mt-6",children:[e.jsx("div",{className:"text-left mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:["Community Risk Assessment ",r," (CRA)"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Step-by-step process for evaluating barangay resources, hazards, and disaster readiness"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 shadow-sm border border-gray-200 w-full sm:w-64",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("h2",{className:"text-xs font-medium text-gray-700",children:"Overall Progress"}),e.jsxs("span",{className:"text-xs font-semibold text-gray-900",children:[(t==null?void 0:t.percentage)??0,"%"]})]}),e.jsx("div",{className:"relative w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full rounded-full transition-all duration-500 ease-in-out",style:{width:`${(t==null?void 0:t.percentage)??0}%`,background:(t==null?void 0:t.percentage)>=100?"linear-gradient(to right, #16a34a, #22c55e)":"linear-gradient(to right, #3b82f6, #60a5fa)"}})}),e.jsxs("div",{className:"flex justify-between items-center gap-2 mt-2",children:[e.jsxs("div",{className:"mt-1 text-[10px] text-gray-600",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",(t==null?void 0:t.status)??"Not started"]}),(t==null?void 0:t.submitted_at)&&e.jsxs("p",{className:"text-gray-500",children:["Submitted: ",t.submitted_at]}),(t==null?void 0:t.last_updated)&&e.jsxs("p",{className:"text-gray-500",children:["Updated: ",t.last_updated]})]}),e.jsx("button",{onClick:qe,className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs font-medium whitespace-nowrap",children:"Print CRA"})]})]})]})}),e.jsx("div",{className:"bg-blue-100 rounded-t-xl px-2 sm:px-6 lg:px-8 py-2 border-gray-200 shadow-lg flex justify-between items-center",children:e.jsx(Ye,{steps:w,currentStep:c})}),e.jsx("div",{className:"overflow-hidden bg-white border border-gray-200 rounded-b-xl p-2 drop-shadow-[0_4px_6px_rgba(0,0,0,0.1)]",children:e.jsx("div",{className:"my-2 pb-5 pr-5 pl-5 pt-0",children:e.jsx(C.Provider,{value:{craData:h,setCraData:x,finalData:y,setFinalData:f,errors:N,setErrors:v,year:r,setYear:n},children:S(c)})})}),e.jsx("div",{className:"mt-5",children:e.jsx(Je,{handleClick:P,currentStep:c,steps:w,craData:h})})]})]})}export{Ys as default};
